<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="IncidencePrevalence">
<title>Creating outcome cohorts • IncidencePrevalence</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating outcome cohorts">
<meta property="og:description" content="IncidencePrevalence">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IncidencePrevalence</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a01_Introduction_to_IncidencePrevalence.html">Introduction to IncidencePrevalence</a>
    <a class="dropdown-item" href="../articles/a02_Creating_denominator_populations.html">Creating denominator cohorts</a>
    <a class="dropdown-item" href="../articles/a03_Creating_outcome_cohorts.html">Creating outcome cohorts</a>
    <a class="dropdown-item" href="../articles/a04_Calculating_prevalence.html">Calculating prevalence</a>
    <a class="dropdown-item" href="../articles/a05_Calculating_incidence.html">Calculating incidence</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creating outcome cohorts</h1>
            
      
      
      <div class="d-none name"><code>a03_Creating_outcome_cohorts.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The functions <code><a href="../reference/estimatePointPrevalence.html">estimatePointPrevalence()</a></code>,
<code><a href="../reference/estimatePeriodPrevalence.html">estimatePeriodPrevalence()</a></code>, and
<code><a href="../reference/estimateIncidence.html">estimateIncidence()</a></code> will calculate incidence and prevalence
rates of a set of outcome cohorts for a set of denominator cohorts.
While the denominator cohorts can be created using the
<code><a href="../reference/generateDenominatorCohortSet.html">generateDenominatorCohortSet()</a></code> from this package, the set
of outcome cohorts used will be defined externally. Below we provide
some general instructions for defining outcome cohorts and adding them
to a cdm reference.</p>
</div>
<div class="section level2">
<h2 id="adding-an-outcome-cohort-based-on-a-json-definition">Adding an outcome cohort based on a JSON definition<a class="anchor" aria-label="anchor" href="#adding-an-outcome-cohort-based-on-a-json-definition"></a>
</h2>
<p>OMOP CDM cohort definitions can be represented as JSON. These JSON
definition could be created using tools such as ATLAS (<a href="https://github.com/OHDSI/Atlas" class="external-link uri">https://github.com/OHDSI/Atlas</a>) or capR (<a href="https://github.com/OHDSI/Capr" class="external-link uri">https://github.com/OHDSI/Capr</a>). How we define outcome
cohorts will depend on our research question, and we will need to
consider several aspects such as event persistence and restrictions in
the number of events occurring per person.</p>
<p>In general outcome definitions should include all occurrences of an
outcome in an individual´s history without restriction, as requirements
such as prior history can be incorporated when using
<code><a href="../reference/generateDenominatorCohortSet.html">generateDenominatorCohortSet()</a></code> as can other criteria such
as diagnoses of conditions or medication use (using the strata cohort
option). In addition, it should be kept in mind that the approach to
defining cohort exit can impact results for both incidence and
prevalence rates. For incidence rates, we can decide whether we want to
restrict our analysis to first events or if we want to include all the
events that occur per person. If we want to consider multiple events per
person, the duration of these events will be of importance, as we are
not going to capture subsequent events if prior events have not yet been
concluded. In addition, outcome washouts will be implemented relative to
cohort exit from any previous event. Event persistence will also
influence results generated by <code><a href="../reference/estimatePointPrevalence.html">estimatePointPrevalence()</a></code>
and <code><a href="../reference/estimatePeriodPrevalence.html">estimatePeriodPrevalence()</a></code> as the number of individuals
included in the numerator for a given moment or period of time will
differ depending on how the outcome cohort exit strategy was
defined.</p>
<p>Once we have a set of cohort definitions expressed as JSONs (saved in
a folder called “outcome_cohorts”), we can add the cohorts to an
existing cdm reference in a table called “outcome_table” like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcome_cohorts</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/read_cohort_set.html" class="external-link">readCohortSet</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"outcome_cohorts"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/generateCohortSet.html" class="external-link">generateCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  cohortSet <span class="op">=</span> <span class="va">outcome_cohorts</span>,</span>
<span>  name <span class="op">=</span> <span class="va">outcome_table</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="creating-outcome-cohorts-with-bespoke-code">Creating outcome cohorts with bespoke code<a class="anchor" aria-label="anchor" href="#creating-outcome-cohorts-with-bespoke-code"></a>
</h3>
<p>As long as the table created is in the format of an OMOP CDM cohort
table, an outcome cohort could also be defined via bespoke code. It is
beyond the scope of this vignette to describe all the ways a custom code
could be written to define an outcome, but suffice it to say that as
with defining a JSON cohort expression the outcome cohort created should
reflect the study question at hand. Similar considerations as above
would apply on defining outcome entry events, appropriate cohort exit
criteria, and so on.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Edward Burn, Berta Raventos, Marti Catala.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
