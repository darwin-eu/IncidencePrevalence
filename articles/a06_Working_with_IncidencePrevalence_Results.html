<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with IncidencePrevalence results • IncidencePrevalence</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with IncidencePrevalence results">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IncidencePrevalence</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01_Introduction_to_IncidencePrevalence.html">Introduction to IncidencePrevalence</a></li>
    <li><a class="dropdown-item" href="../articles/a02_Creating_denominator_populations.html">Creating denominator cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a03_Creating_target_denominator_populations.html">Creating target denominator populations</a></li>
    <li><a class="dropdown-item" href="../articles/a04_Calculating_prevalence.html">Calculating prevalence</a></li>
    <li><a class="dropdown-item" href="../articles/a05_Calculating_incidence.html">Calculating incidence</a></li>
    <li><a class="dropdown-item" href="../articles/a06_Working_with_IncidencePrevalence_Results.html">Working with IncidencePrevalence results</a></li>
    <li><a class="dropdown-item" href="../articles/a07_benchmark.html">Benchmarking the IncidencePrevalence R package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav"></ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Working with IncidencePrevalence results</h1>
            
      

      <div class="d-none name"><code>a06_Working_with_IncidencePrevalence_Results.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="standardardised-results-format">Standardardised results format<a class="anchor" aria-label="anchor" href="#standardardised-results-format"></a>
</h3>
<p>The IncidencePrevalence returns results from analyses in a
standardised results format, as defined in the omopgenerics package.
This format, a <code>summarised_result</code>, is explained in general
in the omopgenerics documenatation <a href="https://darwin-eu.github.io/omopgenerics/articles/summarised_result.html" class="external-link uri">https://darwin-eu.github.io/omopgenerics/articles/summarised_result.html</a>.</p>
<p>Let’s see how this result format is used by IncidencePrevalence.</p>
<p>We’ll first create some example incidence and prevalence results with
a mock dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/IncidencePrevalence/">IncidencePrevalence</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mockIncidencePrevalence.html">mockIncidencePrevalence</a></span><span class="op">(</span></span>
<span>  sampleSize <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  outPre <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  minOutcomeDays <span class="op">=</span> <span class="fl">365</span>,</span>
<span>  maxOutcomeDays <span class="op">=</span> <span class="fl">3650</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDenominatorCohortSet.html">generateDenominatorCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"denominator"</span>,</span>
<span>  cohortDateRange <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2008-01-01"</span>, <span class="st">"2018-01-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  ageGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">64</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">100</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Both"</span><span class="op">)</span>,</span>
<span>  daysPriorObservation <span class="op">=</span> <span class="fl">180</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">inc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimateIncidence.html">estimateIncidence</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  denominatorTable <span class="op">=</span> <span class="st">"denominator"</span>,</span>
<span>  outcomeTable <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  repeatedEvents <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  outcomeWashout <span class="op">=</span> <span class="fl">180</span>,</span>
<span>  completeDatabaseIntervals <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">prev_point</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimatePointPrevalence.html">estimatePointPrevalence</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  denominatorTable <span class="op">=</span> <span class="st">"denominator"</span>,</span>
<span>  outcomeTable <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  timePoint <span class="op">=</span> <span class="st">"start"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can see that both of our results object have a “summarised_result”
class.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">inc</span>, <span class="st">"summarised_result"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">prev_point</span>, <span class="st">"summarised_result"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>In practice, this means that our results have the following
columns</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/resultColumns.html" class="external-link">resultColumns</a></span><span class="op">(</span><span class="st">"summarised_result"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "result_id"        "cdm_name"         "group_name"       "group_level"     </span></span>
<span><span class="co">#&gt;  [5] "strata_name"      "strata_level"     "variable_name"    "variable_level"  </span></span>
<span><span class="co">#&gt;  [9] "estimate_name"    "estimate_type"    "estimate_value"   "additional_name" </span></span>
<span><span class="co">#&gt; [13] "additional_level"</span></span></code></pre></div>
<p>And we can see that this is indeed the case for incidence and
prevalence results</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 700</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ result_id        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ cdm_name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "mock", "mock", "mock…</span></span>
<span><span class="co">#&gt; $ group_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outcome_cohort_name", "d…</span></span>
<span><span class="co">#&gt; $ group_level      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3 &amp;&amp;&amp; cohort_1", "denominator_coh…</span></span>
<span><span class="co">#&gt; $ strata_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ strata_level     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ variable_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Denominator", "Outcome", "Denominator", "Denominator…</span></span>
<span><span class="co">#&gt; $ variable_level   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ estimate_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_count", "outcome_count", "person_days", …</span></span>
<span><span class="co">#&gt; $ estimate_type    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "integer", "integer", "numeric", "numeric", "numeric"…</span></span>
<span><span class="co">#&gt; $ estimate_value   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "326", "13", "96994", "265.555", "4895.408", "2606.59…</span></span>
<span><span class="co">#&gt; $ additional_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence_start_date &amp;&amp;&amp; incidence_end_date &amp;&amp;&amp; anal…</span></span>
<span><span class="co">#&gt; $ additional_level <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01 &amp;&amp;&amp; 2008-12-31 &amp;&amp;&amp; years", "2008-01-01 &amp;&amp;…</span></span>
<span></span>
<span><span class="va">prev_point</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 610</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ result_id        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ cdm_name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "mock", "mock", "mock…</span></span>
<span><span class="co">#&gt; $ group_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outcome_cohort_name", "d…</span></span>
<span><span class="co">#&gt; $ group_level      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3 &amp;&amp;&amp; cohort_1", "denominator_coh…</span></span>
<span><span class="co">#&gt; $ strata_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ strata_level     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ variable_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Denominator", "Outcome", "Outcome", "Outcome", "Outc…</span></span>
<span><span class="co">#&gt; $ variable_level   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ estimate_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_count", "outcome_count", "prevalence", "…</span></span>
<span><span class="co">#&gt; $ estimate_type    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "integer", "integer", "numeric", "numeric", "numeric"…</span></span>
<span><span class="co">#&gt; $ estimate_value   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "330", "57", "0.17273", "0.13577", "0.21722", "322", …</span></span>
<span><span class="co">#&gt; $ additional_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "prevalence_start_date &amp;&amp;&amp; prevalence_end_date &amp;&amp;&amp; an…</span></span>
<span><span class="co">#&gt; $ additional_level <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01 &amp;&amp;&amp; 2008-01-01 &amp;&amp;&amp; years", "2008-01-01 &amp;&amp;…</span></span></code></pre></div>
<p>In addition to these main results, we can see that our results are
also associated with settings. These settings contain information on how
the results were created. Although we can see that some settings are
present for both incidence and prevalence, such as
<code>denominator_days_prior_observation</code> which relates to the
input to <code>daysPriorObservation</code> we specified above, others
are only present for the relevant result, such analysis_outcome_washout
which relates to the <code>outcomeWashout</code> argument used for the
<code><a href="../reference/estimateIncidence.html">estimateIncidence()</a></code> function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/settings.html" class="external-link">settings</a></span><span class="op">(</span><span class="va">inc</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 12</span></span>
<span><span class="co">#&gt; Columns: 20</span></span>
<span><span class="co">#&gt; $ result_id                            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11…</span></span>
<span><span class="co">#&gt; $ result_type                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence", "incidence", "incide…</span></span>
<span><span class="co">#&gt; $ package_name                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "IncidencePrevalence", "Incidence…</span></span>
<span><span class="co">#&gt; $ package_version                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1.2.0", "1.2.0", "1.2.0", "1.2.0…</span></span>
<span><span class="co">#&gt; $ group                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outc…</span></span>
<span><span class="co">#&gt; $ strata                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "", "", "", "", "", "", "reason",…</span></span>
<span><span class="co">#&gt; $ additional                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence_start_date &amp;&amp;&amp; inciden…</span></span>
<span><span class="co">#&gt; $ min_cell_count                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0", "0", "0", "0", "0", "0", "0"…</span></span>
<span><span class="co">#&gt; $ analysis_censor_cohort_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ analysis_complete_database_intervals <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ analysis_outcome_washout             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ analysis_repeated_events             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ denominator_age_group                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to 64", "0 to 64", "0 to 64", …</span></span>
<span><span class="co">#&gt; $ denominator_days_prior_observation   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ denominator_end_date                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2018-01-01", "2018-01-01", "2018…</span></span>
<span><span class="co">#&gt; $ denominator_requirements_at_entry    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ denominator_sex                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Both", "Female", "Male", "Both",…</span></span>
<span><span class="co">#&gt; $ denominator_start_date               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01", "2008-01-01", "2008…</span></span>
<span><span class="co">#&gt; $ denominator_target_cohort_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ denominator_time_at_risk             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to Inf", "0 to Inf", "0 to Inf…</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/settings.html" class="external-link">settings</a></span><span class="op">(</span><span class="va">prev_point</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 12</span></span>
<span><span class="co">#&gt; Columns: 19</span></span>
<span><span class="co">#&gt; $ result_id                            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11…</span></span>
<span><span class="co">#&gt; $ result_type                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "prevalence", "prevalence", "prev…</span></span>
<span><span class="co">#&gt; $ package_name                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "IncidencePrevalence", "Incidence…</span></span>
<span><span class="co">#&gt; $ package_version                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1.2.0", "1.2.0", "1.2.0", "1.2.0…</span></span>
<span><span class="co">#&gt; $ group                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outc…</span></span>
<span><span class="co">#&gt; $ strata                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "", "", "", "", "", "", "reason",…</span></span>
<span><span class="co">#&gt; $ additional                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "prevalence_start_date &amp;&amp;&amp; preval…</span></span>
<span><span class="co">#&gt; $ min_cell_count                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0", "0", "0", "0", "0", "0", "0"…</span></span>
<span><span class="co">#&gt; $ analysis_complete_database_intervals <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ analysis_full_contribution           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ analysis_type                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "point prevalence", "point preval…</span></span>
<span><span class="co">#&gt; $ denominator_age_group                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to 64", "0 to 64", "0 to 64", …</span></span>
<span><span class="co">#&gt; $ denominator_days_prior_observation   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ denominator_end_date                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2018-01-01", "2018-01-01", "2018…</span></span>
<span><span class="co">#&gt; $ denominator_requirements_at_entry    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ denominator_sex                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Both", "Female", "Male", "Both",…</span></span>
<span><span class="co">#&gt; $ denominator_start_date               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01", "2008-01-01", "2008…</span></span>
<span><span class="co">#&gt; $ denominator_target_cohort_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ denominator_time_at_risk             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to Inf", "0 to Inf", "0 to Inf…</span></span></code></pre></div>
<p>Because our results are in the same format we can easily combine them
using the <code>bind</code>. We can see that after this we will have the
same results columns, while the settings are now combined with all
analytic choices used stored.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/bind.html" class="external-link">bind</a></span><span class="op">(</span><span class="va">inc</span>, <span class="va">prev_point</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1,310</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ result_id        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ cdm_name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "mock", "mock", "mock…</span></span>
<span><span class="co">#&gt; $ group_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outcome_cohort_name", "d…</span></span>
<span><span class="co">#&gt; $ group_level      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3 &amp;&amp;&amp; cohort_1", "denominator_coh…</span></span>
<span><span class="co">#&gt; $ strata_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ strata_level     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ variable_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Denominator", "Outcome", "Denominator", "Denominator…</span></span>
<span><span class="co">#&gt; $ variable_level   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ estimate_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_count", "outcome_count", "person_days", …</span></span>
<span><span class="co">#&gt; $ estimate_type    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "integer", "integer", "numeric", "numeric", "numeric"…</span></span>
<span><span class="co">#&gt; $ estimate_value   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "326", "13", "96994", "265.555", "4895.408", "2606.59…</span></span>
<span><span class="co">#&gt; $ additional_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence_start_date &amp;&amp;&amp; incidence_end_date &amp;&amp;&amp; anal…</span></span>
<span><span class="co">#&gt; $ additional_level <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01 &amp;&amp;&amp; 2008-12-31 &amp;&amp;&amp; years", "2008-01-01 &amp;&amp;…</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1,310</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ result_id        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ cdm_name         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "mock", "mock", "mock…</span></span>
<span><span class="co">#&gt; $ group_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outcome_cohort_name", "d…</span></span>
<span><span class="co">#&gt; $ group_level      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3 &amp;&amp;&amp; cohort_1", "denominator_coh…</span></span>
<span><span class="co">#&gt; $ strata_name      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ strata_level     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "overall", "overall", "overall", "overall", "overall"…</span></span>
<span><span class="co">#&gt; $ variable_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Denominator", "Outcome", "Denominator", "Denominator…</span></span>
<span><span class="co">#&gt; $ variable_level   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ estimate_name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_count", "outcome_count", "person_days", …</span></span>
<span><span class="co">#&gt; $ estimate_type    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "integer", "integer", "numeric", "numeric", "numeric"…</span></span>
<span><span class="co">#&gt; $ estimate_value   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "326", "13", "96994", "265.555", "4895.408", "2606.59…</span></span>
<span><span class="co">#&gt; $ additional_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence_start_date &amp;&amp;&amp; incidence_end_date &amp;&amp;&amp; anal…</span></span>
<span><span class="co">#&gt; $ additional_level <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01 &amp;&amp;&amp; 2008-12-31 &amp;&amp;&amp; years", "2008-01-01 &amp;&amp;…</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/settings.html" class="external-link">settings</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 24</span></span>
<span><span class="co">#&gt; Columns: 22</span></span>
<span><span class="co">#&gt; $ result_id                            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11…</span></span>
<span><span class="co">#&gt; $ result_type                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence", "incidence", "incide…</span></span>
<span><span class="co">#&gt; $ package_name                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "IncidencePrevalence", "Incidence…</span></span>
<span><span class="co">#&gt; $ package_version                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1.2.0", "1.2.0", "1.2.0", "1.2.0…</span></span>
<span><span class="co">#&gt; $ group                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_name &amp;&amp;&amp; outc…</span></span>
<span><span class="co">#&gt; $ strata                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "", "", "", "", "", "", "reason",…</span></span>
<span><span class="co">#&gt; $ additional                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "incidence_start_date &amp;&amp;&amp; inciden…</span></span>
<span><span class="co">#&gt; $ min_cell_count                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0", "0", "0", "0", "0", "0", "0"…</span></span>
<span><span class="co">#&gt; $ analysis_censor_cohort_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ analysis_complete_database_intervals <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ analysis_full_contribution           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ analysis_outcome_washout             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ analysis_repeated_events             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ analysis_type                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">#&gt; $ denominator_age_group                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to 64", "0 to 64", "0 to 64", …</span></span>
<span><span class="co">#&gt; $ denominator_days_prior_observation   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ denominator_end_date                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2018-01-01", "2018-01-01", "2018…</span></span>
<span><span class="co">#&gt; $ denominator_requirements_at_entry    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ denominator_sex                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Both", "Female", "Male", "Both",…</span></span>
<span><span class="co">#&gt; $ denominator_start_date               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2008-01-01", "2008-01-01", "2008…</span></span>
<span><span class="co">#&gt; $ denominator_target_cohort_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ denominator_time_at_risk             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to Inf", "0 to Inf", "0 to Inf…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exporting-and-importing-results">Exporting and importing results<a class="anchor" aria-label="anchor" href="#exporting-and-importing-results"></a>
</h3>
<p>We can export our results in a single CSV. Note that when exporting
we will apply minimum cell count of 5, suppressing any results below
this.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"my_study_results"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/exportSummarisedResult.html" class="external-link">exportSummarisedResult</a></span><span class="op">(</span><span class="va">results</span>,</span>
<span>                       minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                       fileName <span class="op">=</span> <span class="st">"incidence_prevalence_results.csv"</span>,</span>
<span>                       path <span class="op">=</span> <span class="va">dir</span><span class="op">)</span></span></code></pre></div>
<p>We can see we have created a single CSV file with our results which
contains our suppressed aggregated results which our ready to share.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "incidence_prevalence_results.csv"</span></span></code></pre></div>
<p>We can import our results back into R (or if we’re running a network
study we could import our set of results from data partners).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res_imported</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/importSummarisedResult.html" class="external-link">importSummarisedResult</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validate-minimum-cell-count-suppression">Validate minimum cell count suppression<a class="anchor" aria-label="anchor" href="#validate-minimum-cell-count-suppression"></a>
</h2>
<p>We can validate whether our results have been suppressed. We can see
that our original results have not been suppressed but the ones we
exported were.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/isResultSuppressed.html" class="external-link">isResultSuppressed</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: <span style="color: #BB0000;">✖</span> 24 (1310 rows) not suppressed.</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/isResultSuppressed.html" class="external-link">isResultSuppressed</a></span><span class="op">(</span><span class="va">res_imported</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> The <span style="color: #0000BB;">&lt;summarised_result&gt;</span> is suppressed with</span></span>
<span><span class="co">#&gt; minCellCount = 5.</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tidying-results-for-further-analysis">Tidying results for further analysis<a class="anchor" aria-label="anchor" href="#tidying-results-for-further-analysis"></a>
</h2>
<p>Although our standardised result format is a nice way to combine,
store, and share results, in can be somewhat difficult to use if we want
to perform further analyses. So to get to a tidy format more specific to
their type of results we can use asIncidenceResult() and
asPrevalenceResult(), respectively.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/asIncidenceResult.html">asIncidenceResult</a></span><span class="op">(</span><span class="va">inc</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 60</span></span>
<span><span class="co">#&gt; Columns: 26</span></span>
<span><span class="co">#&gt; $ cdm_name                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "…</span></span>
<span><span class="co">#&gt; $ denominator_cohort_name              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3", "denomina…</span></span>
<span><span class="co">#&gt; $ outcome_cohort_name                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "cohort_1", "cohort_1", "cohort_1…</span></span>
<span><span class="co">#&gt; $ incidence_start_date                 <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-01-01, 2009-01-01, 2010-01-…</span></span>
<span><span class="co">#&gt; $ incidence_end_date                   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-12-31, 2009-12-31, 2010-12-…</span></span>
<span><span class="co">#&gt; $ analysis_interval                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "years", "years", "years", "years…</span></span>
<span><span class="co">#&gt; $ analysis_censor_cohort_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ analysis_complete_database_intervals <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ analysis_outcome_washout             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ analysis_repeated_events             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TRUE", "TRUE", "TRUE", "TRUE", "…</span></span>
<span><span class="co">#&gt; $ denominator_age_group                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to 64", "0 to 64", "0 to 64", …</span></span>
<span><span class="co">#&gt; $ denominator_days_prior_observation   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ denominator_end_date                 <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2018-01-01, 2018-01-01, 2018-01-…</span></span>
<span><span class="co">#&gt; $ denominator_requirements_at_entry    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ denominator_sex                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Both", "Both", "Both", "Both", "…</span></span>
<span><span class="co">#&gt; $ denominator_start_date               <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-01-01, 2008-01-01, 2008-01-…</span></span>
<span><span class="co">#&gt; $ denominator_target_cohort_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ denominator_time_at_risk             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to Inf", "0 to Inf", "0 to Inf…</span></span>
<span><span class="co">#&gt; $ denominator_count                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 326, 317, 312, 235, 179, 140, 106…</span></span>
<span><span class="co">#&gt; $ outcome_count                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 13, 14, 20, 16, 6, 7, 4, 2, 4, 2,…</span></span>
<span><span class="co">#&gt; $ person_days                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 96994, 98005, 95462, 76142, 58392…</span></span>
<span><span class="co">#&gt; $ person_years                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 265.555, 268.323, 261.361, 208.46…</span></span>
<span><span class="co">#&gt; $ incidence_100000_pys                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4895.408, 5217.592, 7652.251, 767…</span></span>
<span><span class="co">#&gt; $ incidence_100000_pys_95CI_lower      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2606.598, 2852.506, 4674.194, 438…</span></span>
<span><span class="co">#&gt; $ incidence_100000_pys_95CI_upper      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8371.296, 8754.233, 11818.281, 12…</span></span>
<span><span class="co">#&gt; $ result_type                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "tidy_incidence", "tidy_incidence…</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/asPrevalenceResult.html">asPrevalenceResult</a></span><span class="op">(</span><span class="va">prev_point</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 66</span></span>
<span><span class="co">#&gt; Columns: 23</span></span>
<span><span class="co">#&gt; $ cdm_name                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "mock", "mock", "mock", "mock", "…</span></span>
<span><span class="co">#&gt; $ denominator_cohort_name              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "denominator_cohort_3", "denomina…</span></span>
<span><span class="co">#&gt; $ outcome_cohort_name                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "cohort_1", "cohort_1", "cohort_1…</span></span>
<span><span class="co">#&gt; $ prevalence_start_date                <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-01-01, 2009-01-01, 2010-01-…</span></span>
<span><span class="co">#&gt; $ prevalence_end_date                  <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-01-01, 2009-01-01, 2010-01-…</span></span>
<span><span class="co">#&gt; $ analysis_interval                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "years", "years", "years", "years…</span></span>
<span><span class="co">#&gt; $ analysis_complete_database_intervals <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ analysis_full_contribution           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ analysis_type                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "point prevalence", "point preval…</span></span>
<span><span class="co">#&gt; $ denominator_age_group                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to 64", "0 to 64", "0 to 64", …</span></span>
<span><span class="co">#&gt; $ denominator_days_prior_observation   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "180", "180", "180", "180", "180"…</span></span>
<span><span class="co">#&gt; $ denominator_end_date                 <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2018-01-01, 2018-01-01, 2018-01-…</span></span>
<span><span class="co">#&gt; $ denominator_requirements_at_entry    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "FALSE", "FALSE", "FALSE", "FALSE…</span></span>
<span><span class="co">#&gt; $ denominator_sex                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Both", "Both", "Both", "Both", "…</span></span>
<span><span class="co">#&gt; $ denominator_start_date               <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2008-01-01, 2008-01-01, 2008-01-…</span></span>
<span><span class="co">#&gt; $ denominator_target_cohort_name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "None", "None", "None", "None", "…</span></span>
<span><span class="co">#&gt; $ denominator_time_at_risk             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0 to Inf", "0 to Inf", "0 to Inf…</span></span>
<span><span class="co">#&gt; $ denominator_count                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 330, 322, 326, 291, 236, 184, 142…</span></span>
<span><span class="co">#&gt; $ outcome_count                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 57, 55, 54, 56, 57, 44, 36, 27, 2…</span></span>
<span><span class="co">#&gt; $ prevalence                           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.17273, 0.17081, 0.16564, 0.1924…</span></span>
<span><span class="co">#&gt; $ prevalence_95CI_lower                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.13577, 0.13364, 0.12923, 0.1512…</span></span>
<span><span class="co">#&gt; $ prevalence_95CI_upper                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.21722, 0.21573, 0.20985, 0.2416…</span></span>
<span><span class="co">#&gt; $ result_type                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "tidy_prevalence", "tidy_prevalen…</span></span></code></pre></div>
<p>With these formats it is now much easier to create custom tables,
plots, or post-process are results. For a somewhat trivial example, we
can use this to help us quickly add a smoothed line to our incidence
results in a custom plot.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/asIncidenceResult.html">asIncidenceResult</a></span><span class="op">(</span><span class="va">inc</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">incidence_start_date</span>, </span>
<span>             y <span class="op">=</span> <span class="va">incidence_100000_pys</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"loess"</span>, se <span class="op">=</span> <span class="cn">FALSE</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">denominator_age_group</span>, <span class="va">denominator_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Smoothed incidence rates over time"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Incidence per 100,000 person-years"</span><span class="op">)</span></span></code></pre></div>
<p><img src="a06_Working_with_IncidencePrevalence_Results_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edward Burn, Berta Raventos, Marti Catala.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
