[{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"filing-issues","dir":"","previous_headings":"","what":"Filing issues","title":"Contributing to IncidencePrevalence","text":"found bug, question, want suggest new feature please open issue. reporting bug, reprex much appreciated. contributing either documentation code, please make sure open issue beforehand identify needs done .","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"documenting-the-package","dir":"","previous_headings":"Contributing code or documentation","what":"Documenting the package","title":"Contributing to IncidencePrevalence","text":"Run update check package documentation: Note devtools::check_man() return warnings. commit limited package documentation, running sufficient (although running devtools::check() always generally good idea submitting pull request.","code":"devtools::document()  devtools::run_examples() devtools::build_readme() devtools::build_vignettes() devtools::check_man()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"run-tests","dir":"","previous_headings":"Contributing code or documentation","what":"Run tests","title":"Contributing to IncidencePrevalence","text":"starting contribute code, first make sure package tests passing. raise issue going (although please first make sure packages imports suggests installed). contribute code, make sure current tests add continue pass. package tests can run together : Code add new functionality accompanied tests. Code coverage can checked using:","code":"devtools::test() # note, you may first have to detach the package # detach(\"package:IncidencePrevalence\", unload=TRUE) devtools::test_coverage()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"adhere-to-code-style","dir":"","previous_headings":"Contributing code or documentation","what":"Adhere to code style","title":"Contributing to IncidencePrevalence","text":"Please adhere code style adding new code. though restyle code unrelated pull request make code review difficult.","code":"lintr::lint_package(\".\",                     linters = lintr::linters_with_defaults(                       lintr::object_name_linter(styles = \"camelCase\")                     ) )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"run-check-before-opening-a-pull-request","dir":"","previous_headings":"Contributing code or documentation","what":"Run check() before opening a pull request","title":"Contributing to IncidencePrevalence","text":"opening pull request please make sure run: warnings seen.","code":"devtools::check()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Creating denominator cohorts","text":"Calculating incidence prevalence requires first identifying appropriate denominator population. find denominator population (multiple denominator populations) can use generateDenominatorCohortSet() function. function identify time people database satisfy set criteria related study period individuals´ age, sex, amount prior observed history. using generateDenominatorCohortSet(), absence strata cohort (see ), individuals enter denominator population respective date latest following: Study start date Date sufficient prior history (requirement prior history, date coincide date observation period starts) Date reach minimum age exit respective date earliest following: Study end date Date observation period ends last day maximum age Let´s go examples make logic little concrete.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"no-specific-requirements","dir":"Articles","previous_headings":"Introduction","what":"No specific requirements","title":"Creating denominator cohorts","text":"simplest case study start end dates specified, prior history requirement imposed, age sex criteria. case individuals enter denominator population entered database (start observation period) leave exit database (end observation period). Note databases person can multiple observation periods, case contribution person time look like last person .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period","dir":"Articles","previous_headings":"Introduction","what":"Specified study period","title":"Creating denominator cohorts","text":"specify study start end date observation time period included.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-and-prior-history-requirement","dir":"Articles","previous_headings":"Introduction","what":"Specified study period and prior history requirement","title":"Creating denominator cohorts","text":"also add requirement prior history somebody contribute time risk reached.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-prior-history-requirement-and-age-and-sex-criteria","dir":"Articles","previous_headings":"Introduction","what":"Specified study period, prior history requirement, and age and sex criteria","title":"Creating denominator cohorts","text":"Lastly can also impose age sex criteria, now individuals contribute time also satisfy criteria. shown figure person´s sex, also stratify denominator population well.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"using-generatedenominatorcohortset","dir":"Articles","previous_headings":"","what":"Using generateDenominatorCohortSet()","title":"Creating denominator cohorts","text":"generateDenominatorCohortSet() function use identify set denominator populations. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 500 example patients using mockIncidencePrevalenceRef() function.","code":"library(IncidencePrevalence) library(ggplot2) library(tidyr)  cdm <- mockIncidencePrevalenceRef(sampleSize = 500)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"no-specific-requirements-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"No specific requirements","title":"Creating denominator cohorts","text":"can get denominator population without including particular requirements like Let´s look included time first five patients  can also plot histogram start end dates 500 simulated patients","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 0 ) cdm$denominator #> # Source:   table<dbplyr_008> [?? x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 2          2018-11-27        2020-07-15      #>  2                    1 4          2016-02-24        2016-07-14      #>  3                    1 6          2006-04-29        2007-03-15      #>  4                    1 9          2006-11-14        2008-09-29      #>  5                    1 10         2009-12-16        2011-11-26      #>  6                    1 12         2015-05-09        2016-03-25      #>  7                    1 14         2013-07-23        2014-07-01      #>  8                    1 15         2005-06-30        2007-05-16      #>  9                    1 17         2011-06-19        2012-03-16      #> 10                    1 19         2013-09-21        2014-12-02      #> # … with more rows  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [5 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 2          2018-11-27        2020-07-15      #> 2                    1 4          2016-02-24        2016-07-14      #> 3                    1 3          2008-04-30        2008-09-19      #> 4                    1 5          2019-03-01        2019-03-18      #> 5                    1 1          2008-10-12        2010-01-09 cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period","title":"Creating denominator cohorts","text":"can get specify study period like Now can see person “2”, “4” “5” haven´t included don´t observation time study period. Indeed, ´re now including 106 original 500 simulated patients.  can also plot histogram start end dates can see now people enter start study period leave end.","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 0 ) cdm$denominator #> # Source:   table<dbplyr_016> [?? x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 9          2008-01-01        2008-09-29      #>  2                    1 10         2009-12-16        2010-01-01      #>  3                    1 20         2008-01-01        2008-05-28      #>  4                    1 22         2008-10-23        2008-12-12      #>  5                    1 24         2008-01-01        2008-06-21      #>  6                    1 35         2008-02-29        2008-08-09      #>  7                    1 43         2008-08-01        2009-01-20      #>  8                    1 48         2008-01-01        2009-02-19      #>  9                    1 54         2008-01-01        2009-04-03      #> 10                    1 76         2008-01-01        2008-01-16      #> # … with more rows  cohortCount(cdm$denominator) #> # A tibble: 1 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1   106  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [2 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 3          2008-04-30        2008-09-19      #> 2                    1 1          2008-10-12        2010-01-01 cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot() +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-and-prior-history-requirement-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period and prior history requirement","title":"Creating denominator cohorts","text":"can add requirement prior history Now include patient “1” original first five ´re now including 57 original 500 simulated patients.  histograms start end dates now looking like","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 365 ) cdm$denominator #> # Source:   table<dbplyr_024> [?? x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 9          2008-01-01        2008-09-29      #>  2                    1 20         2008-01-01        2008-05-28      #>  3                    1 48         2008-02-28        2009-02-19      #>  4                    1 54         2008-01-01        2009-04-03      #>  5                    1 76         2008-01-01        2008-01-16      #>  6                    1 78         2008-04-20        2008-06-02      #>  7                    1 87         2009-11-07        2010-01-01      #>  8                    1 99         2008-06-08        2008-12-16      #>  9                    1 103        2009-06-23        2009-07-07      #> 10                    1 105        2008-01-01        2008-05-16      #> # … with more rows  cohortCount(cdm$denominator) #> # A tibble: 1 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1    57  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [1 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 1          2009-10-12        2010-01-01 cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot() +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-prior-history-requirement-and-age-and-sex-criteria-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period, prior history requirement, and age and sex criteria","title":"Creating denominator cohorts","text":"addition also add requirements around age sex. One thing note age upper limit include time person day reach age upper limit + 1 year. instance, upper limit 65, means include time person including day 66th birthday. Now none original first five included ´re including 20 original 500 simulated patients. histograms start end dates now looking like","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(c(18, 65)),   sex = \"Female\",   daysPriorHistory = 365 ) cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"20\", \"54\", \"78\", \"99\", \"168\", \"176\", \"182\", \"231… #> $ cohort_start_date    <date> 2008-01-01, 2008-01-01, 2008-04-20, 2008-06-08, … #> $ cohort_end_date      <date> 2008-05-28, 2009-03-05, 2008-06-02, 2008-12-16, …  cohortCount(cdm$denominator) #> # A tibble: 1 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1    20  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [0 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #> # … with 4 variables: cohort_definition_id <int>, subject_id <chr>, #> #   cohort_start_date <date>, cohort_end_date <date> cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"multiple-options-to-return-multiple-denominator-populations","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Multiple options to return multiple denominator populations","title":"Creating denominator cohorts","text":"one age, sex prior history requirements can specified time. First, can take look two age groups. can see individuals 41st birthday study period go first cohort (age_group: 0;40) second (age_group: 41;100) day.  can also  also specifying multiple prior history requirements","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = \"Both\",   daysPriorHistory = 0 ) dpop <- cdm$denominator %>%   collect() %>%   left_join(settings(cdm$denominator))  dpop %>%   glimpse() #> Rows: 106 #> Columns: 11 #> $ cohort_definition_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ subject_id                  <chr> \"24\", \"43\", \"48\", \"76\", \"78\", \"79\", \"87\", … #> $ cohort_start_date           <date> 2008-01-01, 2008-08-01, 2008-01-01, 2008-… #> $ cohort_end_date             <date> 2008-06-21, 2009-01-20, 2009-02-19, 2008-… #> $ age_group                   <chr> \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0… #> $ sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\", \"Both\", \"B… #> $ days_prior_history          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ start_date                  <date> 2008-01-01, 2008-01-01, 2008-01-01, 2008-… #> $ end_date                    <date> 2010-01-01, 2010-01-01, 2010-01-01, 2010-… #> $ strata_cohort_definition_id <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ strata_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…  dpop %>%   group_by(cohort_definition_id, age_group) %>%   tally() #> # A tibble: 2 × 3 #> # Groups:   cohort_definition_id [2] #>   cohort_definition_id age_group     n #>                  <int> <chr>     <int> #> 1                    1 0;40         50 #> 2                    2 41;100       56  dpop %>%   filter(subject_id %in% c(\"1\", \"3\", \"57\", \"353\", \"393\", \"496\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id)) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_minimal() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip() cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorHistory = 0 ) dpop <- cdm$denominator %>%   collect() %>%   left_join(settings(cdm$denominator))  dpop %>% glimpse() #> Rows: 212 #> Columns: 11 #> $ cohort_definition_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ subject_id                  <chr> \"48\", \"87\", \"194\", \"203\", \"219\", \"303\", \"3… #> $ cohort_start_date           <date> 2008-01-01, 2008-11-07, 2008-01-01, 2008-… #> $ cohort_end_date             <date> 2009-02-19, 2010-01-01, 2010-01-01, 2009-… #> $ age_group                   <chr> \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0… #> $ sex                         <chr> \"Male\", \"Male\", \"Male\", \"Male\", \"Male\", \"M… #> $ days_prior_history          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ start_date                  <date> 2008-01-01, 2008-01-01, 2008-01-01, 2008-… #> $ end_date                    <date> 2010-01-01, 2010-01-01, 2010-01-01, 2010-… #> $ strata_cohort_definition_id <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ strata_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…  dpop %>%   group_by(cohort_definition_id, age_group, sex) %>%   tally() #> # A tibble: 6 × 4 #> # Groups:   cohort_definition_id, age_group [6] #>   cohort_definition_id age_group sex        n #>                  <int> <chr>     <chr>  <int> #> 1                    1 0;40      Male      19 #> 2                    2 0;40      Female    31 #> 3                    3 0;40      Both      50 #> 4                    4 41;100    Male      31 #> 5                    5 41;100    Female    25 #> 6                    6 41;100    Both      56  dpop %>%   filter(subject_id %in% c(\"1\", \"3\", \"57\", \"353\", \"393\", \"496\")) %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id)) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   facet_grid(sex ~ ., space = \"free_y\") +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_bw() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip() cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorHistory = c(0, 365) ) dpop <- cdm$denominator %>%   collect() %>%   left_join(settings(cdm$denominator))  dpop %>% glimpse() #> Rows: 326 #> Columns: 11 #> $ cohort_definition_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ subject_id                  <chr> \"48\", \"87\", \"194\", \"203\", \"219\", \"303\", \"3… #> $ cohort_start_date           <date> 2008-01-01, 2008-11-07, 2008-01-01, 2008-… #> $ cohort_end_date             <date> 2009-02-19, 2010-01-01, 2010-01-01, 2009-… #> $ age_group                   <chr> \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0;40\", \"0… #> $ sex                         <chr> \"Male\", \"Male\", \"Male\", \"Male\", \"Male\", \"M… #> $ days_prior_history          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ start_date                  <date> 2008-01-01, 2008-01-01, 2008-01-01, 2008-… #> $ end_date                    <date> 2010-01-01, 2010-01-01, 2010-01-01, 2010-… #> $ strata_cohort_definition_id <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ strata_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…  dpop %>%   group_by(cohort_definition_id, age_group, sex, days_prior_history) %>%   tally() #> # A tibble: 12 × 5 #> # Groups:   cohort_definition_id, age_group, sex [12] #>    cohort_definition_id age_group sex    days_prior_history     n #>                   <int> <chr>     <chr>               <dbl> <int> #>  1                    1 0;40      Male                    0    19 #>  2                    2 0;40      Male                  365    14 #>  3                    3 0;40      Female                  0    31 #>  4                    4 0;40      Female                365    16 #>  5                    5 0;40      Both                    0    50 #>  6                    6 0;40      Both                  365    30 #>  7                    7 41;100    Male                    0    31 #>  8                    8 41;100    Male                  365    13 #>  9                    9 41;100    Female                  0    25 #> 10                   10 41;100    Female                365    14 #> 11                   11 41;100    Both                    0    56 #> 12                   12 41;100    Both                  365    27  dpop %>%   filter(subject_id %in% c(\"1\", \"3\", \"57\", \"353\", \"393\", \"496\")) %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id)) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   facet_grid(sex + days_prior_history ~ ., space = \"free_y\") +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_bw() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"output","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Output","title":"Creating denominator cohorts","text":"generateDenominatorCohortSet() generate table denominator population, includes information individuals fulfill given criteria point study period. also includes information specific start end dates individuals contributed denominator population (cohort_start_date cohort_end_date). patient recorded different row. databases allow individuals multiple non-overlapping observation periods, one row patient observation period considered. Considering following example, can see: output table several attributes. settings() can see options used defining set denominator populations. one age, sex prior history requirements can specified time combination variables result different cohort, corresponding cohort_definition_id. example, identified 8 different cohorts: cohortCount() can see number individuals entered study cohort attrition() can see number individuals database excluded entering given denominator population along reason (missing crucial information satisfying sex age criteria required, among others):","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2010-01-01\"),   ageGroup = list(     c(0, 18),     c(19, 100)   ),   sex = c(\"Male\", \"Female\"),   daysPriorHistory = c(0, 365) )  head(cdm$denominator, 8) #> # Source:   SQL [8 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 203        2008-01-01        2009-03-28      #> 2                    1 303        2008-07-15        2009-05-14      #> 3                    1 409        2008-01-01        2008-07-28      #> 4                    1 462        2008-01-01        2008-02-20      #> 5                    1 3          2008-04-30        2008-09-19      #> 6                    2 203        2008-01-01        2009-03-28      #> 7                    2 409        2008-06-16        2008-07-28      #> 8                    2 462        2008-01-01        2008-02-20 settings(cdm$denominator) #> # A tibble: 8 × 8 #>   cohort_definitio…¹ age_g…² sex   days_…³ start_date end_date   strat…⁴ strat…⁵ #>                <int> <chr>   <chr>   <dbl> <date>     <date>     <lgl>   <lgl>   #> 1                  1 0;18    Male        0 2008-01-01 2010-01-01 NA      NA      #> 2                  2 0;18    Male      365 2008-01-01 2010-01-01 NA      NA      #> 3                  3 0;18    Fema…       0 2008-01-01 2010-01-01 NA      NA      #> 4                  4 0;18    Fema…     365 2008-01-01 2010-01-01 NA      NA      #> 5                  5 19;100  Male        0 2008-01-01 2010-01-01 NA      NA      #> 6                  6 19;100  Male      365 2008-01-01 2010-01-01 NA      NA      #> 7                  7 19;100  Fema…       0 2008-01-01 2010-01-01 NA      NA      #> 8                  8 19;100  Fema…     365 2008-01-01 2010-01-01 NA      NA      #> # … with abbreviated variable names ¹​cohort_definition_id, ²​age_group, #> #   ³​days_prior_history, ⁴​strata_cohort_definition_id, ⁵​strata_cohort_name cohortCount(cdm$denominator) #> # A tibble: 8 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1     5 #> 2                    2     3 #> 3                    3    13 #> 4                    4     7 #> 5                    5    45 #> 6                    6    24 #> 7                    7    43 #> 8                    8    23 attrition(cdm$denominator) #> # A tibble: 72 × 5 #>    current_n reason                                        exclu…¹ cohor…² step  #>        <dbl> <glue>                                          <dbl>   <int> <chr> #>  1       500 Starting population                                NA       1 Gene… #>  2       500 Missing year of birth                               0       1 Gene… #>  3       500 Missing sex                                         0       1 Gene… #>  4       500 Cannot satisfy age criteria during the study…       0       1 Gene… #>  5       106 No observation time available during study p…     394       1 Gene… #>  6       106 Doesn't satisfy age criteria during the stud…       0       1 Gene… #>  7       106 Prior history requirement not fulfilled duri…       0       1 Gene… #>  8        50 Not Male                                           56       1 Gene… #>  9         5 No observation time available after applying…      45       1 Gene… #> 10       500 Starting population                                NA       2 Gene… #> # … with 62 more rows, and abbreviated variable names ¹​excluded, #> #   ²​cohort_definition_id"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"using-generatedenominatorcohortset-with-a-cohort","dir":"Articles","previous_headings":"","what":"Using generateDenominatorCohortSet() with a cohort","title":"Creating denominator cohorts","text":"generateDenominatorCohortSet() function can also run subset population particular characteristic recorded database, time-invariant (e.g. ethnicity), time-varying (e.g. taking certain medication). using generateDenominatorCohortSet(), stratifying cohort must format OMOP CDM cohort. provide example use, let´s generate 5 example patients. generate simulated strata table 5 individuals 3 different cohort stratas illustrate following examples. can get denominator population without including particular subset like specify study start end date, cohort start end date 5 patients correspond registered observation period. Let’s suppose want subset population based non-time varying characteristic ethnicity, corresponds strataCohortId “1” simulated strata table. obtained 3 patients particular ethnicity interested . Moreover, ethnicity change study period, cohort start end date correspond dates observation period. Therefore, obtained denominator population cohort one observed first example limited individuals characteristic interest. Now say want subset population based time varying characteristic particular condition (strataCohortId “2” simulated strata table). obtained denominator population 3 individuals experienced event observation period. case, cohort start end dates correspond cohort start end date strata table, observation period. Therefore, individuals contribute time experiencing particular condition. Depending condition ’re interested , people might experience condition multiple times. Let’s use strataCohortId “3” illustrate example. can see person “3” “5” experienced condition two different occasions. Therefore, contribute time denominator population time periods condition. , cohort start end date correspond start end date condition. examples, study period can restricted particular period interest. Similarly, age sex stratification prior history requirements can applied. case used strata , restricted analysis females limited study period. can see, using period time don’t capture patient “2” (man) observe one time period individuals “3” “5” (multiple contributing time periods prior example).","code":"personTable <- tibble(   person_id = c(\"1\", \"2\", \"3\", \"4\", \"5\"),   gender_concept_id = c(rep(\"8507\", 2), rep(\"8532\", 3)),   year_of_birth = 2000,   month_of_birth = 06,   day_of_birth = 01 ) observationPeriodTable <- tibble(   observation_period_id = \"1\",   person_id = c(\"1\", \"2\", \"3\", \"4\", \"5\"),   observation_period_start_date = c(     as.Date(\"2010-12-19\"),     as.Date(\"2005-04-01\"),     as.Date(\"2009-04-10\"),     as.Date(\"2010-08-20\"),     as.Date(\"2010-01-01\")   ),   observation_period_end_date = c(     as.Date(\"2011-06-19\"),     as.Date(\"2005-11-29\"),     as.Date(\"2016-01-02\"),     as.Date(\"2011-12-11\"),     as.Date(\"2015-06-01\")   ) ) conditionX <- tibble(   cohort_definition_id = c(rep(\"1\", 3), rep(\"2\", 3), rep(\"3\", 5)),   subject_id = c(\"1\", \"2\", \"4\", \"3\", \"5\", \"2\", \"3\", \"3\", \"5\", \"5\", \"2\"),   cohort_start_date = c(     as.Date(\"2010-12-19\"),     as.Date(\"2005-04-01\"),     as.Date(\"2010-08-20\"),     as.Date(\"2012-01-01\"),     as.Date(\"2010-06-01\"),     as.Date(\"2005-08-20\"),     as.Date(\"2012-01-01\"),     as.Date(\"2015-06-01\"),     as.Date(\"2014-10-01\"),     as.Date(\"2010-06-01\"),     as.Date(\"2005-08-20\")   ),   cohort_end_date = c(     as.Date(\"2011-06-19\"),     as.Date(\"2005-11-29\"),     as.Date(\"2011-12-11\"),     as.Date(\"2013-01-01\"),     as.Date(\"2012-03-01\"),     as.Date(\"2005-11-29\"),     as.Date(\"2013-01-01\"),     as.Date(\"2015-12-31\"),     as.Date(\"2015-04-01\"),     as.Date(\"2010-06-01\"),     as.Date(\"2005-08-20\")   ) )  # mock database cdm <- mockIncidencePrevalenceRef(   personTable = personTable,   observationPeriodTable = observationPeriodTable,   strataTable = conditionX ) cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm ) cdm$denominator #> # Source:   table<dbplyr_074> [5 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 2          2005-04-01        2005-11-29      #> 2                    1 3          2009-04-10        2016-01-02      #> 3                    1 4          2010-08-20        2011-12-11      #> 4                    1 5          2010-01-01        2015-06-01      #> 5                    1 1          2010-12-19        2011-06-19 observationPeriodTable #> # A tibble: 5 × 4 #>   observation_period_id person_id observation_period_start_date observation_pe…¹ #>   <chr>                 <chr>     <date>                        <date>           #> 1 1                     1         2010-12-19                    2011-06-19       #> 2 1                     2         2005-04-01                    2005-11-29       #> 3 1                     3         2009-04-10                    2016-01-02       #> 4 1                     4         2010-08-20                    2011-12-11       #> 5 1                     5         2010-01-01                    2015-06-01       #> # … with abbreviated variable name ¹​observation_period_end_date cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   strataTable = \"strata\",   strataCohortId = 1,   strataCohortName = \"strata_cohort_1\" ) cdm$denominator #> # Source:   table<dbplyr_084> [3 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 2          2005-04-01        2005-11-29      #> 2                    1 4          2010-08-20        2011-12-11      #> 3                    1 1          2010-12-19        2011-06-19 library(dplyr) observationPeriodTable %>%   filter(person_id %in% c(\"1\", \"2\", \"4\")) #> # A tibble: 3 × 4 #>   observation_period_id person_id observation_period_start_date observation_pe…¹ #>   <chr>                 <chr>     <date>                        <date>           #> 1 1                     1         2010-12-19                    2011-06-19       #> 2 1                     2         2005-04-01                    2005-11-29       #> 3 1                     4         2010-08-20                    2011-12-11       #> # … with abbreviated variable name ¹​observation_period_end_date cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   strataTable = \"strata\",   strataCohortId = 2,   strataCohortName = \"strata_cohort_2\" ) cdm$denominator #> # Source:   table<dbplyr_094> [3 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 3          2012-01-01        2013-01-01      #> 2                    1 5          2010-06-01        2012-03-01      #> 3                    1 2          2005-08-20        2005-11-29 conditionX %>%   filter(cohort_definition_id == 2) %>%   filter(subject_id %in% c(\"2\", \"3\", \"5\")) #> # A tibble: 3 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>   <chr>                <chr>      <date>            <date>          #> 1 2                    3          2012-01-01        2013-01-01      #> 2 2                    5          2010-06-01        2012-03-01      #> 3 2                    2          2005-08-20        2005-11-29 cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   strataTable = \"strata\",   strataCohortId = 3,   strataCohortName = \"strata_cohort_2\" ) cdm$denominator #> # Source:   table<dbplyr_104> [5 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 3          2015-06-01        2015-12-31      #> 2                    1 5          2010-06-01        2010-06-01      #> 3                    1 2          2005-08-20        2005-08-20      #> 4                    1 3          2012-01-01        2013-01-01      #> 5                    1 5          2014-10-01        2015-04-01 conditionX %>%   filter(cohort_definition_id == 3) %>%   filter(subject_id %in% c(\"2\", \"3\", \"5\")) #> # A tibble: 5 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>   <chr>                <chr>      <date>            <date>          #> 1 3                    3          2012-01-01        2013-01-01      #> 2 3                    3          2015-06-01        2015-12-31      #> 3 3                    5          2014-10-01        2015-04-01      #> 4 3                    5          2010-06-01        2010-06-01      #> 5 3                    2          2005-08-20        2005-08-20 cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   strataTable = \"strata\",   strataCohortId = 3,   startDate = as.Date(\"2014-01-01\"),   endDate = as.Date(\"2016-01-01\"),   ageGroup = list(c(0, 150)),   sex = \"Female\",   daysPriorHistory = 0 ) cdm$denominator #> # Source:   table<dbplyr_114> [2 x 4] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 3          2015-06-01        2015-12-31      #> 2                    1 5          2014-10-01        2015-04-01 settings(cdm$denominator) #> # A tibble: 1 × 8 #>   cohort_definitio…¹ age_g…² sex   days_…³ start_date end_date   strat…⁴ strat…⁵ #>                <int> <chr>   <chr>   <dbl> <date>     <date>       <dbl> <lgl>   #> 1                  1 0;150   Fema…       0 2014-01-01 2016-01-01       3 NA      #> # … with abbreviated variable names ¹​cohort_definition_id, ²​age_group, #> #   ³​days_prior_history, ⁴​strata_cohort_definition_id, ⁵​strata_cohort_name"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a03_Creating_outcome_cohorts.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Creating outcome cohorts","text":"functions estimatePointPrevalence(), estimatePeriodPrevalence(), estimateIncidence() calculate incidence prevalence rates set outcome cohorts set denominator cohorts. denominator cohorts can created using generateDenominatorCohortSet() package, set outcome cohorts used defined externally. provide general instructions defining outcome cohorts adding cdm reference.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a03_Creating_outcome_cohorts.html","id":"adding-an-outcome-cohort-based-on-a-json-definition","dir":"Articles","previous_headings":"","what":"Adding an outcome cohort based on a JSON definition","title":"Creating outcome cohorts","text":"OMOP CDM cohort definitions can represented JSON. JSON definition created using tools ATLAS (https://github.com/OHDSI/Atlas) capR (https://github.com/OHDSI/Capr). define outcome cohorts depend research question, need consider several aspects event persistence restrictions number events occurring per person. general outcome definitions include occurrences outcome individual´s history without restriction, requirements prior history can incorporated using generateDenominatorCohortSet() can criteria diagnoses conditions medication use (using strata cohort option). addition, kept mind approach defining cohort exit can impact results incidence prevalence rates. incidence rates, can decide whether want restrict analysis first events want include events occur per person. want consider multiple events per person, duration events importance, going capture subsequent events prior events yet concluded. addition, outcome washouts implemented relative cohort exit previous event. Event persistence also influence results generated estimatePointPrevalence() estimatePeriodPrevalence() number individuals included numerator given moment period time differ depending outcome cohort exit strategy defined. set cohort definitions expressed JSONs (saved folder called “outcome_cohorts”), can add cohorts existing cdm reference table called “outcome_table” like :","code":"outcome_cohorts <- CDMConnector::readCohortSet(here::here(\"outcome_cohorts\")) cdm <- CDMConnector::generateCohortSet(cdm,                                        outcome_cohorts,                                        cohortTableName = outcome_table)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a03_Creating_outcome_cohorts.html","id":"creating-outcome-cohorts-with-bespoke-code","dir":"Articles","previous_headings":"Adding an outcome cohort based on a JSON definition","what":"Creating outcome cohorts with bespoke code","title":"Creating outcome cohorts","text":"long table created format OMOP CDM cohort table, outcome cohort also defined via bespoke code. beyond scope vignette describe ways custom code written define outcome, suffice say defining JSON cohort expression outcome cohort created reflect study question hand. Similar considerations apply defining outcome entry events, appropriate cohort exit criteria, .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Calculating prevalence","text":"Prevalence total number people ongoing health-related event, medical condition medication use, particular time given period divided population risk. previous vignettes seen can identify denominator population define instantiate outcome cohort. Prevalence can calculated describe proportion people denominator population outcome cohort specified time point (point prevalence) given time interval (period prevalence). first plot , can can see time t+2 2 5 people outcome cohort, giving point prevalence 40%. second figure, period prevalence t+2 t+3 also 40%. However period prevalence t t+1, people contributed time period? included ´ll period prevalence 20%, whereas require everyone observed full period contribute ´ll period prevalence 33%.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"outcome-definition","dir":"Articles","previous_headings":"","what":"Outcome definition","title":"Calculating prevalence","text":"General information define outcome cohorts can found vignette “Creating outcome cohorts”. important recommendations defining outcome cohort calculating incidence : Decide whether restrict events first occurrence Set appropriate cohort exit strategy add restrictions sex, age prior history requirements. Theses can specified identifying denominator cohort using generateDenominatorCohortSet(). Adequate use first two features need reflect nature proposed outcome (e.g., whether acute chronic condition) research question investigated.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimatepointprevalence-and-estimateperiodprevalence","dir":"Articles","previous_headings":"","what":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","title":"Calculating prevalence","text":"estimatePointPrevalence() estimatePeriodPrevalence() functions use estimate prevalence. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 50,000 example patients using mockIncidencePrevalenceRef() function, ´ll create denominator population without adding restrictions study period.","code":"library(IncidencePrevalence) library(dplyr) library(tidyr) library(ggplot2)  cdm <- mockIncidencePrevalenceRef(   sampleSize = 50000,   outPre = 0.5 )  cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2012-01-01\"),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 0 )  cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"2\", \"4\", \"6\", \"8\", \"12\", \"13\", \"21\", \"22\", \"24\",… #> $ cohort_start_date    <date> 2008-01-01, 2011-04-26, 2011-10-13, 2008-01-01, … #> $ cohort_end_date      <date> 2008-08-03, 2011-07-16, 2012-01-01, 2008-04-12, …"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimatepointprevalence","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Using estimatePointPrevalence()","title":"Calculating prevalence","text":"Let´s first calculate point prevalence yearly basis.  can also calculate point prevalence calendar month.  using estimatePointPrevalence() function, can specify compute point prevalence time interval (start, middle, end). default, parameter set start. can use middle instead like :","code":"prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 5 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01, … #> $ prevalence_end_date   <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01,… #> $ n_cases               <int> 26, 36, 39, 29, 31 #> $ n_population          <int> 4442, 4646, 4655, 4664, 4667 #> $ prevalence            <dbl> 0.005853219, 0.007748601, 0.008378088, 0.006217… #> $ prevalence_95CI_lower <dbl> 0.003997601, 0.005602378, 0.006134944, 0.0043328… #> $ prevalence_95CI_upper <dbl> 0.008562779, 0.010708169, 0.011431969, 0.0089155… #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal() prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 49 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ prevalence_start_date <date> 2008-01-01, 2008-02-01, 2008-03-01, 2008-04-01,… #> $ prevalence_end_date   <date> 2008-01-01, 2008-02-01, 2008-03-01, 2008-04-01,… #> $ n_cases               <int> 26, 22, 37, 32, 26, 31, 31, 30, 32, 31, 22, 27, … #> $ n_population          <int> 4442, 4450, 4459, 4486, 4495, 4543, 4555, 4559, … #> $ prevalence            <dbl> 0.005853219, 0.004943820, 0.008297825, 0.0071333… #> $ prevalence_95CI_lower <dbl> 0.003997601, 0.003267167, 0.006026191, 0.0050575… #> $ prevalence_95CI_upper <dbl> 0.008562779, 0.007474450, 0.011415938, 0.0100524… #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA…  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal() prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   timePoint = \"middle\",   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 4 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date <date> 2008-07-01, 2009-07-01, 2010-07-01, 2011-07-01 #> $ prevalence_end_date   <date> 2008-07-01, 2009-07-01, 2010-07-01, 2011-07-01 #> $ n_cases               <int> 31, 35, 41, 26 #> $ n_population          <int> 4555, 4573, 4752, 4716 #> $ prevalence            <dbl> 0.006805708, 0.007653619, 0.008627946, 0.0055131… #> $ prevalence_95CI_lower <dbl> 0.004798807, 0.005508445, 0.006366557, 0.003765… #> $ prevalence_95CI_upper <dbl> 0.009643779, 0.010625271, 0.011683132, 0.008066… #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +    theme_minimal()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimateperiodprevalence","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Using estimatePeriodPrevalence()","title":"Calculating prevalence","text":"calculate period prevalence year (.e. period calendar year)  calculate period prevalence month (.e. period calendar month)  using estimatePeriodPrevalence() function, can set fullContribution parameter decide whether individuals required present database throughout interval interest order included (fullContribution=TRUE). , individuals required present one day interval contribute (fullContribution=FALSE), specified like :","code":"prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 4 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01 #> $ prevalence_end_date   <date> 2008-12-31, 2009-12-31, 2010-12-31, 2011-12-31 #> $ n_cases               <int> 1696, 1739, 1715, 1734 #> $ n_population          <int> 7926, 7953, 8060, 8016 #> $ prevalence            <dbl> 0.2139793, 0.2186596, 0.2127792, 0.2163174 #> $ prevalence_95CI_lower <dbl> 0.2050903, 0.2097124, 0.2039821, 0.2074411 #> $ prevalence_95CI_upper <dbl> 0.2231454, 0.2278785, 0.2218499, 0.2254654 #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal() prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 48 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ prevalence_start_date <date> 2008-01-01, 2008-02-01, 2008-03-01, 2008-04-01,… #> $ prevalence_end_date   <date> 2008-01-31, 2008-02-29, 2008-03-31, 2008-04-30,… #> $ n_cases               <int> 154, 147, 167, 181, 178, 152, 163, 193, 153, 163… #> $ n_population          <int> 4733, 4706, 4761, 4759, 4797, 4822, 4840, 4859, … #> $ prevalence            <dbl> 0.03253750, 0.03123672, 0.03507666, 0.03803320, … #> $ prevalence_95CI_lower <dbl> 0.02784982, 0.02663631, 0.03021435, 0.03296083, … #> $ prevalence_95CI_upper <dbl> 0.03798338, 0.03660180, 0.04068863, 0.04385077, … #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA…  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal() prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   fullContribution = FALSE,   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 48 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ prevalence_start_date <date> 2008-01-01, 2008-02-01, 2008-03-01, 2008-04-01,… #> $ prevalence_end_date   <date> 2008-01-31, 2008-02-29, 2008-03-31, 2008-04-30,… #> $ n_cases               <int> 154, 147, 167, 181, 178, 152, 163, 193, 153, 163… #> $ n_population          <int> 4733, 4706, 4761, 4759, 4797, 4822, 4840, 4859, … #> $ prevalence            <dbl> 0.03253750, 0.03123672, 0.03507666, 0.03803320, … #> $ prevalence_95CI_lower <dbl> 0.02784982, 0.02663631, 0.03021435, 0.03296083, … #> $ prevalence_95CI_upper <dbl> 0.03798338, 0.03660180, 0.04068863, 0.04385077, … #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA…  prev %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"other-parameters","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Other parameters","title":"Calculating prevalence","text":"functions, can also specify look-back window consider outcome prevalent ongoing previous amount days relative current time point/ period. NULL, prior outcome considered prevalent. 0, ongoing outcomes considered prevalent. can useful option , example, outcome cohorts simply included people day relevant code seen prevalence based prior time window (e.g. including outcomes prevalent seen last 30 days).  examples , used calculated prevalence months years, can also calculated weeks, months entire time period observed (overall). addition, user can decide whether include time intervals fully captured database (e.g., data June last study year computing period prevalence rates). default, incidence estimated intervals database captures interval (completeDatabaseIntervals=TRUE). Given can set estimtePointPrevalence() estimtePeriorPrevalence() exclude individuals based certain parameters (e.g., fullContribution), important note denominator population used compute prevalence rates might differ one calculated generateDenominatorCohortSet(). user can also set minimum number events reported, results obscured. default, results <5 occurrences blinded, minCellCount=0, results reported. 95 % confidence intervals calculated using Wilson Score method. addition, can set verbose=TRUE report progress code running. default, progress reported (verbose=FALSE).","code":"prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   outcomeLookbackDays = c(0, 30),   minCellCount = 0 )  prev %>%   glimpse() #> Rows: 10 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"2\", \"2\" #> $ prevalence_start_date <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01, … #> $ prevalence_end_date   <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01,… #> $ n_cases               <int> 26, 36, 39, 29, 31, 136, 145, 167, 147, 151 #> $ n_population          <int> 4442, 4646, 4655, 4664, 4667, 4442, 4646, 4655,… #> $ prevalence            <dbl> 0.005853219, 0.007748601, 0.008378088, 0.0062178… #> $ prevalence_95CI_lower <dbl> 0.003997601, 0.005602378, 0.006134944, 0.0043328… #> $ prevalence_95CI_upper <dbl> 0.008562779, 0.010708169, 0.011431969, 0.0089155… #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA…  prev %>%   left_join(attributes(prev)$settings) %>%   mutate(analysis_outcome_lookback_days = as.character(analysis_outcome_lookback_days)) %>%   ggplot(aes(x = prevalence_start_date, y = prevalence,              ymin = prevalence_95CI_lower,              ymax = prevalence_95CI_upper,              colour = analysis_outcome_lookback_days)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(     labels = scales::percent,     limits = c(0, NA)   ) +   theme_minimal()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"output","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Output","title":"Calculating prevalence","text":"estimtePointPrevalence() estimtePeriorPrevalence() generate table point period prevalence rates time intervals studied combination parameters set, respectively. Similar output obtained generateDenominatorCohortSet(), table generated also include attributes, including tibbles information settings attrition. addition, set returnParticipants TRUE , can identify individuals contributed prevalence rate analysis using `participants(), along start end date contribution. can find median year cohort entry people contributing analysis 1 example ","code":"prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   fullContribution = c(TRUE, FALSE),   minCellCount = 0,    returnParticipants = TRUE ) settings(prev) #> # A tibble: 2 × 18 #>   analysis_id outcome_…¹ outco…² analy…³ analy…⁴ analy…⁵ analy…⁶ analy…⁷ analy…⁸ #>   <chr>       <chr>      <lgl>     <dbl> <chr>   <chr>   <lgl>   <chr>   <lgl>   #> 1 1           1          NA            0 period  years   TRUE    start   TRUE    #> 2 2           1          NA            0 period  years   TRUE    start   FALSE   #> # … with 9 more variables: analysis_min_cell_count <dbl>, #> #   denominator_cohort_id <int>, denominator_age_group <chr>, #> #   denominator_sex <chr>, denominator_days_prior_history <dbl>, #> #   denominator_start_date <date>, denominator_end_date <date>, #> #   denominator_strata_cohort_definition_id <lgl>, #> #   denominator_strata_cohort_name <lgl>, and abbreviated variable names #> #   ¹​outcome_cohort_id, ²​outcome_cohort_name, … attrition(prev) #> # A tibble: 22 × 5 #>    current_n reason                                        exclu…¹ step  analy…² #>        <dbl> <glue>                                          <dbl> <chr> <chr>   #>  1     50000 Starting population                                NA Gene… 1       #>  2     50000 Missing year of birth                               0 Gene… 1       #>  3     50000 Missing sex                                         0 Gene… 1       #>  4     50000 Cannot satisfy age criteria during the study…       0 Gene… 1       #>  5     18018 No observation time available during study p…   31982 Gene… 1       #>  6     18018 Doesn't satisfy age criteria during the stud…       0 Gene… 1       #>  7     18018 Prior history requirement not fulfilled duri…       0 Gene… 1       #>  8     18018 No observation time available after applying…       0 Gene… 1       #>  9     18018 Starting analysis population                       NA Esti… 1       #> 10     18014 Not observed during the complete database in…       4 Esti… 1       #> # … with 12 more rows, and abbreviated variable names ¹​excluded, ²​analysis_id participants(prev) #> $study_population_analyis_1 #> # Source:   SQL [?? x 6] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    analysis_id subject_id cohort_start_date cohort_end_d…¹ outcome_…² outcome_…³ #>    <chr>       <chr>      <date>            <date>         <date>     <date>     #>  1 1           24         2010-10-31        2012-01-01     2011-11-29 2011-12-05 #>  2 1           30         2009-09-16        2011-06-24     2010-04-01 2010-04-07 #>  3 1           145        2008-12-26        2010-05-16     2010-04-01 2010-04-07 #>  4 1           184        2008-11-04        2010-04-16     2008-12-09 2008-12-15 #>  5 1           263        2008-06-25        2010-04-01     2008-08-21 2008-08-27 #>  6 1           271        2008-01-01        2010-03-27     2008-10-16 2008-10-22 #>  7 1           272        2009-05-28        2011-06-09     2009-08-23 2009-08-29 #>  8 1           298        2009-08-05        2012-01-01     2010-11-30 2010-12-06 #>  9 1           335        2008-09-30        2011-02-15     2010-07-10 2010-07-16 #> 10 1           342        2008-11-28        2011-05-25     2010-11-22 2010-11-28 #> # … with more rows, and abbreviated variable names ¹​cohort_end_date, #> #   ²​outcome_start_date, ³​outcome_end_date #>  #> $study_population_analyis_2 #> # Source:   SQL [?? x 6] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    analysis_id subject_id cohort_start_date cohort_end_d…¹ outcome_…² outcome_…³ #>    <chr>       <chr>      <date>            <date>         <date>     <date>     #>  1 2           2          2008-01-01        2008-08-03     2008-04-18 2008-04-24 #>  2 2           8          2008-01-01        2008-04-12     2007-08-25 2007-08-31 #>  3 2           21         2011-06-06        2012-01-01     2013-01-12 2013-01-18 #>  4 2           24         2010-10-31        2012-01-01     2011-11-29 2011-12-05 #>  5 2           30         2009-09-16        2011-06-24     2010-04-01 2010-04-07 #>  6 2           34         2008-01-01        2008-12-19     2008-11-09 2008-11-15 #>  7 2           35         2010-06-21        2010-06-30     2010-06-29 2010-07-05 #>  8 2           46         2008-01-01        2008-05-05     2006-12-25 2006-12-31 #>  9 2           80         2010-11-11        2010-11-12     2010-11-12 2010-11-18 #> 10 2           89         2011-01-10        2012-01-01     2011-03-14 2011-03-20 #> # … with more rows, and abbreviated variable names ¹​cohort_end_date, #> #   ²​outcome_start_date, ³​outcome_end_date participants(prev, analysisId = 1) %>%   summarise(median_start = median(year(cohort_start_date))) #> # Source:   SQL [1 x 1] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   median_start #>          <dbl> #> 1         2008"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Calculating incidence","text":"Incidence rates describe rate new events occur population, denominator person-time risk event period. previous vignettes seen can identify set denominator outcome cohorts. Incidence rates can calculated using time contributed denominator cohorts entry outcome cohort. number options consider calculating incidence rates. package accommodates two main parameters, including: Outcome washout: number days used ‘washout’ period end one outcome ending individual starting contribute time risk . Repeated events: Whether individuals able contribute multiple events study period contribute time first event study period.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"no-washout-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"No washout, no repetitive events","title":"Calculating incidence","text":"example outcome washout specified repetitive events allowed, individuals contribute time first event study period.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"washout-all-history-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Washout all history, no repetitive events","title":"Calculating incidence","text":"example outcome washout history repetitive events allowed. individuals contribute time first event study period, outcome prior study period (person “3”) means time risk contributed.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"some-washout-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Some washout, no repetitive events","title":"Calculating incidence","text":"example amount outcome washout repetitive events allowed. individuals contribute time first event study period, outcome prior study period (person “3”) means time risk contributed sufficient time passed outcome washout criteria satisfied.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"some-washout-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Some washout, repetitive events","title":"Calculating incidence","text":"Now repetitive events allowed amount outcome washout specified. individuals contribute time first event study period, passing outcome washout requirement begin contribute time risk .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"outcome-definition","dir":"Articles","previous_headings":"","what":"Outcome definition","title":"Calculating incidence","text":"General information define outcome cohorts can found vignette “Creating outcome cohorts”. important recommendations defining outcome cohort calculating incidence : restrict outcome cohorts first events . impact ability exclude participants (can excluded based prior latest event) capture one event per person (option allowed package). Set appropriate cohort exit strategy. want able capture one event per person, important set event persistence fixed duration relative event end observation. add restrictions sex, age prior history requirements. can specified identifying denominator population generateDenominatorCohortSet() function. Considering , recommend restricting outcome definitions first events user interested occurrences prior history considered exclude participants already experienced event.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"using-estimateincidence","dir":"Articles","previous_headings":"","what":"Using estimateIncidence()","title":"Calculating incidence","text":"estimateIncidence() function use estimate incidence rates. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 50,000 example patients using mockIncidencePrevalenceRef() function, ´ll create denominator population without adding restrictions study period. Let´s first calculate incidence rates yearly basis, without allowing repetitive events  Now washout prior history still allowing repetitive events  Now ´ll set washout 180 days still allowing repetitive events  finally ´ll set washout 180 days allow repetitive events","code":"library(IncidencePrevalence) library(dplyr) library(tidyr) library(ggplot2)  cdm <- mockIncidencePrevalenceRef(   sampleSize = 50000,   outPre = 0.5 )  cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2012-01-01\"),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 0 )  cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"2\", \"4\", \"6\", \"8\", \"12\", \"13\", \"21\", \"22\", \"24\",… #> $ cohort_start_date    <date> 2008-01-01, 2011-04-26, 2011-10-13, 2008-01-01, … #> $ cohort_end_date      <date> 2008-08-03, 2011-07-16, 2012-01-01, 2008-04-12, … inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 0,   repeatedEvents = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 12 #> $ analysis_id                     <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                       <int> 7926, 7055, 6862, 6872 #> $ person_days                     <dbl> 1465281, 1285865, 1278246, 1289876 #> $ n_events                        <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date            <date> 2008-01-01, 2009-01-01, 2010-01-01, 20… #> $ incidence_end_date              <date> 2008-12-31, 2009-12-31, 2010-12-31, 20… #> $ person_years                    <dbl> 4011.721, 3520.507, 3499.647, 3531.488 #> $ incidence_100000_pys            <dbl> 41677.88, 48515.75, 48061.99, 48364.88 #> $ incidence_100000_pys_95CI_lower <dbl> 39703.87, 46241.92, 45792.30, 46098.13 #> $ incidence_100000_pys_95CI_upper <dbl> 43724.63, 50872.45, 50415.07, 50714.26 #> $ cohort_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  inc %>%   ggplot(aes(x = incidence_start_date, y = incidence_100000_pys,              ymin = incidence_100000_pys_95CI_lower,              ymax = incidence_100000_pys_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(limits = c(0, NA)) +   theme_minimal() inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = NULL,   repeatedEvents = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 12 #> $ analysis_id                     <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                       <int> 6832, 6822, 6850, 6872 #> $ person_days                     <dbl> 1261517, 1252799, 1277510, 1289876 #> $ n_events                        <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date            <date> 2008-01-01, 2009-01-01, 2010-01-01, 20… #> $ incidence_end_date              <date> 2008-12-31, 2009-12-31, 2010-12-31, 20… #> $ person_years                    <dbl> 3453.845, 3429.977, 3497.632, 3531.488 #> $ incidence_100000_pys            <dbl> 48409.81, 49796.26, 48089.68, 48364.88 #> $ incidence_100000_pys_95CI_lower <dbl> 46116.95, 47462.42, 45818.69, 46098.13 #> $ incidence_100000_pys_95CI_upper <dbl> 50787.16, 52215.16, 50444.11, 50714.26 #> $ cohort_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  inc %>%   ggplot(aes(x = incidence_start_date, y = incidence_100000_pys,              ymin = incidence_100000_pys_95CI_lower,              ymax = incidence_100000_pys_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(limits = c(0, NA)) +   theme_minimal() inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 180,   repeatedEvents = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 12 #> $ analysis_id                     <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                       <int> 7738, 7055, 6862, 6872 #> $ person_days                     <dbl> 1418998, 1285865, 1278246, 1289876 #> $ n_events                        <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date            <date> 2008-01-01, 2009-01-01, 2010-01-01, 20… #> $ incidence_end_date              <date> 2008-12-31, 2009-12-31, 2010-12-31, 20… #> $ person_years                    <dbl> 3885.005, 3520.507, 3499.647, 3531.488 #> $ incidence_100000_pys            <dbl> 43037.27, 48515.75, 48061.99, 48364.88 #> $ incidence_100000_pys_95CI_lower <dbl> 40998.87, 46241.92, 45792.30, 46098.13 #> $ incidence_100000_pys_95CI_upper <dbl> 45150.78, 50872.45, 50415.07, 50714.26 #> $ cohort_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  inc %>%   ggplot(aes(x = incidence_start_date, y = incidence_100000_pys,              ymin = incidence_100000_pys_95CI_lower,              ymax = incidence_100000_pys_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(limits = c(0, NA)) +   theme_minimal() inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 180,   repeatedEvents = TRUE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 12 #> $ analysis_id                     <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                       <int> 7738, 7790, 7875, 7850 #> $ person_days                     <dbl> 1448414, 1454027, 1487577, 1499038 #> $ n_events                        <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date            <date> 2008-01-01, 2009-01-01, 2010-01-01, 20… #> $ incidence_end_date              <date> 2008-12-31, 2009-12-31, 2010-12-31, 20… #> $ person_years                    <dbl> 3965.541, 3980.909, 4072.764, 4104.142 #> $ incidence_100000_pys            <dbl> 42163.22, 42904.77, 41298.74, 41616.49 #> $ incidence_100000_pys_95CI_lower <dbl> 40166.22, 40893.93, 39348.44, 39666.02 #> $ incidence_100000_pys_95CI_upper <dbl> 44233.81, 44988.92, 43320.69, 43638.06 #> $ cohort_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\" #> $ result_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\"  inc %>%   ggplot(aes(x = incidence_start_date, y = incidence_100000_pys,              ymin = incidence_100000_pys_95CI_lower,              ymax = incidence_100000_pys_95CI_upper)) +   geom_point() +   geom_errorbar(width = 0) +   scale_y_continuous(limits = c(0, NA)) +   theme_minimal()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"other-parameters","dir":"Articles","previous_headings":"Using estimateIncidence()","what":"Other parameters","title":"Calculating incidence","text":"examples , used calculated incidence rates months years, can also calculated weeks, months, quarters, entire study time period. addition, can decide whether include time intervals fully captured database (e.g., data June last study year computing yearly incidence rates). default, incidence estimated intervals database captures interval (completeDatabaseIntervals=TRUE). Given can set estimateIncidence() exclude individuals based parameters (e.g., outcomeWashout), important note denominator population used compute incidence rates might differ one calculated generateDenominatorCohortSet(). user can also set minimum number events reported, results obscured. default, results <5 occurrences blinded, minCellCount=0, results reported. 95 % confidence intervals calculated using exact method. can set verbose=TRUE report progress code running. default, progress reported (verbose=FALSE).","code":"inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = c(\"weeks\"),   completeDatabaseIntervals = FALSE,   outcomeWashout = 180,   repeatedEvents = TRUE,   minCellCount = 0,   verbose = TRUE ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 7 secs"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"output","dir":"Articles","previous_headings":"Using estimateIncidence()","what":"Output","title":"Calculating incidence","text":"estimateIncidence() generate table incidence rates time intervals studied combination parameters set. Similar output obtained generateDenominatorCohortSet(), table generated also associated attributes settings attrition. addition, set returnParticipants TRUE , can see individuals contributed given analysis using participants(). can used want perform analyses individuals (e.g. describing characteristics). can find median year cohort entry people contributing analysis 1 example ","code":"inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = c(\"Years\"),   outcomeWashout = c(0, 180),   repeatedEvents = TRUE,   returnParticipants = TRUE ) attrition(inc) #> # A tibble: 22 × 5 #>    current_n reason                                        exclu…¹ step  analy…² #>        <dbl> <glue>                                          <dbl> <chr> <chr>   #>  1     50000 Starting population                                NA Gene… 1       #>  2     50000 Missing year of birth                               0 Gene… 1       #>  3     50000 Missing sex                                         0 Gene… 1       #>  4     50000 Cannot satisfy age criteria during the study…       0 Gene… 1       #>  5     18018 No observation time available during study p…   31982 Gene… 1       #>  6     18018 Doesn't satisfy age criteria during the stud…       0 Gene… 1       #>  7     18018 Prior history requirement not fulfilled duri…       0 Gene… 1       #>  8     18018 No observation time available after applying…       0 Gene… 1       #>  9     18018 Starting analysis population                       NA Esti… 1       #> 10     18018 Excluded due to prior event (do not pass out…       0 Esti… 1       #> # … with 12 more rows, and abbreviated variable names ¹​excluded, ²​analysis_id settings(inc) #> # A tibble: 2 × 16 #>   analysis_id outcome_…¹ outco…² analy…³ analy…⁴ analy…⁵ analy…⁶ denom…⁷ analy…⁸ #>   <chr>       <chr>      <lgl>     <dbl> <lgl>   <chr>   <lgl>     <int>   <dbl> #> 1 1           1          NA            0 TRUE    years   TRUE          1       5 #> 2 2           1          NA          180 TRUE    years   TRUE          1       5 #> # … with 7 more variables: denominator_age_group <chr>, denominator_sex <chr>, #> #   denominator_days_prior_history <dbl>, denominator_start_date <date>, #> #   denominator_end_date <date>, denominator_strata_cohort_definition_id <lgl>, #> #   denominator_strata_cohort_name <lgl>, and abbreviated variable names #> #   ¹​outcome_cohort_id, ²​outcome_cohort_name, ³​analysis_outcome_washout, #> #   ⁴​analysis_repeated_events, ⁵​analysis_interval, #> #   ⁶​analysis_complete_database_intervals, ⁷​denominator_cohort_id, … participants(inc) #> $study_population_analyis_1 #> # Source:   SQL [?? x 6] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    analysis_id subject_id cohort_start_date cohort_end_d…¹ outcome_…² outcome_…³ #>    <chr>       <chr>      <date>            <date>         <date>     <date>     #>  1 1           6          2011-10-13        2012-01-01     NA         NA         #>  2 1           12         2008-01-01        2009-03-08     NA         NA         #>  3 1           13         2008-01-01        2009-12-29     NA         NA         #>  4 1           21         2011-06-06        2012-01-01     NA         NA         #>  5 1           22         2009-10-22        2012-01-01     NA         NA         #>  6 1           29         2010-10-14        2012-01-01     NA         NA         #>  7 1           40         2008-05-31        2009-05-08     NA         NA         #>  8 1           42         2011-12-12        2012-01-01     NA         NA         #>  9 1           57         2011-02-09        2012-01-01     NA         NA         #> 10 1           61         2009-07-04        2009-08-05     NA         NA         #> # … with more rows, and abbreviated variable names ¹​cohort_end_date, #> #   ²​outcome_start_date, ³​outcome_prev_end_date #>  #> $study_population_analyis_2 #> # Source:   SQL [?? x 6] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>    analysis_id subject_id cohort_start_date cohort_end_d…¹ outcome_…² outcome_…³ #>    <chr>       <chr>      <date>            <date>         <date>     <date>     #>  1 2           6          2011-10-13        2012-01-01     NA         NA         #>  2 2           12         2008-01-01        2009-03-08     NA         NA         #>  3 2           13         2008-01-01        2009-12-29     NA         NA         #>  4 2           21         2011-06-06        2012-01-01     NA         NA         #>  5 2           22         2009-10-22        2012-01-01     NA         NA         #>  6 2           29         2010-10-14        2012-01-01     NA         NA         #>  7 2           40         2008-05-31        2009-05-08     NA         NA         #>  8 2           42         2011-12-12        2012-01-01     NA         NA         #>  9 2           57         2011-02-09        2012-01-01     NA         NA         #> 10 2           61         2009-07-04        2009-08-05     NA         NA         #> # … with more rows, and abbreviated variable names ¹​cohort_end_date, #> #   ²​outcome_start_date, ³​outcome_prev_end_date participants(inc, analysisId = 1) %>%   summarise(median_start = median(year(cohort_start_date))) #> # Source:   SQL [1 x 1] #> # Database: DuckDB 0.6.2-dev1166 [unknown@Linux 5.15.0-1031-azure:R 4.2.2/:memory:] #>   median_start #>          <dbl> #> 1         2009"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Edward Burn. Author, maintainer. Berta Raventos. Author. Marti Catala. Author. Mike Du. Contributor. Yuchen Guo. Contributor. Adam Black. Contributor. Ger Inberg. Contributor. Kim Lopez. Contributor.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Burn E, Raventos B, Catala M (2023). IncidencePrevalence: Population Incidence Prevalence using OMOP Common Data Model. R package version 0.1.0, https://darwin-eu.github.io/IncidencePrevalence/.","code":"@Manual{,   title = {IncidencePrevalence: Population Incidence and Prevalence using the OMOP Common Data Model},   author = {Edward Burn and Berta Raventos and Marti Catala},   year = {2023},   note = {R package version 0.1.0},   url = {https://darwin-eu.github.io/IncidencePrevalence/}, }"},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"IncidencePrevalence contains functions estimating population-level incidence prevalence using OMOP common data model.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"package-installation","dir":"","previous_headings":"","what":"Package installation","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"can install latest version IncidencePrevalence like :","code":"install.packages(\"remotes\") remotes::install_github(\"darwin-eu/IncidencePrevalence\")"},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"create-a-reference-to-data-in-the-omop-cdm-format","dir":"","previous_headings":"Example usage","what":"Create a reference to data in the OMOP CDM format","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"IncidencePrevalence package designed work data OMOP CDM format, first step create reference data using CDMConnector package. Creating connection Postgres database example look like: see create reference database please consult CDMConnector package documentation. example though ´ll work simulated data, ’ll generate example cdm reference like :","code":"library(CDMConnector) library(IncidencePrevalence) con <- DBI::dbConnect(RPostgres::Postgres(),                       dbname = Sys.getenv(\"CDM5_POSTGRESQL_DBNAME\"),                       host = Sys.getenv(\"CDM5_POSTGRESQL_HOST\"),                       user = Sys.getenv(\"CDM5_POSTGRESQL_USER\"),                       password = Sys.getenv(\"CDM5_POSTGRESQL_PASSWORD\"))  cdm <- CDMConnector::cdm_from_con(con,                      cdm_schema = Sys.getenv(\"CDM5_POSTGRESQL_CDM_SCHEMA\"),                      write_schema = Sys.getenv(\"CDM5_POSTGRESQL_RESULT_SCHEMA\")) cdm<-mockIncidencePrevalenceRef(sampleSize=5000)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"identify-a-denominator-cohort","dir":"","previous_headings":"Example usage","what":"Identify a denominator cohort","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"identify set denominator cohorts can use generateDenominatorCohortSet function. want identify denominator populations study period 2008 2018 180 days prior history (observation time database). also wish consider multiple age groups (0 64, 65 100) multiple sex criteria (one cohort males, one females, one sexes included). give us six denominator cohorts cohorts typical OMOP CDM structure","code":"cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\"),   ageGroup = list(c(0,64),                   c(65,100)),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorHistory = 180 ) settings(cdm$denominator) #> # A tibble: 6 × 8 #>   cohort_definitio…¹ age_g…² sex   days_…³ start_date end_date   strat…⁴ strat…⁵ #>                <int> <chr>   <chr>   <dbl> <date>     <date>     <lgl>   <lgl>   #> 1                  1 0;64    Male      180 2008-01-01 2018-01-01 NA      NA      #> 2                  2 0;64    Fema…     180 2008-01-01 2018-01-01 NA      NA      #> 3                  3 0;64    Both      180 2008-01-01 2018-01-01 NA      NA      #> 4                  4 65;100  Male      180 2008-01-01 2018-01-01 NA      NA      #> 5                  5 65;100  Fema…     180 2008-01-01 2018-01-01 NA      NA      #> 6                  6 65;100  Both      180 2008-01-01 2018-01-01 NA      NA      #> # … with abbreviated variable names ¹​cohort_definition_id, ²​age_group, #> #   ³​days_prior_history, ⁴​strata_cohort_definition_id, ⁵​strata_cohort_name cdm$denominator #> # Source:   table<dbplyr_008> [?? x 4] #> # Database: DuckDB 0.6.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 14         2010-04-17        2010-11-27      #>  2                    1 15         2012-04-20        2012-08-08      #>  3                    1 17         2015-03-01        2015-10-06      #>  4                    1 25         2010-01-05        2010-02-11      #>  5                    1 26         2010-11-03        2012-07-07      #>  6                    1 30         2017-05-07        2017-10-30      #>  7                    1 31         2011-09-26        2012-09-02      #>  8                    1 42         2008-01-01        2008-02-18      #>  9                    1 55         2008-05-24        2009-05-02      #> 10                    1 56         2012-07-24        2013-11-02      #> # … with more rows"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"instantiate-an-outcome-cohort","dir":"","previous_headings":"Example usage","what":"Instantiate an outcome cohort","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"Outcome cohorts want estimate incidence prevalence need created. outcome cohorts defined JSON, can use CDMConnector package read generate cohorts. Note, example cdm reference already outcome cohort defined","code":"outcome_cohorts <- CDMConnector::readCohortSet(\"path_to_outcome_cohort_definitions\") cdm <- CDMConnector::generateCohortSet(cdm = cdm,                                         cohortSet = outcome_cohorts,                                        cohortTableName = \"outcome_table_name\"                                        ) cdm$outcome #> # Source:   table<main.outcome> [?? x 4] #> # Database: DuckDB 0.6.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>    <chr>                <chr>      <date>            <date>          #>  1 1                    1          2014-07-01        2014-07-09      #>  2 1                    2          2018-06-25        2018-07-03      #>  3 1                    3          2006-09-10        2006-09-18      #>  4 1                    4          2010-10-06        2010-10-14      #>  5 1                    5          2006-09-16        2006-09-24      #>  6 1                    6          2019-06-08        2019-06-16      #>  7 1                    7          2010-06-26        2010-07-04      #>  8 1                    8          2008-09-21        2008-09-29      #>  9 1                    9          2019-06-26        2019-07-04      #> 10 1                    10         2019-03-21        2019-03-29      #> # … with more rows"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"estimating-incidence-and-prevalence","dir":"","previous_headings":"Example usage","what":"Estimating incidence and prevalence","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"Now identified denominator population, can calculate incidence prevalence . example ´ll estimate incidence yearly basis, allowing individuals multiple events outcome washout 180 days. also require complete database intervals included, mean database must individuals observed throughout year year included analysis. Note, also specify minimum cell count 5, estimates obscured. also estimate point prevalence, start calendar year like : annual period prevalence require complete database intervals , addition, include people observed data full year:","code":"inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   repeatedEvents = TRUE,   outcomeWashout = 180,    completeDatabaseIntervals = TRUE,   minCellCount = 5   ) dplyr::glimpse(inc) #> Rows: 60 #> Columns: 12 #> $ analysis_id                     <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ n_persons                       <int> 194, 156, 174, 185, 192, 156, 165, 156… #> $ person_days                     <dbl> 29026, 21658, 23094, 30744, 27909, 234… #> $ n_events                        <int> 60, 62, 54, 62, 70, 51, 60, 53, 54, 40… #> $ incidence_start_date            <date> 2008-01-01, 2009-01-01, 2010-01-01, 2… #> $ incidence_end_date              <date> 2008-12-31, 2009-12-31, 2010-12-31, 2… #> $ person_years                    <dbl> 79.46886, 59.29637, 63.22793, 84.17248… #> $ incidence_100000_pys            <dbl> 75501.27, 104559.52, 85405.30, 73658.2… #> $ incidence_100000_pys_95CI_lower <dbl> 57615.43, 80165.18, 64159.09, 56473.38… #> $ incidence_100000_pys_95CI_upper <dbl> 97185.11, 134040.58, 111435.39, 94426.… #> $ cohort_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"F… #> $ result_obscured                 <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"F… prev_point <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   timePoint = \"start\",   minCellCount = 5 ) dplyr::glimpse(prev_point) #> Rows: 66 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ prevalence_start_date <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01,… #> $ prevalence_end_date   <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01,… #> $ n_cases               <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ n_population          <int> 125, 102, 84, 103, 122, 86, 97, 102, 87, 86, 83,… #> $ prevalence            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ prevalence_95CI_lower <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ prevalence_95CI_upper <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured       <chr> \"TRUE\", \"TRUE\", \"TRUE\", \"TRUE\", \"TRUE\", \"TRUE\", … prev_period <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   completeDatabaseIntervals = TRUE,    fullContribution = TRUE,   minCellCount = 5 ) dplyr::glimpse(prev_period) #> Rows: 60 #> Columns: 10 #> $ analysis_id           <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\"… #> $ prevalence_start_date <date> 2008-01-01, 2009-01-01, 2010-01-01, 2011-01-01,… #> $ prevalence_end_date   <date> 2008-12-31, 2009-12-31, 2010-12-31, 2011-12-31,… #> $ n_cases               <int> 11, 9, 8, NA, NA, NA, NA, NA, NA, NA, 14, 22, 22… #> $ n_population          <int> 33, 22, 20, NA, NA, NA, NA, NA, NA, NA, 33, 38, … #> $ prevalence            <dbl> 0.3333333, 0.4090909, 0.4000000, NA, NA, NA, NA,… #> $ prevalence_95CI_lower <dbl> 0.1975023, 0.2325582, 0.2188065, NA, NA, NA, NA,… #> $ prevalence_95CI_upper <dbl> 0.5039211, 0.6126518, 0.6134185, NA, NA, NA, NA,… #> $ cohort_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"TRUE\", \"TRUE\", \"TRUE… #> $ result_obscured       <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"TRUE\", \"TRUE\", \"TRUE…"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"combining-and-exporting-results","dir":"","previous_headings":"Example usage","what":"Combining and exporting results","title":"Population Incidence and Prevalence using the OMOP Common Data Model","text":"running different analyses can use gatherIncidencePrevalenceResults() bring together results, adding outcome names database name output. gathering results, can export CSVs zip folder using exportIncidencePrevalenceResults() function.","code":"study_results <- gatherIncidencePrevalenceResults(cdm=cdm,                     resultList=list(inc, prev_point, prev_period),                     databaseName = \"my_database\") dplyr::glimpse(study_results$incidence_estimates) #> Rows: 60 #> Columns: 28 #> $ analysis_id                             <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ n_persons                               <int> 194, 156, 174, 185, 192, 156, … #> $ person_days                             <dbl> 29026, 21658, 23094, 30744, 27… #> $ n_events                                <int> 60, 62, 54, 62, 70, 51, 60, 53… #> $ incidence_start_date                    <date> 2008-01-01, 2009-01-01, 2010-… #> $ incidence_end_date                      <date> 2008-12-31, 2009-12-31, 2010-… #> $ person_years                            <dbl> 79.46886, 59.29637, 63.22793, … #> $ incidence_100000_pys                    <dbl> 75501.27, 104559.52, 85405.30,… #> $ incidence_100000_pys_95CI_lower         <dbl> 57615.43, 80165.18, 64159.09, … #> $ incidence_100000_pys_95CI_upper         <dbl> 97185.11, 134040.58, 111435.39… #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ outcome_cohort_name                     <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ analysis_outcome_washout                <dbl> 180, 180, 180, 180, 180, 180, … #> $ analysis_repeated_events                <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, … #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, … #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, … #> $ denominator_age_group                   <chr> \"0;64\", \"0;64\", \"0;64\", \"0;64\"… #> $ denominator_sex                         <chr> \"Male\", \"Male\", \"Male\", \"Male\"… #> $ denominator_days_prior_history          <dbl> 180, 180, 180, 180, 180, 180, … #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-… #> $ denominator_end_date                    <date> 2018-01-01, 2018-01-01, 2018-… #> $ denominator_strata_cohort_definition_id <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ denominator_strata_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ database_name                           <chr> \"my_database\", \"my_database\", … dplyr::glimpse(study_results$prevalence_estimates) #> Rows: 126 #> Columns: 28 #> $ analysis_id                             <int> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, … #> $ prevalence_start_date                   <date> 2008-01-01, 2009-01-01, 2010-… #> $ prevalence_end_date                     <date> 2008-01-01, 2009-01-01, 2010-… #> $ n_cases                                 <int> NA, NA, NA, NA, NA, NA, NA, NA… #> $ n_population                            <int> 125, 102, 84, 103, 122, 86, 97… #> $ prevalence                              <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ prevalence_95CI_lower                   <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ prevalence_95CI_upper                   <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"TRUE\", \"TRUE\", \"TRUE\", \"TRUE\"… #> $ outcome_cohort_id                       <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ outcome_cohort_name                     <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ analysis_outcome_lookback_days          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ analysis_type                           <chr> \"point\", \"point\", \"point\", \"po… #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, … #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ denominator_age_group                   <chr> \"0;64\", \"0;64\", \"0;64\", \"0;64\"… #> $ denominator_sex                         <chr> \"Male\", \"Male\", \"Male\", \"Male\"… #> $ denominator_days_prior_history          <dbl> 180, 180, 180, 180, 180, 180, … #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-… #> $ denominator_end_date                    <date> 2018-01-01, 2018-01-01, 2018-… #> $ denominator_strata_cohort_definition_id <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ denominator_strata_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ database_name                           <chr> \"my_database\", \"my_database\", … exportIncidencePrevalenceResults(result=study_results,                    zipName=\"example_results\",                   outputFolder=here::here())"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/IncidencePrevalence-package.html","id":null,"dir":"Reference","previous_headings":"","what":"IncidencePrevalence: Population Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","title":"IncidencePrevalence: Population Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","text":"Calculate incidence prevalence using data mapped Observational Medical Outcomes Partnership (OMOP) common data model. Incidence prevalence can estimated total population database stratification cohort.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/IncidencePrevalence-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"IncidencePrevalence: Population Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","text":"Maintainer: Edward Burn edward.burn@ndorms.ox.ac.uk (ORCID) Authors: Berta Raventos braventos@idiapjgol.info (ORCID) Marti Catala marti.catalasabate@ndorms.ox.ac.uk (ORCID) contributors: Mike Du mike.du@ndorms.ox.ac.uk (ORCID) [contributor] Yuchen Guo yuchen.guo@ndorms.ox.ac.uk (ORCID) [contributor] Adam Black black@ohdsi.org (ORCID) [contributor] Ger Inberg g.inberg@erasmusmc.nl (ORCID) [contributor] Kim Lopez kim.lopez@spc.ox.ac.uk (ORCID) [contributor]","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/attrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Cohort attrition — attrition","title":"Cohort attrition — attrition","text":"Cohort attrition","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/attrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cohort attrition — attrition","text":"","code":"attrition(result, ...)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/attrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cohort attrition — attrition","text":"result Result get attrition ... Additional arguments. denominator cohort, cohortDefinitionId can used specify particular cohort interest. incidence prevalence analyses results, analysisId can used specify particular analysis interest.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/attrition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cohort attrition — attrition","text":"tibble counts reasons attrition.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/attrition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cohort attrition — attrition","text":"","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm$denominator <- generateDenominatorCohortSet(cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(18, 40)),   sex = c(\"Female\", \"Male\"),   daysPriorHistory = 120 ) attrition(result = cdm$denominator) #> # A tibble: 18 × 5 #>    current_n reason                                        exclu…¹ cohor…² step  #>        <dbl> <glue>                                          <dbl>   <int> <chr> #>  1       200 Starting population                                NA       1 Gene… #>  2       200 Missing year of birth                               0       1 Gene… #>  3       200 Missing sex                                         0       1 Gene… #>  4       101 Cannot satisfy age criteria during the study…      99       1 Gene… #>  5       101 No observation time available during study p…       0       1 Gene… #>  6       101 Doesn't satisfy age criteria during the stud…       0       1 Gene… #>  7        87 Prior history requirement not fulfilled duri…      14       1 Gene… #>  8        45 Not Female                                         42       1 Gene… #>  9        28 No observation time available after applying…      17       1 Gene… #> 10       200 Starting population                                NA       2 Gene… #> 11       200 Missing year of birth                               0       2 Gene… #> 12       200 Missing sex                                         0       2 Gene… #> 13       101 Cannot satisfy age criteria during the study…      99       2 Gene… #> 14       101 No observation time available during study p…       0       2 Gene… #> 15       101 Doesn't satisfy age criteria during the stud…       0       2 Gene… #> 16        87 Prior history requirement not fulfilled duri…      14       2 Gene… #> 17        42 Not Male                                           45       2 Gene… #> 18        22 No observation time available after applying…      20       2 Gene… #> # … with abbreviated variable names ¹​excluded, ²​cohort_definition_id attrition(result = cdm$denominator, cohortDefinitionId = 1) #> # A tibble: 9 × 5 #>   current_n reason                                         exclu…¹ cohor…² step  #>       <dbl> <glue>                                           <dbl>   <int> <chr> #> 1       200 Starting population                                 NA       1 Gene… #> 2       200 Missing year of birth                                0       1 Gene… #> 3       200 Missing sex                                          0       1 Gene… #> 4       101 Cannot satisfy age criteria during the study …      99       1 Gene… #> 5       101 No observation time available during study pe…       0       1 Gene… #> 6       101 Doesn't satisfy age criteria during the study…       0       1 Gene… #> 7        87 Prior history requirement not fulfilled durin…      14       1 Gene… #> 8        45 Not Female                                          42       1 Gene… #> 9        28 No observation time available after applying …      17       1 Gene… #> # … with abbreviated variable names ¹​excluded, ²​cohort_definition_id incidence <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) attrition(result = incidence) #> # A tibble: 24 × 5 #>    current_n reason                                        exclu…¹ step  analy…² #>        <dbl> <glue>                                          <dbl> <chr> <chr>   #>  1       200 Starting population                                NA Gene… 1       #>  2       200 Missing year of birth                               0 Gene… 1       #>  3       200 Missing sex                                         0 Gene… 1       #>  4       101 Cannot satisfy age criteria during the study…      99 Gene… 1       #>  5       101 No observation time available during study p…       0 Gene… 1       #>  6       101 Doesn't satisfy age criteria during the stud…       0 Gene… 1       #>  7        87 Prior history requirement not fulfilled duri…      14 Gene… 1       #>  8        45 Not Female                                         42 Gene… 1       #>  9        28 No observation time available after applying…      17 Gene… 1       #> 10        28 Starting analysis population                       NA Esti… 1       #> # … with 14 more rows, and abbreviated variable names ¹​excluded, ²​analysis_id attrition(result = incidence, analysisId = 1) #> # A tibble: 12 × 5 #>    current_n reason                                        exclu…¹ step  analy…² #>        <dbl> <glue>                                          <dbl> <chr> <chr>   #>  1       200 Starting population                                NA Gene… 1       #>  2       200 Missing year of birth                               0 Gene… 1       #>  3       200 Missing sex                                         0 Gene… 1       #>  4       101 Cannot satisfy age criteria during the study…      99 Gene… 1       #>  5       101 No observation time available during study p…       0 Gene… 1       #>  6       101 Doesn't satisfy age criteria during the stud…       0 Gene… 1       #>  7        87 Prior history requirement not fulfilled duri…      14 Gene… 1       #>  8        45 Not Female                                         42 Gene… 1       #>  9        28 No observation time available after applying…      17 Gene… 1       #> 10        28 Starting analysis population                       NA Esti… 1       #> 11        28 Excluded due to prior event (do not pass out…       0 Esti… 1       #> 12        28 Not observed during the complete database in…       0 Esti… 1       #> # … with abbreviated variable names ¹​excluded, ²​analysis_id"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"Run benchmark incidence prevalence analyses","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"","code":"benchmarkIncidencePrevalence(   cdm,   startDate = NULL,   endDate = NULL,   tablePrefix = NULL,   sample = NULL,   nOutcomes = 1,   prevOutcomes = 0.25,   analysisType = \"all\",   outputFolder = NULL,   fileName = NULL,   verbose = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"cdm CDM reference object startDate date indicating start study period used denominator cohort. NULL, earliest observation_start_date observation_period table used. endDate date indicating end study period used denominator cohort. NULL, latest observation end date observation period  table used. tablePrefix stem permanent tables created. Permanent tables created using stem, existing tables start risk dropped overwritten. NULL, temporary tables used throughout. sample integer take random sample generating denominator cohort nOutcomes integer specifying number outcomes create denominator cohort prevOutcomes array integers prevalence outcomes population (%). user wants outcomes prevalence, can also provide single integer analysisType string following: \"\", \"incidence\", \"prevalence\" outputFolder Folder save results CSV fileName Name given CSV results verbose Either TRUE FALSE. TRUE, progress reported.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"tibble time taken different analyses","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), CDMConnector::eunomia_dir()) cdm <- CDMConnector::cdm_from_con(   con = con,   cdm_schema = \"main\" )  timings <- IncidencePrevalence::benchmarkIncidencePrevalence(cdm) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/cohortCount.html","id":null,"dir":"Reference","previous_headings":"","what":"Counts of cohorts in a cohort set — cohortCount","title":"Counts of cohorts in a cohort set — cohortCount","text":"Counts cohorts cohort set","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/cohortCount.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Counts of cohorts in a cohort set — cohortCount","text":"","code":"cohortCount(cohortTable, cohortDefinitionId = NULL)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/cohortCount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Counts of cohorts in a cohort set — cohortCount","text":"cohortTable Set cohorts cohortDefinitionId cohortDefinitionId can used specify particular cohort interest","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/cohortCount.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Counts of cohorts in a cohort set — cohortCount","text":"tibble settings used generating cohort set","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/cohortCount.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Counts of cohorts in a cohort set — cohortCount","text":"","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm$denominator <- generateDenominatorCohortSet(cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(18, 40)),   sex = c(\"Female\", \"Male\"),   daysPriorHistory = 120 ) cohortCount(cohortTable = cdm$denominator) #> # A tibble: 2 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1    28 #> 2                    2    22 cohortCount(cohortTable = cdm$denominator, cohortDefinitionId = 1) #> # A tibble: 1 × 2 #>   cohort_definition_id     n #>                  <int> <dbl> #> 1                    1    28"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/dropStemTables.html","id":null,"dir":"Reference","previous_headings":"","what":"Drop stem tables — dropStemTables","title":"Drop stem tables — dropStemTables","text":"Drop stem tables","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/dropStemTables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Drop stem tables — dropStemTables","text":"","code":"dropStemTables(cdm, computePermanentStem)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/dropStemTables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Drop stem tables — dropStemTables","text":"cdm CDM reference object computePermanentStem stem drop tables. example, stem \"study_results\" lead dropping table starting (ie \"study_results\" \"study_results_analysis_1\" dropped exist write schema)","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect population incidence estimates — estimateIncidence","title":"Collect population incidence estimates — estimateIncidence","text":"Collect population incidence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect population incidence estimates — estimateIncidence","text":"","code":"estimateIncidence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   outcomeCohortName = NULL,   interval = \"years\",   completeDatabaseIntervals = TRUE,   outcomeWashout = 0,   repeatedEvents = FALSE,   minCellCount = 5,   tablePrefix = NULL,   returnParticipants = FALSE,   verbose = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect population incidence estimates — estimateIncidence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. outcomeCohortName Corresponding names outcomeCohortId. interval Time intervals incidence estimated. Can \"weeks\", \"months\", \"quarters\", \"years\", \"overall\". ISO weeks used weeks. Calendar months, quarters, years can used, overall estimate entire time period observed (earliest cohort start last cohort end) can also estimated. one option chosen results estimated chosen interval. completeDatabaseIntervals TRUE/ FALSE. TRUE, incidence estimated intervals database captures interval (based earliest latest observation period start dates, respectively). outcomeWashout number days used 'washout' period end one outcome individual starting contribute time risk. NULL, time can contributed event occurred (whether study period occurring beforehand). repeatedEvents TRUE/ FALSE. TRUE, individual able contribute multiple events study period (time present outcome cohort subsequent washout excluded). FALSE, individual contribute time first event study period. minCellCount minimum number events reported, results obscured. 0, results reported. tablePrefix stem permanent tables created running analysis. Permanent tables created using prefix, existing tables start risk dropped overwritten. NULL, temporary tables used throughout. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema (can dropped subsequently using dropStemTables() function) verbose Either TRUE FALSE. TRUE, progress reported.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collect population incidence estimates — estimateIncidence","text":"Incidence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collect population incidence estimates — estimateIncidence","text":"","code":"if (FALSE) { db <- DBI::dbConnect(\" Your database connection here \") cdm <- CDMConnector::cdm_from_con(   con = db,   cdm_schema = \"cdm schema name\" ) cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate period prevalence — estimatePeriodPrevalence","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"Estimate period prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"","code":"estimatePeriodPrevalence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   outcomeCohortName = NULL,   outcomeLookbackDays = 0,   interval = \"years\",   completeDatabaseIntervals = TRUE,   fullContribution = FALSE,   minCellCount = 5,   tablePrefix = NULL,   returnParticipants = FALSE,   verbose = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. outcomeCohortName Corresponding names outcomeCohortId. outcomeLookbackDays Days lookback considering outcome prevalent. NULL prior outcome considered prevalent. 0, ongoing outcomes considered prevalent. interval Time intervals period prevalence estimated. can \"weeks\", \"months\", \"quarters\", \"years\", \"overall\". ISO weeks used weeks. Calendar months, quarters, years can used period. one option chosen results estimated chosen interval. completeDatabaseIntervals TRUE/ FALSE. TRUE, prevalence estimated intervals database captures interval (based earliest latest observation period start dates, respectively). fullContribution TRUE/ FALSE. TRUE, individuals included database entire interval interest. FALSE required present one day interval order contribute. minCellCount Minimum number events report- results lower obscured. NULL results reported. tablePrefix stem permanent tables created running analysis. Permanent tables created using prefix, existing tables start risk dropped overwritten. NULL, temporary tables used throughout. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema (can dropped subsequently using dropStemTables() function) verbose Whether report progress","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"Period prevalence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"","code":"if (FALSE) { db <- DBI::dbConnect(\" Your database connection here \") cdm <- CDMConnector::cdm_from_con(   con = db,   cdm_schema = \"cdm schema name\" ) dpop <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) cdm$denominator <- dpop$denominator_population estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"months\" ) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate point prevalence — estimatePointPrevalence","title":"Estimate point prevalence — estimatePointPrevalence","text":"Estimate point prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate point prevalence — estimatePointPrevalence","text":"","code":"estimatePointPrevalence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   outcomeCohortName = NULL,   outcomeLookbackDays = 0,   interval = \"years\",   timePoint = \"start\",   minCellCount = 5,   tablePrefix = NULL,   returnParticipants = FALSE,   verbose = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate point prevalence — estimatePointPrevalence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. outcomeCohortName Corresponding names outcomeCohortId. outcomeLookbackDays Days lookback considering outcome prevalent. NULL prior outcome considered prevalent. 0, ongoing outcomes considered prevalent. interval Time intervals period prevalence estimated. Can \"weeks\", \"months\", \"quarters\", \"years\". ISO weeks used weeks. Calendar months, quarters, years can used period. one option chosen results estimated chosen interval. timePoint compute point prevalence minCellCount Minimum number events report- results lower obscured. NULL results reported. tablePrefix stem permanent tables created running analysis. Permanent tables created using prefix, existing tables start risk dropped overwritten. NULL, temporary tables used throughout. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema (can dropped subsequently using dropStemTables() function) verbose Whether report progress","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate point prevalence — estimatePointPrevalence","text":"Point prevalence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate point prevalence — estimatePointPrevalence","text":"","code":"if (FALSE) { db <- DBI::dbConnect(\" Your database connection here \") cdm <- CDMConnector::cdm_from_con(   con = db,   cdm_schema = \"cdm schema name\" ) cdm$denominator <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"months\" ) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":null,"dir":"Reference","previous_headings":"","what":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"Export IncidencePrevalence results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"","code":"exportIncidencePrevalenceResults(result, zipName, outputFolder)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"result IncidencePrevalence results gatherResults() zipName name give zip folder outputFolder directory save zip folder containing results set CSV files","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"zip folder results saved outputFolder","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"","code":"if (FALSE) { db <- DBI::dbConnect(\" Your database connection here \") cdm <- CDMConnector::cdm_from_con(   con = db,   cdm_schema = \"cdm schema name\" ) dpop <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) cdm$denominator <- dpop$denominator_population prev <- estimatePointPrevalence( cdm = cdm, denominatorTable = \"denominator\", outcomeTable = \"outcome\" )  results <- gatherIncidencePrevalenceResults(resultList=list(prev))  exportIncidencePrevalenceResults(result=results, zipName=\"test\",                                   outputFolder=tempdir()) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/gatherIncidencePrevalenceResults.html","id":null,"dir":"Reference","previous_headings":"","what":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","title":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","text":"Gather incidence prevalence results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/gatherIncidencePrevalenceResults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","text":"","code":"gatherIncidencePrevalenceResults(cdm, resultList, databaseName = NULL)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/gatherIncidencePrevalenceResults.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","text":"cdm CDM reference object resultList List incidence prevalence results databaseName database name add results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/gatherIncidencePrevalenceResults.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","text":"list two tibbles, one prevalence results one incidence results. Note, multiple results sets type passed function, analysisId variable updated","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/gatherIncidencePrevalenceResults.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Gather incidence and prevalence results — gatherIncidencePrevalenceResults","text":"","code":"if (FALSE) { db <- DBI::dbConnect(\" Your database connection here \") cdm <- CDMConnector::cdm_from_con(   con = db,   cdm_schema = \"cdm schema name\" ) dpop <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) cdm$denominator <- dpop$denominator_population prev <- estimatePointPrevalence( cdm = cdm, denominatorTable = \"denominator\", outcomeTable = \"outcome\" ) inc <- estimateIncidence(  cdm = cdm,  denominatorTable = \"denominator\",  outcomeTable = \"outcome\",  interval = \"months\",  outcomeWashout = 0  )  results <- gatherIncidencePrevalenceResults(resultList=list(prev, inc)) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify a set of denominator populations — generateDenominatorCohortSet","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"generateDenominatorCohortSet() creates set cohorts can used denominator population analyses incidence, using estimateIncidence(), prevalence, using estimatePointPrevalence() estimatePeriodPrevalence().","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"","code":"generateDenominatorCohortSet(   cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorHistory = 0,   strataTable = NULL,   strataCohortId = NULL,   strataCohortName = NULL,   sample = NULL,   tablePrefix = NULL,   verbose = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"cdm CDM reference object startDate date indicating start study period. NULL, earliest observation_start_date observation_period table used. endDate date indicating end study period. NULL, latest observation end date observation period table used. ageGroup list age groups cohorts generated. value list(c(0,17), c(18,30)) , example, lead creation cohorts aged 0 17 (day 18th birthday), 18 (starting day 18th birthday) 30 (day 31st birthday). sex Sex cohorts. can one : \"Male\", \"Female\", \"\". daysPriorHistory number days prior history observed database required individual start contributing time cohort. strataTable cohort table cdm reference use limit cohort entry exit (individuals contributing cohort contributing cohort strata table). strataCohortId cohort definition id cohort interest strata table. one stratifying cohort supported. strataCohortName Corresponding name strata cohort. sample integer take random sample, using dplyr::slice_sample(), people person table eligible included cohort set. tablePrefix stem permanent tables created creating denominator cohorts. Permanent tables created using stem, existing tables start risk dropped overwritten. NULL, temporary tables used throughout. verbose Either TRUE FALSE. TRUE, progress reported.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"cohort reference","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), CDMConnector::eunomia_dir()) cdm <- CDMConnector::cdm_from_con(   con = con,   cdm_schema = \"main\" )  dpop <- generateDenominatorCohortSet(   cdm = cdm,   startDate = as.Date(\"2008-01-01\"),   endDate = as.Date(\"2018-01-01\") ) }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"Generate example subset OMOP CDM estimating incidence prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"","code":"mockIncidencePrevalenceRef(   personTable = NULL,   observationPeriodTable = NULL,   strataTable = NULL,   outcomeTable = NULL,   sampleSize = 1,   outPre = 1,   seed = 444,   ageBeta = NULL,   genderBeta = NULL,   intercept = NULL,   earliestDateOfBirth = NULL,   latestDateOfBirth = NULL,   earliestObservationStartDate = NULL,   latestObservationStartDate = NULL,   minDaysToObservationEnd = NULL,   maxDaysToObservationEnd = NULL,   minOutcomeDays = 1,   maxOutcomeDays = 10,   maxOutcomes = 1 )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"personTable tibble format person table. observationPeriodTable tibble format observation period table. strataTable tibble format cohort table can used stratification outcomeTable tibble format cohort table can used outcomes sampleSize number unique patients. outPre fraction patients event. seed seed simulating data set. Use seed get data set. ageBeta beta standardised age logistic regression outcome model. genderBeta beta gender flag logistic regression outcome model. intercept beta intercept logistic regression outcome model. earliestDateOfBirth earliest date birth patient person table. latestDateOfBirth latest date birth patient person table. earliestObservationStartDate earliest observation start date patient format. latestObservationStartDate latest observation start date patient format. minDaysToObservationEnd minimum number days observational integer. maxDaysToObservationEnd maximum number days observation period integer. minOutcomeDays minimum number days outcome period default set 1. maxOutcomeDays maximum number days outcome period default set 10. maxOutcomes maximum possible number outcomes per person can default set 1.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"cdm reference duckdb database mock data.","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":null,"dir":"Reference","previous_headings":"","what":"Participants contributing to an analysis — participants","title":"Participants contributing to an analysis — participants","text":"Participants contributing analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Participants contributing to an analysis — participants","text":"","code":"participants(result, analysisId = NULL)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Participants contributing to an analysis — participants","text":"result Result object analysisId ID specific analysis return participants ","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Participants contributing to an analysis — participants","text":"References tables study participants contributing given analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Participants contributing to an analysis — participants","text":"","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm$denominator <- generateDenominatorCohortSet(cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(18, 40)),   sex = c(\"Female\", \"Male\"),   daysPriorHistory = 120 ) incidence <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) participants(result = incidence) #> NULL participants(result = incidence, analysisId = 1) #> NULL"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/recordAttrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Record attrition in tibble — recordAttrition","title":"Record attrition in tibble — recordAttrition","text":"Record attrition tibble","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/recordAttrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Record attrition in tibble — recordAttrition","text":"","code":"recordAttrition(   table,   id = \"person_id\",   reason = NULL,   existingAttrition = NULL )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/recordAttrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Record attrition in tibble — recordAttrition","text":"table table contains person_id id id variable reason reason attrition existingAttrition previous attrition append results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/recordAttrition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Record attrition in tibble — recordAttrition","text":"tibble","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Settings associated with a cohort set — settings","title":"Settings associated with a cohort set — settings","text":"Settings associated cohort set","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Settings associated with a cohort set — settings","text":"","code":"settings(result, ...)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/settings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Settings associated with a cohort set — settings","text":"result Result get settings ... Additional arguments. denominator cohort, cohortDefinitionId can used specify particular cohort interest. incidence prevalence analyses results, analysisId can used specify particular analysis interest.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Settings associated with a cohort set — settings","text":"tibble settings used generating cohort set","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/settings.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Settings associated with a cohort set — settings","text":"","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm$denominator <- generateDenominatorCohortSet(cdm,   startDate = NULL,   endDate = NULL,   ageGroup = list(c(18, 40)),   sex = c(\"Female\", \"Male\"),   daysPriorHistory = 120 ) settings(result = cdm$denominator) #> # A tibble: 2 × 8 #>   cohort_definitio…¹ age_g…² sex   days_…³ start_date end_date   strat…⁴ strat…⁵ #>                <int> <chr>   <chr>   <dbl> <date>     <date>     <lgl>   <lgl>   #> 1                  1 18;40   Fema…     120 2005-01-12 2022-07-31 NA      NA      #> 2                  2 18;40   Male      120 2005-01-12 2022-07-31 NA      NA      #> # … with abbreviated variable names ¹​cohort_definition_id, ²​age_group, #> #   ³​days_prior_history, ⁴​strata_cohort_definition_id, ⁵​strata_cohort_name settings(result = cdm$denominator, cohortDefinitionId = 1) #> # A tibble: 1 × 8 #>   cohort_definitio…¹ age_g…² sex   days_…³ start_date end_date   strat…⁴ strat…⁵ #>                <int> <chr>   <chr>   <dbl> <date>     <date>     <lgl>   <lgl>   #> 1                  1 18;40   Fema…     120 2005-01-12 2022-07-31 NA      NA      #> # … with abbreviated variable names ¹​cohort_definition_id, ²​age_group, #> #   ³​days_prior_history, ⁴​strata_cohort_definition_id, ⁵​strata_cohort_name incidence <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) settings(result = incidence) #> # A tibble: 2 × 16 #>   analysis_id outcome_…¹ outco…² analy…³ analy…⁴ analy…⁵ analy…⁶ denom…⁷ analy…⁸ #>   <chr>       <chr>      <lgl>     <dbl> <lgl>   <chr>   <lgl>     <int>   <dbl> #> 1 1           1          NA            0 FALSE   overall TRUE          1       5 #> 2 2           1          NA            0 FALSE   overall TRUE          2       5 #> # … with 7 more variables: denominator_age_group <chr>, denominator_sex <chr>, #> #   denominator_days_prior_history <dbl>, denominator_start_date <date>, #> #   denominator_end_date <date>, denominator_strata_cohort_definition_id <lgl>, #> #   denominator_strata_cohort_name <lgl>, and abbreviated variable names #> #   ¹​outcome_cohort_id, ²​outcome_cohort_name, ³​analysis_outcome_washout, #> #   ⁴​analysis_repeated_events, ⁵​analysis_interval, #> #   ⁶​analysis_complete_database_intervals, ⁷​denominator_cohort_id, … settings(result = incidence, analysisId = 1) #> # A tibble: 1 × 16 #>   analysis_id outcome_…¹ outco…² analy…³ analy…⁴ analy…⁵ analy…⁶ denom…⁷ analy…⁸ #>   <chr>       <chr>      <lgl>     <dbl> <lgl>   <chr>   <lgl>     <int>   <dbl> #> 1 1           1          NA            0 FALSE   overall TRUE          1       5 #> # … with 7 more variables: denominator_age_group <chr>, denominator_sex <chr>, #> #   denominator_days_prior_history <dbl>, denominator_start_date <date>, #> #   denominator_end_date <date>, denominator_strata_cohort_definition_id <lgl>, #> #   denominator_strata_cohort_name <lgl>, and abbreviated variable names #> #   ¹​outcome_cohort_id, ²​outcome_cohort_name, ³​analysis_outcome_washout, #> #   ⁴​analysis_repeated_events, ⁵​analysis_interval, #> #   ⁶​analysis_complete_database_intervals, ⁷​denominator_cohort_id, …"}]
