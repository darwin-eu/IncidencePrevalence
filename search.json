[{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"filing-issues","dir":"","previous_headings":"","what":"Filing issues","title":"Contributing to IncidencePrevalence","text":"found bug, question, want suggest new feature please open issue. reporting bug, reprex much appreciated. contributing either documentation code, please make sure open issue beforehand identify needs done .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"contributing-code-or-documentation","dir":"","previous_headings":"","what":"Contributing code or documentation","title":"Contributing to IncidencePrevalence","text":"package developed part DARWIN EU(R) project closed external contributions.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"documenting-the-package","dir":"","previous_headings":"Contributing code or documentation","what":"Documenting the package","title":"Contributing to IncidencePrevalence","text":"Run update check package documentation: Note devtools::check_man() return warnings. commit limited package documentation, running sufficient (although running devtools::check() always generally good idea submitting pull request.","code":"devtools::document()  devtools::run_examples() devtools::build_readme() devtools::build_vignettes() devtools::check_man()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"run-tests","dir":"","previous_headings":"Contributing code or documentation","what":"Run tests","title":"Contributing to IncidencePrevalence","text":"starting contribute code, first make sure package tests passing. raise issue going (although please first make sure packages imports suggests installed). contribute code, make sure current tests add continue pass. package tests can run together : Code add new functionality accompanied tests. Code coverage can checked using:","code":"devtools::test() # note, you may first have to detach the package # detach(\"package:IncidencePrevalence\", unload=TRUE) devtools::test_coverage()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"adhere-to-code-style","dir":"","previous_headings":"Contributing code or documentation","what":"Adhere to code style","title":"Contributing to IncidencePrevalence","text":"Please adhere code style adding new code. though restyle code unrelated pull request make code review difficult.","code":"lintr::lint_package(\".\",                     linters = lintr::linters_with_defaults(                       lintr::object_name_linter(styles = \"camelCase\")                     ) )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/CONTRIBUTING.html","id":"run-check-before-opening-a-pull-request","dir":"","previous_headings":"Contributing code or documentation","what":"Run check() before opening a pull request","title":"Contributing to IncidencePrevalence","text":"opening pull request please make sure run: warnings seen.","code":"devtools::check()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Creating denominator cohorts","text":"Calculating incidence prevalence requires first identifying appropriate denominator population. find denominator population (multiple denominator populations) can use generateDenominatorCohortSet() function. function identify time people database satisfy set criteria related study period individuals´ age, sex, amount prior observed history. using generateDenominatorCohortSet() individuals enter denominator population respective date latest following: Study start date Date sufficient prior observation Date reach minimum age exit respective date earliest following: Study end date Date observation period ends last day maximum age Let´s go examples make logic little concrete.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"no-specific-requirements","dir":"Articles","previous_headings":"Introduction","what":"No specific requirements","title":"Creating denominator cohorts","text":"simplest case study start end dates specified, prior history requirement imposed, age sex criteria. case individuals enter denominator population entered database (start observation period) leave exit database (end observation period). Note databases person can multiple observation periods, case contribution person time look like last person .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period","dir":"Articles","previous_headings":"Introduction","what":"Specified study period","title":"Creating denominator cohorts","text":"specify study start end date observation time period included.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-and-prior-history-requirement","dir":"Articles","previous_headings":"Introduction","what":"Specified study period and prior history requirement","title":"Creating denominator cohorts","text":"also add requirement prior history somebody contribute time risk reached.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-prior-history-requirement-and-age-and-sex-criteria","dir":"Articles","previous_headings":"Introduction","what":"Specified study period, prior history requirement, and age and sex criteria","title":"Creating denominator cohorts","text":"Lastly can also impose age sex criteria, now individuals contribute time also satisfy criteria. shown figure person´s sex, also stratify denominator population well.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"using-generatedenominatorcohortset","dir":"Articles","previous_headings":"","what":"Using generateDenominatorCohortSet()","title":"Creating denominator cohorts","text":"generateDenominatorCohortSet() function use identify set denominator populations. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 500 example patients using mockIncidencePrevalenceRef() function.","code":"library(IncidencePrevalence) library(ggplot2) library(tidyr)  cdm <- mockIncidencePrevalenceRef(sampleSize = 500)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"no-specific-requirements-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"No specific requirements","title":"Creating denominator cohorts","text":"can get denominator population without including particular requirements like Let´s look included time first five patients  can also plot histogram start end dates 500 simulated patients","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,    name = \"denominator\",   cohortDateRange = as.Date(c(NA,NA)),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 2          2018-11-27        2020-07-15      #>  2                    1 3          2008-04-30        2008-09-19      #>  3                    1 4          2016-02-24        2016-07-14      #>  4                    1 6          2006-04-29        2007-03-15      #>  5                    1 7          2014-05-19        2016-03-09      #>  6                    1 8          2016-05-19        2018-01-01      #>  7                    1 9          2006-11-14        2008-09-29      #>  8                    1 10         2009-12-16        2011-11-26      #>  9                    1 11         2011-12-20        2012-07-30      #> 10                    1 12         2015-05-09        2016-03-25      #> # ℹ more rows  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [5 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 2          2018-11-27        2020-07-15      #> 2                    1 3          2008-04-30        2008-09-19      #> 3                    1 4          2016-02-24        2016-07-14      #> 4                    1 5          2019-03-01        2019-03-18      #> 5                    1 1          2008-10-12        2010-01-09 cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period","title":"Creating denominator cohorts","text":"can get specify study period like Now can see person “2”, “4” “5” haven´t included don´t observation time study period. Indeed, ´re now including 106 original 500 simulated patients.  can also plot histogram start end dates can see now people enter start study period leave end.","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",    overwrite = TRUE,   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2009-12-31\")),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 3          2008-04-30        2008-09-19      #>  2                    1 9          2008-01-01        2008-09-29      #>  3                    1 10         2009-12-16        2009-12-31      #>  4                    1 20         2008-01-01        2008-05-28      #>  5                    1 22         2008-10-23        2008-12-12      #>  6                    1 24         2008-01-01        2008-06-21      #>  7                    1 35         2008-02-29        2008-08-09      #>  8                    1 43         2008-08-01        2009-01-20      #>  9                    1 48         2008-01-01        2009-02-19      #> 10                    1 54         2008-01-01        2009-04-03      #> # ℹ more rows  cohortCount(cdm$denominator) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1            106             106  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [2 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 3          2008-04-30        2008-09-19      #> 2                    1 1          2008-10-12        2009-12-31 cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot() +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-and-prior-history-requirement-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period and prior history requirement","title":"Creating denominator cohorts","text":"can add requirement prior history Now include patient “1” original first five ´re now including 57 original 500 simulated patients.  histograms start end dates now looking like","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2009-12-31\")),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 365 ) cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 9          2008-01-01        2008-09-29      #>  2                    1 20         2008-01-01        2008-05-28      #>  3                    1 48         2008-02-28        2009-02-19      #>  4                    1 54         2008-01-01        2009-04-03      #>  5                    1 76         2008-01-01        2008-01-16      #>  6                    1 78         2008-04-20        2008-06-02      #>  7                    1 87         2009-11-07        2009-12-31      #>  8                    1 99         2008-06-08        2008-12-16      #>  9                    1 103        2009-06-23        2009-07-07      #> 10                    1 105        2008-01-01        2008-05-16      #> # ℹ more rows  cohortCount(cdm$denominator) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             57              57  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [1 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 1          2009-10-12        2009-12-31 cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot() +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"specified-study-period-prior-history-requirement-and-age-and-sex-criteria-1","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Specified study period, prior history requirement, and age and sex criteria","title":"Creating denominator cohorts","text":"addition also add requirements around age sex. One thing note age upper limit include time person day reach age upper limit + 1 year. instance, upper limit 65, means include time person including day 66th birthday. Now none original first five included ´re including 20 original 500 simulated patients. histograms start end dates now looking like","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2009-12-31\")),   ageGroup = list(c(18, 65)),   sex = \"Female\",   daysPriorObservation = 365 ) cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"20\", \"54\", \"78\", \"99\", \"155\", \"168\", \"176\", \"182… #> $ cohort_start_date    <date> 2008-01-01, 2008-01-01, 2008-04-20, 2008-06-08, … #> $ cohort_end_date      <date> 2008-05-28, 2009-03-05, 2008-06-02, 2008-12-16, …  cohortCount(cdm$denominator) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             20              20  cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) #> # Source:   SQL [0 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> # ℹ 4 variables: cohort_definition_id <int>, subject_id <chr>, #> #   cohort_start_date <date>, cohort_end_date <date> cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_start_date),     colour = \"black\", fill = \"grey\"   ) cdm$denominator %>%   collect() %>%   ggplot() +   theme_minimal() +   geom_histogram(aes(cohort_end_date),     colour = \"black\", fill = \"grey\"   )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"multiple-options-to-return-multiple-denominator-populations","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Multiple options to return multiple denominator populations","title":"Creating denominator cohorts","text":"one age, sex prior history requirements can specified time. First, can take look two age groups. can see individuals 41st birthday study period go first cohort (age_group: 0;40) second (age_group: 41;100) day.  can also sex specific denominator cohorts.  also specifying multiple prior history requirements  Note, setting requirementInteractions FALSE mean first value age, sex, prior history requirements considered given characteristic. case order values important generally first values primary analysis settings subsequent values secondary analyses.","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 500,                                    earliestObservationStartDate = as.Date(\"2000-01-01\"),                                   latestObservationStartDate =  as.Date(\"2005-01-01\"),                                   minDaysToObservationEnd = 10000,                                    earliestDateOfBirth = as.Date(\"1960-01-01\"),                                    latestDateOfBirth = as.Date(\"1980-01-01\"))  cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = \"Both\",   daysPriorObservation = 0 ) cdm$denominator %>%   filter(subject_id %in% !!as.character(seq(1:30))) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id),          subject_id = factor(as.numeric(subject_id))) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_minimal() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip() cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorObservation = 0 ) cdm$denominator %>%   filter(subject_id %in% !!as.character(seq(1:15))) %>%   collect() %>%   left_join(cohortSet(cdm$denominator)) %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id),          subject_id = factor(as.numeric(subject_id))) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +     facet_grid(sex ~ ., space = \"free_y\") +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_bw() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip() cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorObservation = c(0, 365) ) cdm$denominator %>%   filter(subject_id %in% !!as.character(seq(1:15))) %>%   collect() %>%   left_join(cohortSet(cdm$denominator)) %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id),          subject_id = factor(as.numeric(subject_id))) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   facet_grid(sex + days_prior_observation ~ ., space = \"free_y\") +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_bw() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip() cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   ageGroup = list(     c(0, 40),     c(41, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorObservation = c(0, 365),   requirementInteractions = FALSE ) cdm$denominator %>%   filter(subject_id %in% !!as.character(seq(1:15))) %>%   collect() %>%   left_join(cohortSet(cdm$denominator)) %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   mutate(cohort_definition_id = as.character(cohort_definition_id),          subject_id = factor(as.numeric(subject_id))) %>%   ggplot(aes(x = subject_id, y = value, colour = cohort_definition_id)) +   facet_grid(sex + days_prior_observation ~ ., space = \"free_y\") +   geom_point(position = position_dodge(width = 0.5)) +   geom_line(position = position_dodge(width = 0.5)) +   theme_bw() +   theme(legend.position = \"top\") +   ylab(\"Year\") +   coord_flip()"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a02_Creating_denominator_populations.html","id":"output","dir":"Articles","previous_headings":"Using generateDenominatorCohortSet()","what":"Output","title":"Creating denominator cohorts","text":"generateDenominatorCohortSet() generate table denominator population, includes information individuals fulfill given criteria point study period. also includes information specific start end dates individuals contributed denominator population (cohort_start_date cohort_end_date). patient recorded different row. databases allow individuals multiple non-overlapping observation periods, one row patient observation period considered. Considering following example, can see: output table several attributes. CDMConnector::cohortSet() can see options used defining set denominator populations. one age, sex prior history requirements can specified time combination variables result different cohort, corresponding cohort_definition_id. example, identified 8 different cohorts: cohortCount() can see number individuals entered study cohort CDMConnector::cohortAttrition() can see number individuals database excluded entering given denominator population along reason (missing crucial information satisfying sex age criteria required, among others):","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   overwrite = TRUE,   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2009-12-31\")),   ageGroup = list(     c(0, 18),     c(19, 100)   ),   sex = c(\"Male\", \"Female\"),   daysPriorObservation = c(0, 365) )  head(cdm$denominator, 8) #> # Source:   SQL [8 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    5 2          2008-01-01        2009-12-31      #> 2                    5 3          2008-01-01        2009-12-31      #> 3                    5 4          2008-01-01        2009-12-31      #> 4                    5 9          2008-01-01        2009-12-31      #> 5                    5 10         2008-01-01        2009-12-31      #> 6                    5 12         2008-01-01        2009-12-31      #> 7                    5 14         2008-01-01        2009-12-31      #> 8                    5 15         2008-01-01        2009-12-31 cohortSet(cdm$denominator) %>%    glimpse() #> Rows: 8 #> Columns: 9 #> $ cohort_definition_id        <int> 1, 2, 3, 4, 5, 6, 7, 8 #> $ cohort_name                 <chr> \"Denominator cohort 1\", \"Denominator cohor… #> $ age_group                   <chr> \"0 to 18\", \"0 to 18\", \"0 to 18\", \"0 to 18\"… #> $ sex                         <chr> \"Male\", \"Male\", \"Female\", \"Female\", \"Male\"… #> $ days_prior_observation      <dbl> 0, 365, 0, 365, 0, 365, 0, 365 #> $ start_date                  <date> 2008-01-01, 2008-01-01, 2008-01-01, 2008-0… #> $ end_date                    <date> 2009-12-31, 2009-12-31, 2009-12-31, 2009-1… #> $ target_cohort_definition_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA #> $ target_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA cohortCount(cdm$denominator) %>%    glimpse() #> Rows: 8 #> Columns: 3 #> $ cohort_definition_id <int> 1, 2, 3, 4, 5, 6, 7, 8 #> $ number_records       <dbl> 0, 0, 0, 0, 206, 206, 243, 243 #> $ number_subjects      <dbl> 0, 0, 0, 0, 206, 206, 243, 243 cohortAttrition(cdm$denominator) %>%    glimpse() #> Rows: 72 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2… #> $ number_records       <dbl> 500, 500, 500, 500, 449, 449, 449, 206, 0, 500, 5… #> $ number_subjects      <dbl> 500, 500, 500, 500, 449, 449, 449, 206, 0, 500, 5… #> $ reason_id            <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 10, 1, 2, 3, 4, 5, 6, 7, … #> $ reason               <chr> \"Starting population\", \"Missing year of birth\", \"… #> $ excluded_records     <dbl> NA, 0, 0, 0, 51, 0, 0, 243, 206, NA, 0, 0, 0, 51,… #> $ excluded_subjects    <dbl> NA, 0, 0, 0, 51, 0, 0, 243, 206, NA, 0, 0, 0, 51,…"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a03_Creating_target_denominator_populations.html","id":"using-generatedenominatorcohortset-with-a-target-cohort","dir":"Articles","previous_headings":"","what":"Using generateDenominatorCohortSet() with a target cohort","title":"Creating target denominator populations","text":"seen previous vignette, generateDenominatorCohortSet() can used generate denominator populations based individuals database individuals included satisfy criteria. However, case might want define denominator population within specific population interest, example people diagnosed condition interest. function generateTargetDenominatorCohortSet() provides functionality . provide example use, let´s generate 5 example patients. generate simulated target cohort table 5 individuals 2 different target cohorts illustrate following examples. Note, individuals database acute asthma cohort. ´ve already seen, can get denominator population without including particular subset like specify study start end date, cohort start end date 5 patients correspond registered observation period.  use generateTargetDenominatorCohortSet() create denominator cohort among individuals acute asthma cohort. can see person “3” “5” experienced condition two different occasions contribute time denominator population twice, person “2” contribute one period time risk.  Restrictions based age, sex, prior observation can applied. Prior observation requirements applied relative individual´s observation period start date. Importantly, using target cohort denominator individuals must satisfy age prior observation requirements target cohort entry date. (wish stratify time-invariant feature, create general population denominator stratify time estimating incidence prevalence - see subsequent vignettes). case can see person “3” “5” satisfy sex age requirements target cohort start dates, although one cohort entries exclude patient “5” minimum age time.","code":"personTable <- tibble(   person_id = c(\"1\", \"2\", \"3\", \"4\", \"5\"),   gender_concept_id = c(rep(\"8507\", 2), rep(\"8532\", 3)),   year_of_birth = 2000,   month_of_birth = 06,   day_of_birth = 01 ) observationPeriodTable <- tibble(   observation_period_id = \"1\",   person_id = c(\"1\", \"2\", \"3\", \"4\", \"5\"),   observation_period_start_date = c(     as.Date(\"2010-12-19\"),     as.Date(\"2005-04-01\"),     as.Date(\"2009-04-10\"),     as.Date(\"2010-08-20\"),     as.Date(\"2010-01-01\")   ),   observation_period_end_date = c(     as.Date(\"2011-06-19\"),     as.Date(\"2005-11-29\"),     as.Date(\"2016-01-02\"),     as.Date(\"2011-12-11\"),     as.Date(\"2015-06-01\")   ) )  acute_asthma <- tibble(   cohort_definition_id = rep(\"1\", 5),   subject_id = c(\"3\", \"3\", \"5\", \"5\", \"2\"),   cohort_start_date = c(     as.Date(\"2012-01-01\"),     as.Date(\"2015-06-01\"),     as.Date(\"2014-10-01\"),     as.Date(\"2010-06-01\"),     as.Date(\"2005-08-20\")   ),   cohort_end_date = c(     as.Date(\"2013-01-01\"),     as.Date(\"2015-12-31\"),     as.Date(\"2015-04-01\"),     as.Date(\"2010-06-01\"),     as.Date(\"2006-08-20\")   ) )  # mock database cdm <- mockIncidencePrevalenceRef(   personTable = personTable,   observationPeriodTable = observationPeriodTable,   targetCohortTable = acute_asthma ) cdm <- generateDenominatorCohortSet(   cdm = cdm,    name = \"denominator\",   overwrite = TRUE ) cdm$denominator #> # Source:   table<denominator> [5 x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int> <chr>      <date>            <date>          #> 1                    1 2          2005-04-01        2005-11-29      #> 2                    1 3          2009-04-10        2016-01-02      #> 3                    1 4          2010-08-20        2011-12-11      #> 4                    1 5          2010-01-01        2015-06-01      #> 5                    1 1          2010-12-19        2011-06-19 cdm$denominator %>%   filter(subject_id %in% c(\"1\", \"2\", \"3\", \"4\", \"5\")) %>%   collect() %>%   pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot() +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm <- generateTargetDenominatorCohortSet(   cdm = cdm,    name = \"denominator_acute_asthma\",   overwrite = TRUE,   targetCohortTable = \"target\" ) cdm$denominator_acute_asthma %>%   collect() %>%   mutate(row = row_number()) %>%    pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot(aes(group = row)) +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\") cdm <- generateTargetDenominatorCohortSet(   cdm = cdm,    name = \"denominator_acute_asthma_2\",   overwrite = TRUE,   ageGroup = list(c(11, 15)),   sex = \"Female\",   daysPriorObservation = 0,   targetCohortTable = \"target\" )  cdm$denominator_acute_asthma_2 %>%   collect() %>%   mutate(row = row_number()) %>%    pivot_longer(cols = c(     \"cohort_start_date\",     \"cohort_end_date\"   )) %>%   ggplot(aes(group = row)) +   geom_point(aes(x = value, y = subject_id)) +   geom_line(aes(x = value, y = subject_id)) +   theme_minimal() +   xlab(\"Year\")"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Calculating prevalence","text":"Prevalence total number people ongoing health-related event, medical condition medication use, particular time given period divided population risk. previous vignettes seen can identify denominator population define instantiate outcome cohort. Prevalence can calculated describe proportion people denominator population outcome cohort specified time point (point prevalence) given time interval (period prevalence). first plot , can can see time t+2 2 5 people outcome cohort, giving point prevalence 40%. second figure, period prevalence t+2 t+3 also 40%. However period prevalence t t+1, people contributed time period? included ´ll period prevalence 20%, whereas require everyone observed full period contribute ´ll period prevalence 33%.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"outcome-definition","dir":"Articles","previous_headings":"","what":"Outcome definition","title":"Calculating prevalence","text":"Outcome cohorts defined externally. creating outcome cohorts estimating prevalence, important considerations relate whether restrict events first occurrence individuals history cohort exit defined. decisions necessarily based nature proposed outcome (e.g., whether acute chronic condition) research question investigated. addition, typically recommended include exclusion requirements creating outcome cohorts. Restrictions patient characteristics can specified identifying denominator cohort using generateDenominatorCohortSet() generateTargetDenominatorCohortSet()","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimatepointprevalence-and-estimateperiodprevalence","dir":"Articles","previous_headings":"","what":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","title":"Calculating prevalence","text":"estimatePointPrevalence() estimatePeriodPrevalence() functions use estimate prevalence. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 50,000 example patients using mockIncidencePrevalenceRef() function ´ll create denominator population without adding restrictions study period.","code":"library(IncidencePrevalence) library(dplyr) library(tidyr)  cdm <- mockIncidencePrevalenceRef(   sampleSize = 50000,   outPre = 0.5 )  cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2012-01-01\")),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) #> Loading required namespace: testthat #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec  cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"12\", \"13\", \"19\", \"… #> $ cohort_start_date    <date> 2008-01-01, 2009-12-20, 2011-04-26, 2011-10-13, … #> $ cohort_end_date      <date> 2008-08-03, 2011-10-16, 2011-07-16, 2012-01-01, …"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimatepointprevalence","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Using estimatePointPrevalence()","title":"Calculating prevalence","text":"Let´s first calculate point prevalence yearly basis.  can also calculate point prevalence calendar month.  using estimatePointPrevalence() function, can specify compute point prevalence time interval (start, middle, end). default, parameter set start. can use middle instead like :","code":"prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 5 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date                   <date> 2008-01-01, 2009-01-01, 2010-0… #> $ prevalence_end_date                     <date> 2008-01-01, 2009-01-01, 2010-… #> $ n_cases                                 <int> 26, 36, 39, 29, 31 #> $ n_population                            <int> 4442, 4646, 4655, 4664, 4667 #> $ prevalence                              <dbl> 0.005853219, 0.007748601, 0.0… #> $ prevalence_95CI_lower                   <dbl> 0.003997601, 0.005602378, 0.00… #> $ prevalence_95CI_upper                   <dbl> 0.008562779, 0.010708169, 0.01… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"point\", \"point\", \"point\", \"po… #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0, 0 #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\"… #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev, ylim = c(0, NA)) prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 49 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ prevalence_start_date                   <date> 2008-01-01, 2008-02-01, 2008-… #> $ prevalence_end_date                     <date> 2008-01-01, 2008-02-01, 2008-… #> $ n_cases                                 <int> 26, 22, 37, 32, 26, 31, 31, 30… #> $ n_population                            <int> 4442, 4450, 4459, 4486, 4495, … #> $ prevalence                              <dbl> 0.005853219, 0.004943820, 0.00… #> $ prevalence_95CI_lower                   <dbl> 0.003997601, 0.003267167, 0.00… #> $ prevalence_95CI_upper                   <dbl> 0.008562779, 0.007474450, 0.01… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"point\", \"point\", \"point\", \"po… #> $ analysis_interval                       <chr> \"months\", \"months\", \"months\", … #> $ analysis_complete_database_intervals    <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\"… #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev, ylim = c(0, NA)) prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   timePoint = \"middle\",   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date                   <date> 2008-07-01, 2009-07-01, 2010-0… #> $ prevalence_end_date                     <date> 2008-07-01, 2009-07-01, 2010-… #> $ n_cases                                 <int> 31, 35, 41, 26 #> $ n_population                            <int> 4555, 4573, 4752, 4716 #> $ prevalence                              <dbl> 0.006805708, 0.007653619, 0.0… #> $ prevalence_95CI_lower                   <dbl> 0.004798807, 0.005508445, 0.00… #> $ prevalence_95CI_upper                   <dbl> 0.009643779, 0.010625271, 0.01… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"point\", \"point\", \"point\", \"po… #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_time_point                     <chr> \"middle\", \"middle\", \"middle\", … #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0 #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev, ylim = c(0, NA))"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"using-estimateperiodprevalence","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Using estimatePeriodPrevalence()","title":"Calculating prevalence","text":"calculate period prevalence year (.e. period calendar year)  calculate period prevalence month (.e. period calendar month)  using estimatePeriodPrevalence() function, can set fullContribution parameter decide whether individuals required present database throughout interval interest order included (fullContribution=TRUE). , individuals required present one day interval contribute (fullContribution=FALSE), specified like :","code":"prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ prevalence_start_date                   <date> 2008-01-01, 2009-01-01, 2010-0… #> $ prevalence_end_date                     <date> 2008-12-31, 2009-12-31, 2010-… #> $ n_cases                                 <int> 1696, 1739, 1715, 1734 #> $ n_population                            <int> 7926, 7953, 8060, 8016 #> $ prevalence                              <dbl> 0.2139793, 0.2186596, 0.21277… #> $ prevalence_95CI_lower                   <dbl> 0.2050903, 0.2097124, 0.203982… #> $ prevalence_95CI_upper                   <dbl> 0.2231454, 0.2278785, 0.221849… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"period\", \"period\", \"period\", … #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0 #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev, ylim = c(0.1, 0.3)) prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 48 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ prevalence_start_date                   <date> 2008-01-01, 2008-02-01, 2008-… #> $ prevalence_end_date                     <date> 2008-01-31, 2008-02-29, 2008-… #> $ n_cases                                 <int> 154, 147, 167, 181, 178, 152, … #> $ n_population                            <int> 4733, 4706, 4761, 4759, 4797, … #> $ prevalence                              <dbl> 0.03253750, 0.03123672, 0.0350… #> $ prevalence_95CI_lower                   <dbl> 0.02784982, 0.02663631, 0.0302… #> $ prevalence_95CI_upper                   <dbl> 0.03798338, 0.03660180, 0.0406… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"period\", \"period\", \"period\", … #> $ analysis_interval                       <chr> \"months\", \"months\", \"months\", … #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, … #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\"… #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev, ylim = c(0, NA)) prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Months\",   fullContribution = FALSE,   minCellCount = 0,   temporary = FALSE )  prev %>%   glimpse() #> Rows: 48 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ prevalence_start_date                   <date> 2008-01-01, 2008-02-01, 2008-… #> $ prevalence_end_date                     <date> 2008-01-31, 2008-02-29, 2008-… #> $ n_cases                                 <int> 154, 147, 167, 181, 178, 152, … #> $ n_population                            <int> 4733, 4706, 4761, 4759, 4797, … #> $ prevalence                              <dbl> 0.03253750, 0.03123672, 0.0350… #> $ prevalence_95CI_lower                   <dbl> 0.02784982, 0.02663631, 0.0302… #> $ prevalence_95CI_upper                   <dbl> 0.03798338, 0.03660180, 0.0406… #> $ population_obscured                     <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ cases_obscured                          <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", … #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_type                           <chr> \"period\", \"period\", \"period\", … #> $ analysis_interval                       <chr> \"months\", \"months\", \"months\", … #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, … #> $ analysis_time_point                     <chr> \"start\", \"start\", \"start\", \"st… #> $ analysis_full_contribution              <lgl> FALSE, FALSE, FALSE, FALSE, FA… #> $ analysis_min_cell_count                 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_cohort_id                   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, … #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\"… #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA, NA, NA, NA, NA… #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotPrevalence(prev,   ylim = c(0, 0.07) )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"stratified-analyses","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Stratified analyses","title":"Calculating prevalence","text":"specified multiple denominator populations results returned . example define three age groups denominator populations get three sets estimates back estimating prevalence.  specify time-varying stratifications defining denominator populations, time-invariant stratifications can include estimation stage. first need add new column denominator cohort stratification variable. ´ll add example stratification just show idea. Note, well getting stratified results ´ll also get overall results.  can also stratify multiple variables time.","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator_age_sex\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2012-01-01\")),   ageGroup = list(c(0, 39),                   c(41, 65),                   c(66, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 3 sec prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator_age_sex\",   outcomeTable = \"outcome\",   minCellCount = 0 ) #> Getting prevalence for analysis 1 of 3 #> Getting prevalence for analysis 2 of 3 #> Getting prevalence for analysis 3 of 3 #> Time taken: 0 mins and 2 secs  plotPrevalence(prev, facet = \"denominator_age_group\") cdm$denominator <- cdm$denominator %>%    mutate(group = if_else(as.numeric(subject_id)  < 500, \"first\", \"second\"))   prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   strata = \"group\",   minCellCount = 0 ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs  plotPrevalence(prev,                 facet = \"strata_level\") cdm$denominator <- cdm$denominator %>%    mutate(group_1 = if_else(as.numeric(subject_id)  < 1500, \"first\", \"second\"))  %>%    mutate(group_2 = if_else(cohort_start_date  < as.Date(\"2010-01-01\"),                             \"pre\", \"post\"))  prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   strata = list(c(\"group_1\"), # for just group_1                 c(\"group_2\"), # for just group_2                 c(\"group_1\", \"group_2\")),  # for group_1 and group_2   minCellCount = 0 ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 1 secs  plotPrevalence(prev,                 facet = \"strata_level\")"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"other-parameters","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Other parameters","title":"Calculating prevalence","text":"examples , used calculated prevalence months years, can also calculated weeks, months entire time period observed (overall). addition, user can decide whether include time intervals fully captured database (e.g., data June last study year computing period prevalence rates). default, incidence estimated intervals database captures interval (completeDatabaseIntervals=TRUE). Given can set estimatePointPrevalence() estimatePeriorPrevalence() exclude individuals based certain parameters (e.g., fullContribution), important note denominator population used compute prevalence rates might differ one calculated generateDenominatorCohortSet(). user can also set minimum number events reported, results obscured. default, results <5 occurrences blinded, minCellCount=0, results reported. 95 % confidence intervals calculated using Wilson Score method. addition, can set verbose=TRUE report progress code running. default, progress reported (verbose=FALSE).","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a04_Calculating_prevalence.html","id":"output","dir":"Articles","previous_headings":"Using estimatePointPrevalence() and estimatePeriodPrevalence()","what":"Output","title":"Calculating prevalence","text":"estimatePointPrevalence() estimatePeriorPrevalence() generate table point period prevalence rates time intervals studied combination parameters set, respectively. Similar output obtained generateDenominatorCohortSet(), table generated also include attributes, including tibbles information settings attrition. addition, set returnParticipants TRUE , can identify individuals contributed prevalence rate analysis using `participants(). example, can identify people contributing analysis 1 running ´ve used permanent tables example, can drop running analysis (note, table created start write_prefix specified creating cdm reference).","code":"prev <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"Years\",   fullContribution = c(TRUE, FALSE),   minCellCount = 0,   temporary = FALSE, # returnParticipants can only be TRUE with temporary = FALSE   returnParticipants = TRUE ) prevalenceAttrition(prev) #> # A tibble: 22 × 25 #>    analysis_id number_records number_subjects reason_id reason  excluded_records #>    <chr>       <chr>          <chr>               <int> <chr>   <chr>            #>  1 1           50000          50000                   1 Starti… NA               #>  2 1           50000          50000                   2 Missin… 0                #>  3 1           50000          50000                   3 Missin… 0                #>  4 1           50000          50000                   4 Cannot… 0                #>  5 1           18018          18018                   5 No obs… 31982            #>  6 1           18018          18018                   6 Doesn'… 0                #>  7 1           18018          18018                   7 Prior … 0                #>  8 1           18018          18018                  10 No obs… 0                #>  9 1           18018          18018                  11 Starti… NA               #> 10 1           18014          18014                  14 Not ob… 4                #> # ℹ 12 more rows #> # ℹ 19 more variables: excluded_subjects <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_type <chr>, analysis_interval <chr>, #> #   analysis_complete_database_intervals <lgl>, analysis_time_point <chr>, #> #   analysis_full_contribution <lgl>, analysis_min_cell_count <dbl>, #> #   denominator_cohort_id <int>, denominator_cohort_name <chr>, #> #   denominator_age_group <chr>, denominator_sex <chr>, … participants(prev, analysisId = 1) %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> $ subject_id         <chr> \"3\", \"24\", \"30\", \"36\", \"145\", \"184\", \"263\", \"271\", … #> $ cohort_start_date  <date> 2009-12-20, 2010-10-31, 2009-09-16, 2008-01-01, 20… #> $ cohort_end_date    <date> 2011-10-16, 2012-01-01, 2011-06-24, 2010-01-07, 20… #> $ outcome_start_date <date> 2011-02-22, 2011-11-29, 2010-04-01, 2009-12-25, 20… CDMConnector::listTables(attr(cdm, \"dbcon\"), schema = attr(cdm, \"write_schema\")) #>  [1] \"period_prev_participants1\"     \"denominator_attrition\"         #>  [3] \"denominator_count\"             \"denominator_set\"               #>  [5] \"denominator\"                   \"denominator_age_sex\"           #>  [7] \"person\"                        \"observation_period\"            #>  [9] \"denominator_age_sex_set\"       \"target\"                        #> [11] \"denominator_age_sex_count\"     \"outcome\"                       #> [13] \"denominator_age_sex_attrition\" \"cdm_source\"                    #> [15] \"vocabulary\"                    \"target_set\"                    #> [17] \"target_count\"                  \"target_attrition\"              #> [19] \"outcome_set\"                   \"outcome_count\"                 #> [21] \"outcome_attrition\" # drop tables created when instantiating denominator cohorts CDMConnector::dropTable(   cdm = cdm,   name = dplyr::starts_with(\"denominator\") ) # drop table with study participants when returnParticipants = TRUE CDMConnector::dropTable(   cdm = cdm,   name = \"period_prev_participants1\" )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Calculating incidence","text":"Incidence rates describe rate new events occur population, denominator person-time risk event period. previous vignettes seen can identify set denominator outcome cohorts. Incidence rates can calculated using time contributed denominator cohorts entry outcome cohort. number options consider calculating incidence rates. package accommodates two main parameters, including: Outcome washout: number days used ‘washout’ period end one outcome ending individual starting contribute time risk . Repeated events: Whether individuals able contribute multiple events study period contribute time first event study period.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"no-washout-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"No washout, no repetitive events","title":"Calculating incidence","text":"example outcome washout specified repetitive events allowed, individuals contribute time first event study period.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"washout-all-history-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Washout all history, no repetitive events","title":"Calculating incidence","text":"example outcome washout history repetitive events allowed. individuals contribute time first event study period, outcome prior study period (person “3”) means time risk contributed.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"some-washout-no-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Some washout, no repetitive events","title":"Calculating incidence","text":"example amount outcome washout repetitive events allowed. individuals contribute time first event study period, outcome prior study period (person “3”) means time risk contributed sufficient time passed outcome washout criteria satisfied.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"some-washout-repetitive-events","dir":"Articles","previous_headings":"Introduction","what":"Some washout, repetitive events","title":"Calculating incidence","text":"Now repetitive events allowed amount outcome washout specified. individuals contribute time first event study period, passing outcome washout requirement begin contribute time risk .","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"outcome-definition","dir":"Articles","previous_headings":"","what":"Outcome definition","title":"Calculating incidence","text":"Outcome cohorts defined externally. creating outcome cohorts estimating incidence, important recommendations defining outcome cohort calculating incidence : restrict outcome cohorts first events . impact ability exclude participants (can excluded based prior latest event) capture one event per person (option allowed package). Set appropriate cohort exit strategy. want consider multiple events per person, duration events importance, going capture subsequent events prior events yet concluded. addition, outcome washouts implemented relative cohort exit previous event. add restrictions sex, age prior history requirements. can specified identifying denominator population generateDenominatorCohortSet() function.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"using-estimateincidence","dir":"Articles","previous_headings":"","what":"Using estimateIncidence()","title":"Calculating incidence","text":"estimateIncidence() function use estimate incidence rates. demonstrate use, let´s load IncidencePrevalence package (along couple packages help subsequent plots) generate 50,000 example patients using mockIncidencePrevalenceRef() function, ´ll create denominator population without adding restrictions study period. example ’ll use permanent tables (rather temporary tables used default). Let´s first calculate incidence rates yearly basis, without allowing repetitive events  Now washout prior history still allowing repetitive events. use Inf specify use washout prior history individual.  Now ´ll set washout 180 days still allowing repetitive events  finally ´ll set washout 180 days allow repetitive events","code":"library(IncidencePrevalence) library(dplyr) library(tidyr)  cdm <- mockIncidencePrevalenceRef(   sampleSize = 50000,   outPre = 0.5 )  cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2012-01-01\")),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) #> Loading required namespace: testthat #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec  cdm$denominator %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <chr> \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"12\", \"13\", \"19\", \"… #> $ cohort_start_date    <date> 2008-01-01, 2009-12-20, 2011-04-26, 2011-10-13, … #> $ cohort_end_date      <date> 2008-08-03, 2011-10-16, 2011-07-16, 2012-01-01, … inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 0,   repeatedEvents = FALSE,   temporary = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                               <int> 7926, 7055, 6862, 6872 #> $ person_days                             <dbl> 1465281, 1285865, 1278246, 128… #> $ n_events                                <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date                    <date> 2008-01-01, 2009-01-01, 2010-0… #> $ incidence_end_date                      <date> 2008-12-31, 2009-12-31, 2010-1… #> $ person_years                            <dbl> 4011.721, 3520.507, 3499.647, … #> $ incidence_100000_pys                    <dbl> 41677.88, 48515.75, 48061.99,… #> $ incidence_100000_pys_95CI_lower         <dbl> 39703.87, 46241.92, 45792.30,… #> $ incidence_100000_pys_95CI_upper         <dbl> 43724.63, 50872.45, 50415.07, … #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_outcome_washout                <dbl> 0, 0, 0, 0 #> $ analysis_repeated_events                <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotIncidence(inc) inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = Inf,   repeatedEvents = FALSE,   temporary = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                               <int> 6832, 6822, 6850, 6872 #> $ person_days                             <dbl> 1261517, 1252799, 1277510, 128… #> $ n_events                                <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date                    <date> 2008-01-01, 2009-01-01, 2010-0… #> $ incidence_end_date                      <date> 2008-12-31, 2009-12-31, 2010-1… #> $ person_years                            <dbl> 3453.845, 3429.977, 3497.632, … #> $ incidence_100000_pys                    <dbl> 48409.81, 49796.26, 48089.68,… #> $ incidence_100000_pys_95CI_lower         <dbl> 46116.95, 47462.42, 45818.69,… #> $ incidence_100000_pys_95CI_upper         <dbl> 50787.16, 52215.16, 50444.11, … #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_repeated_events                <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ analysis_outcome_washout                <dbl> NA, NA, NA, NA #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotIncidence(inc) inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 180,   repeatedEvents = FALSE,   temporary = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                               <int> 7738, 7055, 6862, 6872 #> $ person_days                             <dbl> 1418998, 1285865, 1278246, 128… #> $ n_events                                <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date                    <date> 2008-01-01, 2009-01-01, 2010-0… #> $ incidence_end_date                      <date> 2008-12-31, 2009-12-31, 2010-1… #> $ person_years                            <dbl> 3885.005, 3520.507, 3499.647, … #> $ incidence_100000_pys                    <dbl> 43037.27, 48515.75, 48061.99,… #> $ incidence_100000_pys_95CI_lower         <dbl> 40998.87, 46241.92, 45792.30,… #> $ incidence_100000_pys_95CI_upper         <dbl> 45150.78, 50872.45, 50415.07, … #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_outcome_washout                <dbl> 180, 180, 180, 180 #> $ analysis_repeated_events                <lgl> FALSE, FALSE, FALSE, FALSE #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotIncidence(inc) inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 180,   repeatedEvents = TRUE,   temporary = FALSE )  inc %>%   glimpse() #> Rows: 4 #> Columns: 29 #> $ analysis_id                             <chr> \"1\", \"1\", \"1\", \"1\" #> $ n_persons                               <int> 7738, 7790, 7875, 7850 #> $ person_days                             <dbl> 1448414, 1454027, 1487577, 149… #> $ n_events                                <int> 1672, 1708, 1682, 1708 #> $ incidence_start_date                    <date> 2008-01-01, 2009-01-01, 2010-0… #> $ incidence_end_date                      <date> 2008-12-31, 2009-12-31, 2010-1… #> $ person_years                            <dbl> 3965.541, 3980.909, 4072.764, … #> $ incidence_100000_pys                    <dbl> 42163.22, 42904.77, 41298.74,… #> $ incidence_100000_pys_95CI_lower         <dbl> 40166.22, 40893.93, 39348.44,… #> $ incidence_100000_pys_95CI_upper         <dbl> 44233.81, 44988.92, 43320.69, … #> $ cohort_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ result_obscured                         <chr> \"FALSE\", \"FALSE\", \"FALSE\", \"FA… #> $ outcome_cohort_id                       <chr> \"1\", \"1\", \"1\", \"1\" #> $ outcome_cohort_name                     <chr> \"cohort_1\", \"cohort_1\", \"cohor… #> $ analysis_outcome_washout                <dbl> 180, 180, 180, 180 #> $ analysis_repeated_events                <lgl> TRUE, TRUE, TRUE, TRUE #> $ analysis_interval                       <chr> \"years\", \"years\", \"years\", \"ye… #> $ analysis_complete_database_intervals    <lgl> TRUE, TRUE, TRUE, TRUE #> $ denominator_cohort_id                   <int> 1, 1, 1, 1 #> $ analysis_min_cell_count                 <dbl> 5, 5, 5, 5 #> $ denominator_cohort_name                 <chr> \"Denominator cohort 1\", \"Denom… #> $ denominator_age_group                   <chr> \"0 to 150\", \"0 to 150\", \"0 to … #> $ denominator_sex                         <chr> \"Both\", \"Both\", \"Both\", \"Both\" #> $ denominator_days_prior_observation      <dbl> 0, 0, 0, 0 #> $ denominator_start_date                  <date> 2008-01-01, 2008-01-01, 2008-0… #> $ denominator_end_date                    <date> 2012-01-01, 2012-01-01, 2012-0… #> $ denominator_target_cohort_definition_id <dbl> NA, NA, NA, NA #> $ denominator_target_cohort_name          <lgl> NA, NA, NA, NA #> $ cdm_name                                <chr> \"test_database\", \"test_databas…  plotIncidence(inc)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"stratified-analyses","dir":"Articles","previous_headings":"Using estimateIncidence()","what":"Stratified analyses","title":"Calculating incidence","text":"prevalence. specified multiple denominator populations results returned . example define three age groups denominator populations get three sets estimates back estimating incidence  , prevalence specify time-varying stratifications defining denominator populations, time-invariant stratifications can include estimation stage.","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator_age_sex\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2012-01-01\")),   ageGroup = list(c(0, 39),                   c(41, 65),                   c(66, 150)),   sex = \"Both\",   daysPriorObservation = 0 ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 3 sec inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator_age_sex\",   outcomeTable = \"outcome\",   interval = \"years\",   outcomeWashout = 180,   repeatedEvents = TRUE,   temporary = FALSE ) #> Getting incidence for analysis 1 of 3 #> Getting incidence for analysis 2 of 3 #> Getting incidence for analysis 3 of 3 #> Overall time taken: 0 mins and 2 secs  plotIncidence(inc, facet = \"denominator_age_group\") cdm$denominator <- cdm$denominator %>%    mutate(group = if_else(as.numeric(subject_id)  < 500, \"first\", \"second\"))   inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   strata = list(\"group\"),   outcomeWashout = 180,   repeatedEvents = TRUE ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs  plotIncidence(inc,                 facet = \"strata_level\") cdm$denominator <- cdm$denominator %>%    mutate(group_1 = if_else(as.numeric(subject_id)  < 1500, \"first\", \"second\"))  %>%    mutate(group_2 = if_else(cohort_start_date  < as.Date(\"2010-01-01\"),                             \"pre\", \"post\"))  inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   strata = list(c(\"group_1\"), # for just group_1                 c(\"group_2\"), # for just group_2                 c(\"group_1\", \"group_2\")),  # for group_1 and group_2  outcomeWashout = 180,   repeatedEvents = TRUE ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs  plotIncidence(inc,                 facet = \"strata_level\")"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"other-parameters","dir":"Articles","previous_headings":"Using estimateIncidence() > Stratified analyses","what":"Other parameters","title":"Calculating incidence","text":"examples , used calculated incidence rates months years, can also calculated weeks, months, quarters, entire study time period. addition, can decide whether include time intervals fully captured database (e.g., data June last study year computing yearly incidence rates). default, incidence estimated intervals denominator cohort captures interval (completeDatabaseIntervals=TRUE). Given can set estimateIncidence() exclude individuals based parameters (e.g., outcomeWashout), important note denominator population used compute incidence rates might differ one calculated generateDenominatorCohortSet(). user can also set minimum number events reported, results obscured. default, results <5 occurrences blinded, minCellCount=0, results reported. 95 % confidence intervals calculated using exact method. can set verbose=TRUE report progress code running. default, progress reported (verbose=FALSE).","code":"inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = c(\"weeks\"),   completeDatabaseIntervals = FALSE,   outcomeWashout = 180,   repeatedEvents = TRUE,   minCellCount = 0,   temporary = FALSE ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 3 secs"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/articles/a05_Calculating_incidence.html","id":"output","dir":"Articles","previous_headings":"Using estimateIncidence() > Stratified analyses","what":"Output","title":"Calculating incidence","text":"estimateIncidence() generate table incidence rates time intervals studied combination parameters set. Similar output obtained generateDenominatorCohortSet(), table generated also associated attributes settings attrition. incidence, set returnParticipants TRUE, can identify individuals contributed analysis using `participants(). example, can identify people contributing analysis 1 running ;ve used permanent tables example, can drop running analysis.","code":"inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = c(\"Years\"),   outcomeWashout = c(0, 180),   repeatedEvents = TRUE,   temporary = FALSE,   returnParticipants = TRUE ) incidenceAttrition(inc) #> # A tibble: 22 × 24 #>    analysis_id number_records number_subjects reason_id reason  excluded_records #>    <chr>       <chr>          <chr>               <int> <chr>   <chr>            #>  1 1           50000          50000                   1 Starti… NA               #>  2 1           50000          50000                   2 Missin… 0                #>  3 1           50000          50000                   3 Missin… 0                #>  4 1           50000          50000                   4 Cannot… 0                #>  5 1           18018          18018                   5 No obs… 31982            #>  6 1           18018          18018                   6 Doesn'… 0                #>  7 1           18018          18018                   7 Prior … 0                #>  8 1           18018          18018                  10 No obs… 0                #>  9 1           25886          18018                  11 Starti… NA               #> 10 1           24509          18018                  12 Exclud… 1377             #> # ℹ 12 more rows #> # ℹ 18 more variables: excluded_subjects <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_outcome_washout <dbl>, #> #   analysis_repeated_events <lgl>, analysis_interval <chr>, #> #   analysis_complete_database_intervals <lgl>, denominator_cohort_id <int>, #> #   analysis_min_cell_count <dbl>, denominator_cohort_name <chr>, #> #   denominator_age_group <chr>, denominator_sex <chr>, … participants(inc, analysisId = 1) %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #> $ subject_id         <chr> \"6\", \"75\", \"163\", \"185\", \"391\", \"473\", \"527\", \"623\"… #> $ cohort_start_date  <date> 2011-10-13, 2008-01-01, 2009-01-16, 2009-02-24, 20… #> $ cohort_end_date    <date> 2012-01-01, 2009-06-25, 2011-01-31, 2009-07-21, 20… #> $ outcome_start_date <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… CDMConnector::listTables(attr(cdm, \"dbcon\")) #>  [1] \"cdm_source\"                    \"denominator\"                   #>  [3] \"denominator_age_sex\"           \"denominator_age_sex_attrition\" #>  [5] \"denominator_age_sex_count\"     \"denominator_age_sex_set\"       #>  [7] \"denominator_attrition\"         \"denominator_count\"             #>  [9] \"denominator_set\"               \"inc_participants1\"             #> [11] \"observation_period\"            \"outcome\"                       #> [13] \"outcome_attrition\"             \"outcome_count\"                 #> [15] \"outcome_set\"                   \"person\"                        #> [17] \"target\"                        \"target_attrition\"              #> [19] \"target_count\"                  \"target_set\"                    #> [21] \"vocabulary\" CDMConnector::dropTable(cdm = cdm, name = starts_with(\"denominator\")) CDMConnector::dropTable(cdm = cdm, name = starts_with(\"inc_participants\")) CDMConnector::listTables(attr(cdm, \"dbcon\")) #>  [1] \"cdm_source\"         \"observation_period\" \"outcome\"            #>  [4] \"outcome_attrition\"  \"outcome_count\"      \"outcome_set\"        #>  [7] \"person\"             \"target\"             \"target_attrition\"   #> [10] \"target_count\"       \"target_set\"         \"vocabulary\""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Edward Burn. Author, maintainer. Berta Raventos. Author. Marti Catala. Author. Mike Du. Contributor. Yuchen Guo. Contributor. Adam Black. Contributor. Ger Inberg. Contributor. Kim Lopez. Contributor.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Burn E, Raventos B, Catala M (2023). IncidencePrevalence: Estimate Incidence Prevalence using OMOP Common Data Model. R package version 0.6.0, https://darwin-eu.github.io/IncidencePrevalence/.","code":"@Manual{,   title = {IncidencePrevalence: Estimate Incidence and Prevalence using the OMOP Common Data Model},   author = {Edward Burn and Berta Raventos and Marti Catala},   year = {2023},   note = {R package version 0.6.0},   url = {https://darwin-eu.github.io/IncidencePrevalence/}, }"},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Estimate Incidence and Prevalence using the OMOP Common Data Model","text":"IncidencePrevalence contains functions estimating population-level incidence prevalence using OMOP common data model. information package please see paper Pharmacoepidemiology Drug Safety. Raventós, B, Català, M, Du, M, et al. IncidencePrevalence: R package calculate population-level incidence rates prevalence using OMOP common data model. Pharmacoepidemiol Drug Saf. 2023; 1-11. doi: 10.1002/pds.5717 find package useful supporting research study, please consider citing paper.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"package-installation","dir":"","previous_headings":"","what":"Package installation","title":"Estimate Incidence and Prevalence using the OMOP Common Data Model","text":"can install latest version IncidencePrevalence CRAN: github:","code":"install.packages(\"CDMConnector\") install.packages(\"remotes\") remotes::install_github(\"darwin-eu/IncidencePrevalence\")"},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"create-a-reference-to-data-in-the-omop-cdm-format","dir":"","previous_headings":"Example usage","what":"Create a reference to data in the OMOP CDM format","title":"Estimate Incidence and Prevalence using the OMOP Common Data Model","text":"IncidencePrevalence package designed work data OMOP CDM format, first step create reference data using CDMConnector package. Creating connection Postgres database example look like: see create reference database please consult CDMConnector package documentation. example though ´ll work simulated data, ’ll generate example cdm reference like :","code":"library(CDMConnector) library(IncidencePrevalence) con <- DBI::dbConnect(RPostgres::Postgres(),   dbname = Sys.getenv(\"CDM5_POSTGRESQL_DBNAME\"),   host = Sys.getenv(\"CDM5_POSTGRESQL_HOST\"),   user = Sys.getenv(\"CDM5_POSTGRESQL_USER\"),   password = Sys.getenv(\"CDM5_POSTGRESQL_PASSWORD\") )  cdm <- CDMConnector::cdm_from_con(con,   cdm_schema = Sys.getenv(\"CDM5_POSTGRESQL_CDM_SCHEMA\"),   write_schema = Sys.getenv(\"CDM5_POSTGRESQL_RESULT_SCHEMA\") ) cdm <- mockIncidencePrevalenceRef(sampleSize = 10000,                                    outPre = 0.3,                                    minOutcomeDays = 365,                                    maxOutcomeDays = 3650)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"identify-a-denominator-cohort","dir":"","previous_headings":"Example usage","what":"Identify a denominator cohort","title":"Estimate Incidence and Prevalence using the OMOP Common Data Model","text":"identify set denominator cohorts can use generateDenominatorCohortSet function. want identify denominator populations study period 2008 2018 180 days prior history (observation time database). also wish consider multiple age groups (0 64, 65 100) multiple sex criteria (one cohort males, one females, one sexes included). give us six denominator cohorts cohorts typical OMOP CDM structure","code":"cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2018-01-01\")),   ageGroup = list(     c(0, 64),     c(65, 100)   ),   sex = c(\"Male\", \"Female\", \"Both\"),   daysPriorObservation = 180 ) cohortSet(cdm$denominator) #> # A tibble: 6 × 9 #>   cohort_definition_id cohort_name        age_group sex   days_prior_observation #>                  <int> <chr>              <chr>     <chr>                  <dbl> #> 1                    1 Denominator cohor… 0 to 64   Male                     180 #> 2                    2 Denominator cohor… 0 to 64   Fema…                    180 #> 3                    3 Denominator cohor… 0 to 64   Both                     180 #> 4                    4 Denominator cohor… 65 to 100 Male                     180 #> 5                    5 Denominator cohor… 65 to 100 Fema…                    180 #> 6                    6 Denominator cohor… 65 to 100 Both                     180 #> # ℹ 4 more variables: start_date <date>, end_date <date>, #> #   target_cohort_definition_id <dbl>, target_cohort_name <lgl> cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB 0.8.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 3          2008-01-01        2008-04-02      #>  2                    1 4          2009-12-16        2010-01-03      #>  3                    1 17         2012-07-30        2014-09-09      #>  4                    1 25         2014-06-27        2015-10-01      #>  5                    1 26         2008-05-27        2009-02-06      #>  6                    1 29         2012-07-12        2014-08-05      #>  7                    1 31         2008-01-01        2008-12-15      #>  8                    1 37         2016-07-28        2016-07-31      #>  9                    1 48         2017-09-12        2017-10-13      #> 10                    1 55         2015-04-13        2017-04-09      #> # ℹ more rows"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/index.html","id":"estimating-incidence-and-prevalence","dir":"","previous_headings":"Example usage","what":"Estimating incidence and prevalence","title":"Estimate Incidence and Prevalence using the OMOP Common Data Model","text":"well denominator cohort, outcome cohort need identified. Defining outcome cohorts done outside IncdidencePrevalence package mock data already includes outcome cohort. Now identified denominator population, can calculate incidence prevalence . Note, example cdm reference already outcome cohort defined. example ´ll estimate incidence yearly basis, allowing individuals multiple events outcome washout 180 days. also require complete database intervals included, mean database must individuals observed throughout year year included analysis. Note, also specify minimum cell count 5, estimates obscured.  also estimate point prevalence, start calendar year like :  annual period prevalence require complete database intervals , addition, include people observed data full year:","code":"cdm$outcome #> # Source:   table<outcome> [?? x 4] #> # Database: DuckDB 0.8.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>    <chr>                <chr>      <date>            <date>          #>  1 1                    1          2016-05-20        2018-02-27      #>  2 1                    2          2005-02-27        2006-12-07      #>  3 1                    7          2012-05-12        2014-02-19      #>  4 1                    14         2009-09-19        2011-06-29      #>  5 1                    28         2014-03-11        2015-12-19      #>  6 1                    32         2008-06-25        2010-04-04      #>  7 1                    40         2014-07-09        2016-04-17      #>  8 1                    43         2016-11-01        2018-08-11      #>  9 1                    46         2008-04-30        2010-02-07      #> 10 1                    51         2018-05-18        2020-02-25      #> # ℹ more rows inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   repeatedEvents = TRUE,   outcomeWashout = 180,   completeDatabaseIntervals = TRUE,   minCellCount = 5 ) plotIncidence(inc, facet = c(\"denominator_age_group\", \"denominator_sex\")) prev_point <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   timePoint = \"start\",   minCellCount = 5 ) plotPrevalence(prev_point, facet = c(\"denominator_age_group\", \"denominator_sex\")) prev_period <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"years\",   completeDatabaseIntervals = TRUE,   fullContribution = TRUE,   minCellCount = 5 ) plotPrevalence(prev_period, facet = c(\"denominator_age_group\", \"denominator_sex\"))"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/IncidencePrevalence-package.html","id":null,"dir":"Reference","previous_headings":"","what":"IncidencePrevalence: Estimate Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","title":"IncidencePrevalence: Estimate Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","text":"Calculate incidence prevalence using data mapped Observational Medical Outcomes Partnership (OMOP) common data model. Incidence prevalence can estimated total population database stratification cohort.","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/IncidencePrevalence-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"IncidencePrevalence: Estimate Incidence and Prevalence using the OMOP Common Data Model — IncidencePrevalence-package","text":"Maintainer: Edward Burn edward.burn@ndorms.ox.ac.uk (ORCID) Authors: Berta Raventos braventos@idiapjgol.info (ORCID) Marti Catala marti.catalasabate@ndorms.ox.ac.uk (ORCID) contributors: Mike Du mike.du@ndorms.ox.ac.uk (ORCID) [contributor] Yuchen Guo yuchen.guo@ndorms.ox.ac.uk (ORCID) [contributor] Adam Black black@ohdsi.org (ORCID) [contributor] Ger Inberg g.inberg@erasmusmc.nl (ORCID) [contributor] Kim Lopez kim.lopez@spc.ox.ac.uk (ORCID) [contributor]","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"Run benchmark incidence prevalence analyses","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"","code":"benchmarkIncidencePrevalence(   cdm,   cohortDateRange = as.Date(c(NA, NA)),   returnParticipants = FALSE,   nOutcomes = 1,   prevOutcomes = 0.25,   analysisType = \"all\",   outputFolder = NULL,   fileName = NULL )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"cdm CDM reference object cohortDateRange Two dates. first indicating earliest cohort start date second indicating latest possible cohort end date. NULL first date set missing, earliest observation_start_date observation_period table used former.  NULL second date set missing, latest observation_end_date observation_period table used latter. returnParticipants Whether return participants (requires temporary FALSE) nOutcomes integer specifying number outcomes create denominator cohort prevOutcomes array integers prevalence outcomes population (%). user wants outcomes prevalence, can also provide single integer analysisType string following: \"\", \"incidence\", \"prevalence\" outputFolder Folder save results CSV fileName Name given CSV results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"tibble time taken different analyses","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/benchmarkIncidencePrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run benchmark of incidence and prevalence analyses — benchmarkIncidencePrevalence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(   sampleSize = 10000,   earliestObservationStartDate = as.Date(\"2010-01-01\"),   latestObservationStartDate = as.Date(\"2018-01-01\") ) timings <- IncidencePrevalence::benchmarkIncidencePrevalence(cdm) #> Loading required namespace: testthat #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 6 sec #> Getting prevalence for analysis 1 of 8 #> Getting prevalence for analysis 2 of 8 #> Getting prevalence for analysis 3 of 8 #> Getting prevalence for analysis 4 of 8 #> Getting prevalence for analysis 5 of 8 #> Getting prevalence for analysis 6 of 8 #> Getting prevalence for analysis 7 of 8 #> Getting prevalence for analysis 8 of 8 #> Time taken: 0 mins and 6 secs #> Getting prevalence for analysis 1 of 8 #> Getting prevalence for analysis 2 of 8 #> Getting prevalence for analysis 3 of 8 #> Getting prevalence for analysis 4 of 8 #> Getting prevalence for analysis 5 of 8 #> Getting prevalence for analysis 6 of 8 #> Getting prevalence for analysis 7 of 8 #> Getting prevalence for analysis 8 of 8 #> Time taken: 0 mins and 13 secs #> Getting prevalence for analysis 1 of 8 #> Getting prevalence for analysis 2 of 8 #> Getting prevalence for analysis 3 of 8 #> Getting prevalence for analysis 4 of 8 #> Getting prevalence for analysis 5 of 8 #> Getting prevalence for analysis 6 of 8 #> Getting prevalence for analysis 7 of 8 #> Getting prevalence for analysis 8 of 8 #> Time taken: 0 mins and 8 secs #> Getting prevalence for analysis 1 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 2 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 3 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 4 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 5 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 6 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 7 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Getting prevalence for analysis 8 of 8 #> Warning: Your SQL query is over 10,000 characters which can cause issues on some database platforms! #> Try calling computeQuery earlier in your pipeline. #> Time taken: 0 mins and 21 secs #> Getting incidence for analysis 1 of 8 #> Getting incidence for analysis 2 of 8 #> Getting incidence for analysis 3 of 8 #> Getting incidence for analysis 4 of 8 #> Getting incidence for analysis 5 of 8 #> Getting incidence for analysis 6 of 8 #> Getting incidence for analysis 7 of 8 #> Getting incidence for analysis 8 of 8 #> Overall time taken: 0 mins and 5 secs #> Getting incidence for analysis 1 of 8 #> Getting incidence for analysis 2 of 8 #> Getting incidence for analysis 3 of 8 #> Getting incidence for analysis 4 of 8 #> Getting incidence for analysis 5 of 8 #> Getting incidence for analysis 6 of 8 #> Getting incidence for analysis 7 of 8 #> Getting incidence for analysis 8 of 8 #> Overall time taken: 0 mins and 14 secs # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindIncidenceEstimates.html","id":null,"dir":"Reference","previous_headings":"","what":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","title":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","text":"Bind multiple incidence estimates single set estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindIncidenceEstimates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","text":"","code":"bindIncidenceEstimates(...)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindIncidenceEstimates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","text":"... Multiple incidence estimates, generated estimateIncidence()","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindIncidenceEstimates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","text":"Bound incidence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindIncidenceEstimates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bind multiple incidence estimates into a single set of estimates — bindIncidenceEstimates","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\" ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec inc1 <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs inc2 <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs incCombined <- bindIncidenceEstimates(inc1, inc2) # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindPrevalenceEstimates.html","id":null,"dir":"Reference","previous_headings":"","what":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","title":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","text":"Bind multiple prevalence estimates single set estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindPrevalenceEstimates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","text":"","code":"bindPrevalenceEstimates(...)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindPrevalenceEstimates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","text":"... Multiple prevalence estimates, generated estimatePeriodPrevalence() estimatePointPrevalence()","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindPrevalenceEstimates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","text":"Bound prevalence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/bindPrevalenceEstimates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bind multiple prevalence estimates into a single set of estimates — bindPrevalenceEstimates","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\" ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec prev1 <- estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs prev2 <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs prevCombined <- bindPrevalenceEstimates(prev1, prev2) # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect population incidence estimates — estimateIncidence","title":"Collect population incidence estimates — estimateIncidence","text":"Collect population incidence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect population incidence estimates — estimateIncidence","text":"","code":"estimateIncidence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   interval = \"years\",   completeDatabaseIntervals = TRUE,   outcomeWashout = Inf,   repeatedEvents = FALSE,   minCellCount = 5,   strata = list(),   includeOverallStrata = TRUE,   temporary = TRUE,   returnParticipants = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect population incidence estimates — estimateIncidence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. interval Time intervals incidence estimated. Can \"weeks\", \"months\", \"quarters\", \"years\", \"overall\". ISO weeks used weeks. Calendar months, quarters, years can used, overall estimate entire time period observed (earliest cohort start last cohort end) can also estimated. one option chosen results estimated chosen interval. completeDatabaseIntervals TRUE/ FALSE. TRUE, incidence estimated intervals denominator cohort captures interval. outcomeWashout number days used 'washout' period end one outcome individual starting contribute time risk. Inf, time can contributed event occurred (whether study period occurring beforehand). repeatedEvents TRUE/ FALSE. TRUE, individual able contribute multiple events study period (time present outcome cohort subsequent washout excluded). FALSE, individual contribute time first event study period. minCellCount minimum number events reported, results obscured. 0, results reported. strata Variables added denominator cohort table stratify estimates. includeOverallStrata Whether include overall result well strata specific results (strata specified). temporary TRUE, temporary tables used throughout. FALSE, permanent tables created write_schema cdm. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collect population incidence estimates — estimateIncidence","text":"Incidence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimateIncidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collect population incidence estimates — estimateIncidence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2018-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate period prevalence — estimatePeriodPrevalence","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"Estimate period prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"","code":"estimatePeriodPrevalence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   interval = \"years\",   completeDatabaseIntervals = TRUE,   fullContribution = FALSE,   strata = list(),   includeOverallStrata = TRUE,   minCellCount = 5,   temporary = TRUE,   returnParticipants = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. interval Time intervals period prevalence estimated. can \"weeks\", \"months\", \"quarters\", \"years\", \"overall\". ISO weeks used weeks. Calendar months, quarters, years can used period. one option chosen results estimated chosen interval. completeDatabaseIntervals TRUE/ FALSE. TRUE, prevalence estimated intervals database captures interval (based earliest latest observation period start dates, respectively). fullContribution TRUE/ FALSE. TRUE, individuals included database entire interval interest. FALSE required present one day interval order contribute. strata Variables added denominator cohort table stratify estimates. includeOverallStrata Whether include overall result well strata specific results (strata specified). minCellCount Minimum number events report- results lower obscured. NULL results reported. temporary TRUE, temporary tables used throughout. FALSE, permanent tables created write_schema cdm. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"Period prevalence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePeriodPrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate period prevalence — estimatePeriodPrevalence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2018-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec estimatePeriodPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"months\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 1 secs #> # A tibble: 120 × 29 #>    analysis_id prevalence_start_date prevalence_end_date n_cases n_population #>    <chr>       <date>                <date>                <int>        <int> #>  1 1           2008-01-01            2008-01-31               85         1018 #>  2 1           2008-02-01            2008-02-29               54         1000 #>  3 1           2008-03-01            2008-03-31               73         1023 #>  4 1           2008-04-01            2008-04-30               59         1002 #>  5 1           2008-05-01            2008-05-31               54         1005 #>  6 1           2008-06-01            2008-06-30               59          990 #>  7 1           2008-07-01            2008-07-31               67          975 #>  8 1           2008-08-01            2008-08-31               72          989 #>  9 1           2008-09-01            2008-09-30               62          986 #> 10 1           2008-10-01            2008-10-31               69          975 #> # ℹ 110 more rows #> # ℹ 24 more variables: prevalence <dbl>, prevalence_95CI_lower <dbl>, #> #   prevalence_95CI_upper <dbl>, population_obscured <chr>, #> #   cases_obscured <chr>, result_obscured <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_type <chr>, analysis_interval <chr>, #> #   analysis_complete_database_intervals <lgl>, analysis_time_point <chr>, #> #   analysis_full_contribution <lgl>, analysis_min_cell_count <dbl>, … # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate point prevalence — estimatePointPrevalence","title":"Estimate point prevalence — estimatePointPrevalence","text":"Estimate point prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate point prevalence — estimatePointPrevalence","text":"","code":"estimatePointPrevalence(   cdm,   denominatorTable,   outcomeTable,   denominatorCohortId = NULL,   outcomeCohortId = NULL,   interval = \"years\",   timePoint = \"start\",   strata = list(),   includeOverallStrata = TRUE,   minCellCount = 5,   temporary = TRUE,   returnParticipants = FALSE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate point prevalence — estimatePointPrevalence","text":"cdm CDM reference object denominatorTable cohort table set denominator cohorts (example, created using generateDenominatorCohortSet() function). outcomeTable cohort table cdm reference containing set outcome cohorts. denominatorCohortId cohort definition ids denominator cohorts interest. NULL cohorts considered analysis. outcomeCohortId cohort definition ids outcome cohorts interest. NULL cohorts considered analysis. interval Time intervals period prevalence estimated. Can \"weeks\", \"months\", \"quarters\", \"years\". ISO weeks used weeks. Calendar months, quarters, years can used period. one option chosen results estimated chosen interval. timePoint compute point prevalence strata Variables added denominator cohort table stratify estimates. includeOverallStrata Whether include overall result well strata specific results (strata specified). minCellCount Minimum number events report- results lower obscured. NULL results reported. temporary TRUE, temporary tables used throughout. FALSE, permanent tables created write_schema cdm. returnParticipants Either TRUE FALSE. TRUE references participants analysis returned allowing analysis. Note, using permanent tables returnParticipants TRUE, one table per analysis kept cdm write schema.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate point prevalence — estimatePointPrevalence","text":"Point prevalence estimates","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/estimatePointPrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate point prevalence — estimatePointPrevalence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2018-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"months\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 1 secs #> # A tibble: 121 × 29 #>    analysis_id prevalence_start_date prevalence_end_date n_cases n_population #>    <chr>       <date>                <date>                <int>        <int> #>  1 1           2008-01-01            2008-01-01               16          960 #>  2 1           2008-02-01            2008-02-01               17          955 #>  3 1           2008-03-01            2008-03-01                7          958 #>  4 1           2008-04-01            2008-04-01               12          960 #>  5 1           2008-05-01            2008-05-01               NA          950 #>  6 1           2008-06-01            2008-06-01                9          942 #>  7 1           2008-07-01            2008-07-01               10          929 #>  8 1           2008-08-01            2008-08-01               11          923 #>  9 1           2008-09-01            2008-09-01               10          928 #> 10 1           2008-10-01            2008-10-01                7          941 #> # ℹ 111 more rows #> # ℹ 24 more variables: prevalence <dbl>, prevalence_95CI_lower <dbl>, #> #   prevalence_95CI_upper <dbl>, population_obscured <chr>, #> #   cases_obscured <chr>, result_obscured <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_type <chr>, analysis_interval <chr>, #> #   analysis_complete_database_intervals <lgl>, analysis_time_point <chr>, #> #   analysis_full_contribution <lgl>, analysis_min_cell_count <dbl>, … # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":null,"dir":"Reference","previous_headings":"","what":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"Export IncidencePrevalence results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"","code":"exportIncidencePrevalenceResults(resultList, zipName, outputFolder)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"resultList Named list results estimateIncidence, estimatePointPrevalence, estimatePeriodPrevalence zipName name give zip folder outputFolder directory save zip folder containing results set CSV files","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"zip folder results saved outputFolder","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/exportIncidencePrevalenceResults.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Export IncidencePrevalence results — exportIncidencePrevalenceResults","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\" ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs exportIncidencePrevalenceResults(   resultList = list(\"prevalence\" = prev),   zipName = \"test\",   outputFolder = tempdir() ) # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify a set of denominator populations — generateDenominatorCohortSet","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"generateDenominatorCohortSet() creates set cohorts can used denominator population analyses incidence, using estimateIncidence(), prevalence, using estimatePointPrevalence() estimatePeriodPrevalence().","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"","code":"generateDenominatorCohortSet(   cdm,   name,   cohortDateRange = as.Date(c(NA, NA)),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0,   requirementInteractions = TRUE,   overwrite = TRUE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"cdm CDM reference object name Name cohort table created. cohortDateRange Two dates. first indicating earliest cohort start date second indicating latest possible cohort end date. NULL first date set missing, earliest observation_start_date observation_period table used former.  NULL second date set missing, latest observation_end_date observation_period table used latter. ageGroup list age groups cohorts generated. value list(c(0,17), c(18,30)) , example, lead creation cohorts aged 0 17, 18 30. example individual turning 18 time period appear cohorts (leaving first cohort day 18th birthday entering second day 18th birthday). sex Sex cohorts. can one : \"Male\", \"Female\", \"\". daysPriorObservation number days prior observation observed database required individual start contributing time cohort. requirementInteractions TRUE, cohorts created combinations ageGroup, sex, daysPriorObservation. FALSE, first value specified factors used. Consequently, order values matters requirementInteractions FALSE. overwrite Whether overwrite existing table name","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"cohort reference","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateDenominatorCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify a set of denominator populations — generateDenominatorCohortSet","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   cohortDateRange = as.Date(c(\"2008-01-01\", \"2020-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 3          2008-01-01        2008-04-02      #>  2                    1 4          2009-06-19        2010-01-03      #>  3                    1 6          2012-10-31        2012-11-12      #>  4                    1 7          2011-03-29        2012-09-30      #>  5                    1 8          2016-09-11        2018-04-03      #>  6                    1 9          2019-02-21        2020-01-01      #>  7                    1 10         2015-02-05        2017-01-13      #>  8                    1 11         2018-12-04        2020-01-01      #>  9                    1 12         2016-02-19        2017-04-09      #> 10                    1 13         2008-01-01        2009-03-30      #> # ℹ more rows # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateTargetDenominatorCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","title":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","text":"generateTargetDenominatorCohortSet() creates set cohorts can used denominator population analyses incidence, using estimateIncidence(), prevalence, using estimatePointPrevalence() estimatePeriodPrevalence().","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateTargetDenominatorCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","text":"","code":"generateTargetDenominatorCohortSet(   cdm,   name,   targetCohortTable,   targetCohortId = NULL,   cohortDateRange = as.Date(c(NA, NA)),   ageGroup = list(c(0, 150)),   sex = \"Both\",   daysPriorObservation = 0,   requirementInteractions = TRUE,   overwrite = TRUE )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateTargetDenominatorCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","text":"cdm CDM reference object name Name cohort table created. targetCohortTable cohort table cdm reference use limit cohort entry exit (individuals contributing cohort contributing cohort target table). targetCohortId cohort definition id cohort interest target table. targetCohortTable specified, single targetCohortId must also specified. cohortDateRange Two dates. first indicating earliest cohort start date second indicating latest possible cohort end date. NULL first date set missing, earliest observation_start_date observation_period table used former.  NULL second date set missing, latest observation_end_date observation_period table used latter. ageGroup list age groups cohorts generated. value list(c(0,17), c(18,30)) , example, lead creation cohorts aged 0 17, 18 30. example individual turning 18 time period appear cohorts (leaving first cohort day 18th birthday entering second day 18th birthday). sex Sex cohorts. can one : \"Male\", \"Female\", \"\". daysPriorObservation number days prior observation observed database required individual start contributing time cohort. requirementInteractions TRUE, cohorts created combinations ageGroup, sex, daysPriorObservation. FALSE, first value specified factors used. Consequently, order values matters requirementInteractions FALSE. overwrite Whether overwrite existing table name","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateTargetDenominatorCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","text":"cohort reference","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/generateTargetDenominatorCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify a set of denominator populations using a target cohort — generateTargetDenominatorCohortSet","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateTargetDenominatorCohortSet(   cdm = cdm,   name = \"denominator\",   targetCohortTable = \"target\",   cohortDateRange = as.Date(c(\"2008-01-01\", \"2020-01-01\")) ) #> ℹ Creating denominator cohorts: target cohort id 1 #> ✔ Cohorts created in 0 min and 3 sec cdm$denominator #> # Source:   table<denominator> [?? x 4] #> # Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int> <chr>      <date>            <date>          #>  1                    1 6          2012-10-31        2012-11-12      #>  2                    1 7          2011-03-29        2012-09-30      #>  3                    1 8          2016-09-11        2018-04-03      #>  4                    1 9          2019-02-21        2020-01-01      #>  5                    1 10         2015-02-05        2017-01-13      #>  6                    1 11         2018-12-04        2020-01-01      #>  7                    1 15         2011-05-21        2014-01-25      #>  8                    1 16         2010-11-09        2011-09-08      #>  9                    1 17         2012-02-01        2014-09-09      #> 10                    1 21         2016-07-08        2017-02-27      #> # ℹ more rows # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceAttrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Attrition associated with an incidence analysis — incidenceAttrition","title":"Attrition associated with an incidence analysis — incidenceAttrition","text":"Attrition associated incidence analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceAttrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Attrition associated with an incidence analysis — incidenceAttrition","text":"","code":"incidenceAttrition(result)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceAttrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Attrition associated with an incidence analysis — incidenceAttrition","text":"result Result get attrition","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceAttrition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Attrition associated with an incidence analysis — incidenceAttrition","text":"tibble counts reasons attrition.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceAttrition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Attrition associated with an incidence analysis — incidenceAttrition","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm <- generateDenominatorCohortSet(cdm, name = \"denominator\") #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs incidenceAttrition(inc) #> # A tibble: 11 × 24 #>    analysis_id number_records number_subjects reason_id reason  excluded_records #>    <chr>       <chr>          <chr>               <int> <chr>   <chr>            #>  1 1           200            200                     1 Starti… NA               #>  2 1           200            200                     2 Missin… 0                #>  3 1           200            200                     3 Missin… 0                #>  4 1           200            200                     4 Cannot… 0                #>  5 1           200            200                     5 No obs… 0                #>  6 1           200            200                     6 Doesn'… 0                #>  7 1           200            200                     7 Prior … 0                #>  8 1           200            200                    10 No obs… 0                #>  9 1           400            200                    11 Starti… NA               #> 10 1           200            200                    12 Exclud… 200              #> 11 1           200            200                    14 Not ob… 0                #> # ℹ 18 more variables: excluded_subjects <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_repeated_events <lgl>, #> #   analysis_interval <chr>, analysis_complete_database_intervals <lgl>, #> #   denominator_cohort_id <int>, analysis_outcome_washout <dbl>, #> #   analysis_min_cell_count <dbl>, denominator_cohort_name <chr>, #> #   denominator_age_group <chr>, denominator_sex <chr>, #> #   denominator_days_prior_observation <dbl>, denominator_start_date <date>, … # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Settings associated with an incidence analysis — incidenceSet","title":"Settings associated with an incidence analysis — incidenceSet","text":"Settings associated incidence analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Settings associated with an incidence analysis — incidenceSet","text":"","code":"incidenceSet(result)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Settings associated with an incidence analysis — incidenceSet","text":"result Result get settings","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Settings associated with an incidence analysis — incidenceSet","text":"tibble settings used estimating incidence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/incidenceSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Settings associated with an incidence analysis — incidenceSet","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm <- generateDenominatorCohortSet(cdm, name = \"denominator\") #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs incidenceSet(inc) #> NULL # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"Generate example subset OMOP CDM estimating incidence prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"","code":"mockIncidencePrevalenceRef(   personTable = NULL,   observationPeriodTable = NULL,   targetCohortTable = NULL,   outcomeTable = NULL,   sampleSize = 1,   outPre = 1,   seed = 444,   ageBeta = NULL,   genderBeta = NULL,   intercept = NULL,   earliestDateOfBirth = NULL,   latestDateOfBirth = NULL,   earliestObservationStartDate = NULL,   latestObservationStartDate = NULL,   minDaysToObservationEnd = NULL,   maxDaysToObservationEnd = NULL,   minOutcomeDays = 1,   maxOutcomeDays = 10,   maxOutcomes = 1 )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"personTable tibble format person table. observationPeriodTable tibble format observation period table. targetCohortTable tibble format cohort table can used stratification outcomeTable tibble format cohort table can used outcomes sampleSize number unique patients. outPre fraction patients event. seed seed simulating data set. Use seed get data set. ageBeta beta standardised age logistic regression outcome model. genderBeta beta gender flag logistic regression outcome model. intercept beta intercept logistic regression outcome model. earliestDateOfBirth earliest date birth patient person table. latestDateOfBirth latest date birth patient person table. earliestObservationStartDate earliest observation start date patient format. latestObservationStartDate latest observation start date patient format. minDaysToObservationEnd minimum number days observational integer. maxDaysToObservationEnd maximum number days observation period integer. minOutcomeDays minimum number days outcome period default set 1. maxOutcomeDays maximum number days outcome period default set 10. maxOutcomes maximum possible number outcomes per person can default set 1.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"cdm reference duckdb database mock data.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/mockIncidencePrevalenceRef.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate example subset of the OMOP CDM for\nestimating incidence and prevalence — mockIncidencePrevalenceRef","text":"","code":"cdm <- mockIncidencePrevalenceRef(sampleSize = 100) cdm #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, cdm_source, vocabulary, target, outcome"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":null,"dir":"Reference","previous_headings":"","what":"Participants contributing to an analysis — participants","title":"Participants contributing to an analysis — participants","text":"Participants contributing analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Participants contributing to an analysis — participants","text":"","code":"participants(result, analysisId)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Participants contributing to an analysis — participants","text":"result Result object analysisId ID specific analysis return participants ","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Participants contributing to an analysis — participants","text":"References tables study participants contributing given analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/participants.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Participants contributing to an analysis — participants","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm <- generateDenominatorCohortSet(cdm, name = \"denominator\") #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec incidence <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\",   interval = \"overall\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs participants(result = incidence, analysisId = 1) #> NULL # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotIncidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot incidence results — plotIncidence","title":"Plot incidence results — plotIncidence","text":"Plot incidence results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotIncidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot incidence results — plotIncidence","text":"","code":"plotIncidence(   result,   x = \"incidence_start_date\",   ylim = c(0, NA),   ribbon = FALSE,   facet = NULL,   colour = NULL,   colour_name = NULL )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotIncidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot incidence results — plotIncidence","text":"result Incidence results x Variable plot x axis ylim Limits Y axis ribbon TRUE, plot join points using ribbon facet Variables use facets colour Variables use colours colour_name Colour legend name","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotIncidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot incidence results — plotIncidence","text":"ggplot incidence results plotted","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotIncidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot incidence results — plotIncidence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2008-01-01\"), as.Date(\"2018-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec inc <- estimateIncidence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting incidence for analysis 1 of 1 #> Overall time taken: 0 mins and 1 secs plotIncidence(inc)  # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotPrevalence.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot prevalence results — plotPrevalence","title":"Plot prevalence results — plotPrevalence","text":"Plot prevalence results","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotPrevalence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot prevalence results — plotPrevalence","text":"","code":"plotPrevalence(   result,   x = \"prevalence_start_date\",   ylim = c(0, NA),   ribbon = FALSE,   facet = NULL,   colour = NULL,   colour_name = NULL )"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotPrevalence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot prevalence results — plotPrevalence","text":"result Prevalence results x Variable plot x axis ylim Limits Y axis ribbon TRUE, plot join points using ribbon facet Variables use facets colour Variables use colours colour_name Colour legend name","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotPrevalence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot prevalence results — plotPrevalence","text":"ggplot prevalence results plotted","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/plotPrevalence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot prevalence results — plotPrevalence","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 10000) cdm <- generateDenominatorCohortSet(   cdm = cdm, name = \"denominator\",   cohortDateRange = c(as.Date(\"2014-01-01\"), as.Date(\"2018-01-01\")) ) #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs plotPrevalence(prev)  # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceAttrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Attrition associated with an prevalence analysis — prevalenceAttrition","title":"Attrition associated with an prevalence analysis — prevalenceAttrition","text":"Attrition associated prevalence analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceAttrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Attrition associated with an prevalence analysis — prevalenceAttrition","text":"","code":"prevalenceAttrition(result)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceAttrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Attrition associated with an prevalence analysis — prevalenceAttrition","text":"result Result get attrition","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceAttrition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Attrition associated with an prevalence analysis — prevalenceAttrition","text":"tibble counts reasons attrition.","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceAttrition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Attrition associated with an prevalence analysis — prevalenceAttrition","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm <- generateDenominatorCohortSet(cdm, name = \"denominator\") #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs prevalenceAttrition(prev) #> # A tibble: 11 × 25 #>    analysis_id number_records number_subjects reason_id reason  excluded_records #>    <chr>       <chr>          <chr>               <int> <chr>   <chr>            #>  1 1           200            200                     1 Starti… NA               #>  2 1           200            200                     2 Missin… 0                #>  3 1           200            200                     3 Missin… 0                #>  4 1           200            200                     4 Cannot… 0                #>  5 1           200            200                     5 No obs… 0                #>  6 1           200            200                     6 Doesn'… 0                #>  7 1           200            200                     7 Prior … 0                #>  8 1           200            200                    10 No obs… 0                #>  9 1           200            200                    11 Starti… NA               #> 10 1           197            197                    14 Not ob… <5               #> 11 1           197            197                    16 Do not… 0                #> # ℹ 19 more variables: excluded_subjects <chr>, outcome_cohort_id <chr>, #> #   outcome_cohort_name <chr>, analysis_type <chr>, analysis_interval <chr>, #> #   analysis_complete_database_intervals <lgl>, analysis_time_point <chr>, #> #   analysis_full_contribution <lgl>, analysis_min_cell_count <dbl>, #> #   denominator_cohort_id <int>, denominator_cohort_name <chr>, #> #   denominator_age_group <chr>, denominator_sex <chr>, #> #   denominator_days_prior_observation <dbl>, denominator_start_date <date>, … # }"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Settings associated with a prevalence analysis — prevalenceSet","title":"Settings associated with a prevalence analysis — prevalenceSet","text":"Settings associated prevalence analysis","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Settings associated with a prevalence analysis — prevalenceSet","text":"","code":"prevalenceSet(result)"},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Settings associated with a prevalence analysis — prevalenceSet","text":"result Result get settings","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Settings associated with a prevalence analysis — prevalenceSet","text":"tibble settings used estimating prevalence","code":""},{"path":"https://darwin-eu.github.io/IncidencePrevalence/reference/prevalenceSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Settings associated with a prevalence analysis — prevalenceSet","text":"","code":"# \\donttest{ cdm <- mockIncidencePrevalenceRef(sampleSize = 200) cdm <- generateDenominatorCohortSet(cdm, name = \"denominator\") #> ℹ Creating denominator cohorts #> ✔ Cohorts created in 0 min and 2 sec prev <- estimatePointPrevalence(   cdm = cdm,   denominatorTable = \"denominator\",   outcomeTable = \"outcome\" ) #> Getting prevalence for analysis 1 of 1 #> Time taken: 0 mins and 0 secs prevalenceSet(prev) #> NULL # }"}]
